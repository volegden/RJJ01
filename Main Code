settings
{
	main
	{
		Description: " The previously named \"Friendly No Kill\"\n    is no longer being maintained! \n This version is kept up to date!\n Last updated: December 22, 2023\n\n• Rules and infos on how to navigate the menu\r\n    and use other functions are written ingame.\n• Please contact our team before copying\r\n    or modifying our preset.\n\n Coded with ♡ by: Warloy & xMaxuss\n   Based on the work of: TbyCoLive\n Community managed with ♡ by: kwally"
		Mode Name: "Chillwatch ♥ Friendly: No kill!"
	}

	lobby
	{
		Allow Players Who Are In Queue: Yes
		Map Rotation: After A Game
		Match Voice Chat: Enabled
		Max Spectators: 5
		Max Team 1 Players: 6
		Max Team 2 Players: 6
		Return To Lobby: Never
		Swap Teams After Match: No
	}

	modes
	{
		Capture the Flag
		{
			Flag Carrier Abilities: All
			Flag Dropped Lock Time: 5.0
			Flag Return Time: 4.0
			Flag Score Respawn Time: 20.0

			enabled maps
			{
				Ayutthaya 972777519512063901
			}
		}

		Hybrid
		{
			Game Mode Start: Manual
			Capture Speed Modifier: 500%
			Payload Speed Modifier: 250%

			enabled maps
			{
				Midtown 972777519512068154
			}
		}

		Skirmish
		{
			Limit Valid Control Points: Second

			disabled maps
			{
				Eichenwalde
				Hanamura
				Hollywood
				King's Row
				Lijiang Tower Lunar New Year
				Workshop Chamber
				Workshop Expanse
				Workshop Expanse Night
				Workshop Green Screen
				Workshop Island
				Workshop Island Night
			}
		}

		Team Deathmatch
		{
			Game Mode Start: Immediately
			Self Initiated Respawn: Off

			enabled maps
			{
				Black Forest
				Castillo
				Kanezaka
				Malevento
				Necropolis
				Petra
				Château Guillard
				Château Guillard Halloween
				Ecopoint: Antarctica
				Ecopoint: Antarctica Winter
			}
		}

		General
		{
			Game Mode Start: Immediately
			Health Pack Respawn Time Scalar: 50%
			Hero Limit: Off
			Kill Cam: Off
			Spawn Health Packs: Enabled
		}
	}

	heroes
	{
		General
		{
			Ability Cooldown Time: 500%
			Ultimate Duration: 350%
			Ultimate Generation - Passive: 500%

			Ana
			{
				Biotic Grenade Cooldown Time: 20%
				Sleep Dart Cooldown Time: 20%
			}

			Ashe
			{
				Coach Gun Cooldown Time: 10%
				Coach Gun Knockback Scalar Enemy: 150%
				Coach Gun Knockback Scalar Self: 200%
				Dynamite Cooldown Time: 29%
				Dynamite Fuse Time Scalar: 500%
				Infinite Ultimate Duration: On
			}

			Baptiste
			{
				Immortality Field Cooldown Time: 20%
				Regenerative Burst Cooldown Time: 20%
			}

			Bastion
			{
				A-36 Tactical Grenade Cooldown Time: 30%
				A-36 Tactical Grenade Knockback Scalar: 250%
				Reconfigure Cooldown Time: 0%
				Ultimate Duration: 100%
			}

			Brigitte
			{
				Barrier Shield Cooldown Time: 1%
				Barrier Shield Recharge Rate: 500%
				Repair Pack Cooldown Time: 1%
				Shield Bash Cooldown Time: 10%
				Shield Bash Knockback Scalar: 150%
				Whip Shot Cooldown Time: 30%
				Whip Shot Knockback Scalar: 150%
			}

			Cassidy
			{
				Combat Roll Cooldown Time: 0%
				Magnetic Grenade Cooldown Time: 20%
			}

			D.Va
			{
				Boosters Cooldown Time: 0%
				Micro Missiles Cooldown Time: 15%
				Defense Matrix Maximum Time: 500%
				Defense Matrix Recharge Rate: 500%
				Spawn Without Mech: On
			}

			Doomfist
			{
				Power Block Charge Rate: 500%
				Power Block Cooldown Time: 20%
				Rocket Punch Cooldown Time: 20%
				Rocket Punch Knockback Scalar: 150%
				Seismic Slam Cooldown Time: 20%
				Ultimate Duration: 500%
			}

			Echo
			{
				Flight Cooldown Time: 0%
				Focusing Beam Cooldown Time: 15%
				Sticky Bombs Cooldown Time: 10%
			}

			Genji
			{
				Deflect Cooldown Time: 20%
				No Ammunition Requirement: On
				Swift Strike Cooldown Time: 20%
			}

			Hanzo
			{
				Lunge Cooldown Time: 0%
				Lunge Distance Scalar: 150%
				Sonic Arrow Cooldown Time: 20%
				Storm Arrows Cooldown Time: 20%
			}

			Illari
			{
				Healing Pylon Cooldown Time: 20%
				Outburst Cooldown Time: 15%
				Solar Energy Maximum: 300%
				Solar Energy Recharge Rate: 500%
			}

			Junker Queen
			{
				Carnage Cooldown Time: 10%
				Commanding Shout Cooldown Time: 10%
				Jagged Blade Cooldown Time: 15%
				Jagged Blade Delay Before Automatic Recall: 400%
			}

			Junkrat
			{
				Concussion Mine Cooldown Time: 10%
				Steel Trap Cooldown Time: 20%
				Ultimate Duration: 500%
			}

			Kiriko
			{
				Protection Suzu Cooldown Time: 15%
				Swift Step Cooldown Time: 10%
				Swift Step Distance Scalar: 300%
			}

			Lifeweaver
			{
				Life Grip Cooldown Time: 50%
				No Ammunition Requirement: On
				Petal Platform Cooldown Time: 99%
				Rejuvenating Dash Cooldown Time: 20%
				Ultimate Generation - Combat Tree of Life: 50%
				Ultimate Generation - Passive Tree of Life: 55%
			}

			Lúcio
			{
				Amp It Up Cooldown Time: 20%
				Soundwave Cooldown Time: 45%
			}

			Mauga
			{
				Cardiac Overdrive Cooldown Time: 35%
				Overrun Cooldown Time: 0%
				Overrun Knockback: 150%
				Ultimate Duration: 25%
			}

			Mercy
			{
				Guardian Angel Cooldown Time: 0%
				No Ammunition Requirement: On
				Resurrect Cooldown Time: 0%
			}

			Moira
			{
				Biotic Energy Maximum: 300%
				Biotic Energy Recharge Rate: 500%
				Biotic Orb Cooldown Time: 20%
				Fade Cooldown Time: 0%
			}

			Orisa
			{
				Energy Javelin Cooldown Time: 40%
				Fortify Cooldown Time: 25%
				Javelin Spin Cooldown Time: 15%
			}

			Pharah
			{
				Concussive Blast Cooldown Time: 25%
				Hover Jets Unlimited Fuel: On
				Jump Jet Cooldown Time: 0%
			}

			Ramattra
			{
				Nemesis Form Cooldown Time: 20%
				No Ammunition Requirement: On
				Ravenous Vortex Cooldown Time: 20%
				Void Barrier Omnic Form Cooldown Time: 20%
			}

			Reaper
			{
				Shadow Step Cooldown Time: 10%
				Wraith Form Cooldown Time: 10%
			}

			Reinhardt
			{
				Barrier Field Cooldown Time: 10%
				Charge Cooldown Time: 15%
				Fire Strike Cooldown Time: 50%
			}

			Roadhog
			{
				Chain Hook Cooldown Time: 20%
				Pig Pen Cooldown Time: 20%
				Take a Breather Cooldown Time: 20%
				Take a Breather Maximum Time: 500%
				Take a Breather Recharge Rate: 500%
			}

			Sigma
			{
				Accretion Cooldown Time: 10%
				Experimental Barrier Cooldown Time: 20%
				Kinetic Grasp Cooldown Time: 20%
				Ultimate Generation - Combat Gravitic Flux: 50%
				Ultimate Generation - Passive Gravitic Flux: 75%
			}

			Sojourn
			{
				Disruptor Shot Cooldown Time: 20%
				Power Slide Cooldown Time: 0%
			}

			Soldier: 76
			{
				Biotic Field Cooldown Time: 10%
				Helix Rockets Cooldown Time: 15%
				Helix Rockets Knockback Scalar: 150%
				No Ammunition Requirement: On
			}

			Sombra
			{
				Hack Cooldown Time: 15%
				Translocator Cooldown Time: 0%
				Virus Cooldown Time: 15%
			}

			Symmetra
			{
				No Ammunition Requirement: On
				Sentry Turret Cooldown Time: 20%
				Teleporter Cooldown Time: 20%
			}

			Torbjörn
			{
				Deploy Turret Cooldown Time: 99%
				Overload Cooldown Time: 25%
			}

			Tracer
			{
				Blink Cooldown Time: 0%
				Recall Cooldown Time: 30%
			}

			Widowmaker
			{
				Grappling Hook Cooldown Time: 0%
				No Ammunition Requirement: On
				Venom Mine Cooldown Time: 45%
			}

			Winston
			{
				Barrier Projector Cooldown Time: 15%
				Jump Pack Acceleration Scalar: 80%
				Jump Pack Cooldown Time: 10%
			}

			Wrecking Ball
			{
				Adaptive Shield Cooldown Time: 20%
				Grappling Claw Cooldown Time: 10%
				Piledriver Cooldown Time: 30%
			}

			Zarya
			{
				No Ammunition Requirement: On
				Particle Barrier Cooldown Time: 25%
				Projected Barrier Cooldown Time: 25%
				Ultimate Generation - Combat Graviton Surge: 50%
				Ultimate Generation - Passive Graviton Surge: 75%
			}

			Zenyatta
			{
				No Ammunition Requirement: On
			}
		}
	}
}

variables
{
	global:
		0: High_Rank
		1: Banned_List
		2: Red
		3: Green
		4: Blue
		5: Rainbow_Color
		6: Mod_Rank
		7: Temp_Banned
		8: Current_Host
		9: Gravity_Helper
		10: Gravity_Toggle
		11: Map_Teleport_Locations
		12: Drawing_Obj_Storage
		13: Titles_And_Outlines
		14: Jail_List
		15: Jail_Helper
		16: Drawing_Obj_Size
		17: Drawing_Obj_Effects
		18: Modification_Mode_String
		19: Modification_Target_String
		20: Icons_List
		21: Icons_List_For_Menu
		22: Colors
		23: Status_String
		24: Jumppad_Storage
		25: Jumppad_Radius
		26: Kanezaka_Teleports
		27: UNO_Random
		28: Card_Colors
		29: UNO_Players
		30: UNO_Deck
		31: UNO_Help
		32: UNO_Started
		33: UNO_Looper
		34: UNO_Colorblind
		35: UNO_Inworld
		36: UNO_Info
		37: UNO_Timer
		38: Beams
		39: Drawing_Obj_Storage_Beams
		40: Skins_Check
		41: Player_Joined_Queue
		42: Game_Timer
		43: Game_Timer_Helper
		44: Moe_Position
		45: Demoted_List
		46: OffOnString
		47: Rank_Icon
		48: Game_Description
		49: Promoted_List
		50: Credits
		51: Angle
		52: TP_Help
		53: Map_Teleport_Exits
		54: Muted_List
		55: Moe_Force
		56: Warning_List
		57: Dice_String
		58: Music_Toggle
		59: Rotate
		60: Main_Chaser

	player:
		0: High_Rank
		1: Mod_Rank
		2: Promoted_Rank
		3: Player_Modification
		4: Verification_Key
		5: Mod_Name_ID
		6: Protection_ID
		7: Scale_Prev
		8: Scale_Real
		9: Is_Crouch_On
		10: Is_Flying
		11: Target_Effect
		12: Mode_Cycle
		13: Mode_Headline
		14: Mode_Hud_ID
		15: DMG_Time
		16: Target_Tag_ID
		17: Target_Arrow_ID
		18: Protection
		19: Target_Lock
		20: Camera
		21: Scale_Hud_ID
		22: Progress_Lock
		23: Remote_Scale
		24: Mode_Description
		25: Last_Position_Facing
		26: Restricted
		27: Voice_Pitch
		28: Heaven_Strike_Radius
		29: Heaven_Strike_ID
		30: Icon_ID
		31: Ghost_Mode
		32: Slow_Projectile
		33: Progress_Stop
		34: Drawing_Obj_Info_Array
		35: Player_Title_And_Outline
		36: Player_Nameplates
		37: Is_Title_Given
		38: Index_Help
		39: Modification_Mode_Selector
		40: Modification_Scalar_Selector
		41: Target_Shortcut
		42: Auto_Respawn
		43: Icons_Info_Array
		44: Icons_Info_Copy
		45: Icons_Signal
		46: Regular_Player_Has_Title
		47: M32_Players_Nameplate
		48: NamesAndOutlines_Colors_Selector
		49: Is_Menu_Active
		50: Status_Selector
		51: Jumppad_Helper
		52: Jumppad_Entry
		53: Jumppad_Loop
		54: Jumppad_Info_Array
		55: Jumppad_Preview
		56: Camera_Info_Array
		57: Camera_Helper
		58: Camera_Position
		59: Camera_Smooth
		60: Camera_Loop
		61: Camera_LOS
		62: Camera_Target
		63: Signal
		64: Mode_Cycle_Default
		65: Spam_Cooldown
		66: UNO_Info_Array
		67: UNO_Hand
		68: UNO_Helper
		69: UNO_Ingame
		70: UNO_Loop
		71: UNO_Sorter
		72: Print
		73: Positions_For_Beams
		74: Beams_Preview_ID
		75: Beams_Selector
		76: Is_Invisible
		77: No_CD
		78: Full_Protection
		79: ExtraEffect_ID
		80: Extra10_Player
		81: Comms_Target
		82: Bot_Aggro
		83: Bot_No
		84: Bot_CD
		85: Extra17_Pos
		86: Effect_Storage
		87: Players_Global_Array
		88: Outlines_Toggle
		89: Midtown_Bonus
		90: Leash_List
		91: Leash_To
		92: Leash_Helper
		93: Leash_IDs
		94: Leash_Index
		95: Leash_Spawn
		96: Savezone_List
		97: Savezone_Info_Array
		98: Savezone_Index
		99: Savezone_Helper
		100: TP_Index
		101: Control_Host
		102: Control_Deny
		103: Control_ID
		104: Control_Active
		105: Control_List
		106: Target_Select
		107: AFK_Toggle
		108: FunkySkillsToggle
	}

subroutines
{
	0: Protection
	1: Scale_Progress
	2: Hud_Elements
	3: Drawing_Objects_Preview
	4: Beams_Preview
	5: Give_Custom_Nameplate
	6: Give_Custom_Outline
	7: Jail_Leaver
	8: UNO_Draw
	9: UNO_Update_Deck
	10: UNO_Update_Hand
	11: UNO_End
	12: Info_Page_Default
	13: Info_Page_Mod
	14: Control_Sub
	15: Full_Protection_Toggle
}

rule("Anti-Crash-ON")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Server Load > 200;
	}

	actions
	{
		Wait(3, Abort When False);
		Small Message(All Players(All Teams), Custom String("   Anti Crash System Activated"));
		Set Slow Motion(10);
	}
}

rule("Anti-Crash-OFF")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Server Load < 100;
	}

	actions
	{
		Set Slow Motion(100);
	}
}

rule("Game_Description_Timer")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Game_Timer_Helper[0] = Round To Integer(Match Time / 60, Down);
		If(Round To Integer(Match Time % 60, Down) <= 9);
			Global.Game_Timer_Helper[1] = Custom String("0{0}", Round To Integer(Match Time % 60, Down));
		Else;
			Global.Game_Timer_Helper[1] = Round To Integer(Match Time % 60, Down);
		End;
		Global.Game_Timer = Custom String("{0}:{1}", Global.Game_Timer_Helper[0], Global.Game_Timer_Helper[1]);
		Wait(1, Ignore Condition);
		Loop;
	}
}

rule("Game_Description_Rotate")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{0} » Welcome! Thanks for hanging out and have fun! « {0} - {1}", 
			Icon String(Heart), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID; 
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{0} » Read the info page on your top left for details « {0} - {1}", 
			Icon String(Arrow: Left), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{0} » Roles on the right - {1}", 
			Icon String(Arrow: Right), 
			Custom String(" {0} : Angel  |  No Icon: Promoted « {1} - {2}", Icon String(Halo), Icon String(Arrow: Right), Global.Game_Timer)), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{1} » {0} « {1} - {2}", 
			Global.Credits[0], Icon String(Bolt), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{1} » {0} « {1} - {2}", 
			Global.Credits[1], Icon String(Fire), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{0} » Phobic slurs, Racism and Harassment of any kind are prohibited « {0} - {1}",
			Icon String(Skull), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Destroy HUD Text(Global.Game_Description);
		Create HUD Text(All Players(All Teams), Null, Custom String("{0} » Unreasonable use of Kick and ban is a punishable offence « {0} - {1}", 
			Icon String(Warning), Global.Game_Timer), 
			Null, Top, -1, Color(White), Global.Rainbow_Color, Color(White), Visible To String and Color, Default Visibility);
		Global.Game_Description = Last Text ID;
		Wait(14, Ignore Condition);
		Loop;
	}
}

rule("Global_Settings")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Music_Toggle = Workshop Setting Toggle(Custom String("Music Lobby"), Custom String("Set this lobby as a music lobby"), False, 0);
		Global.Current_Host = Null;
		Global.Player_Joined_Queue = Empty Array;
		"Dev Tools"
		Disable Inspector Recording;
		
		"Global Default"
		Disable Built-In Game Mode Announcer;
		Disable Built-In Game Mode Completion;
		Disable Built-In Game Mode Scoring;
		Disable Built-In Game Mode Music;
		Modify Global Variable(Mod_Rank, Remove From Array By Value, 0);
		Modify Global Variable(Temp_Banned, Remove From Array By Value, 0);
		"Default Color"
		Global.Red = 0;
		Global.Green = 0;
		Global.Blue = 0;
		"Another Defaults"
		Global.Gravity_Helper = 0;
		Global.Gravity_Toggle = False;
		Global.Drawing_Obj_Storage = Empty Array;
		
		Global.Jail_List = Array(Empty Array, Empty Array, Empty Array, Empty Array);
		Global.Jail_Helper = Null;
		
		Global.Jumppad_Storage = Empty Array;

		Global.UNO_Players = Empty Array;
		Global.UNO_Deck = Array(Null, Null, Null, Null);
		Global.UNO_Help = Null;
		Global.UNO_Started = False;
		Global.UNO_Looper = 0;
		Global.UNO_Inworld = Array(False, Null, Null, Null);
		Global.UNO_Info = Null;
		Global.UNO_Timer = 0;

		Global.Main_Chaser = 0;
		Chase Global Variable At Rate(Main_Chaser, 99999, 0.2, None);

		Global.Promoted_List = Empty Array;

		Wait(5, Ignore Condition);
		Global.Skins_Check = True;
		If(Count Of(Global.High_Rank) < 1 || Count Of(Global.Mod_Rank) < 115 || Count Of(Global.Titles_And_Outlines) < 100 || Count Of(Global.Banned_List) < 7);
			For Global Variable(Gravity_Helper, 0, 12, 1);
				Global.Gravity_Helper -=1;
			End;
		End;

		If(Global.Music_Toggle);
			Create HUD Text(All Players(All Teams), Null, Null, Custom String("This is a music lobby, so no talking in MVC!"), Top, 0, Color(White), Color(White), Color(Sky Blue),
				Visible To, Default Visibility);
		End;
	}
}

rule("Global_Text")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Create HUD Text(All Players(All Teams), Custom String("{0}", 
			Hero Icon String(Hero Of(Host Player))), Custom String("Watcher"),
			Custom String("{0} {1}", Host Player, If-Then-Else(Host Player.High_Rank && Not(Host Player.Heaven_Strike_ID[3]), Icon String(Heart), 
				If-Then-Else(Host Player.Mod_Rank && Not(Host Player.Promoted_Rank) && Not(Host Player.Heaven_Strike_ID[3]), Icon String(Halo), Custom String("")))), 
			Right, -6, Global.Rainbow_Color, Global.Rainbow_Color, Global.Rainbow_Color, Visible To String and Color,
			Default Visibility);
		Create HUD Text(All Players(All Teams), Null, Custom String("────★ Chillers ★────"), Null, Right, -5, Null, Global.Rainbow_Color,
			Null, Visible To and Color, Default Visibility);
	}
}

rule("Player_Joined_Queue")
{
	event
	{
		Player Joined Match;
		All;
		All;
	}

	conditions
	{
		(Array Contains(Global.Banned_List, Custom String("{0}", Event Player)) || Array Contains(Global.Temp_Banned, Custom String("{0}",
			Event Player))) == False;
	}

	actions
	{
		Modify Global Variable(Player_Joined_Queue, Append To Array, Event Player);
	}
}

rule("Player_Left_Queue_Failsave")
{
	event
	{
		Player Left Match;
		All;
		All;
	}

	conditions
	{
		Array Contains(Global.Player_Joined_Queue, Event Player) == True;
	}

	actions
	{
		Modify Global Variable(Player_Joined_Queue, Remove From Array By Value, Event Player);
	}
}

rule("Default_Player_Settings")
{
	event
	{
		Player Joined Match;
		All;
		All;
	}

	actions
	{
		Abort If(Array Contains(Global.Banned_List, Custom String("{0}", Event Player)) || Array Contains(Global.Temp_Banned, Custom String("{0}", Event Player)));
		Wait Until(First Of(Global.Player_Joined_Queue) == Event Player, 9999);
		
		If(Is Dummy Bot(Event Player));
			Event Player.Player_Modification = Array(100, 100, 100, 100, 100);
			Event Player.Voice_Pitch = 1;
			Wait(0.2, Ignore Condition);
			Modify Global Variable(Player_Joined_Queue, Remove From Array By Value, Null);
			Modify Global Variable(Player_Joined_Queue, Remove From Array By Value, Event Player);
			Wait Until(Has Spawned(Event Player), 9999);	
			Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element.Is_Crouch_On), Custom String("Talk with me"),
				Event Player, 1, Do Not Clip, Visible To Position String and Color, Global.Rainbow_Color, Default Visibility);
			Event Player.Target_Tag_ID = Last Text ID;
			Abort;
		End;

		"Show names and pages of players"
		Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element.Is_Crouch_On && Not(Event Player.Is_Invisible)), Custom String("{0} | {1} {2}", Event Player, 
			If-Then-Else(Event Player.Mode_Cycle != -1, If-Then-Else(Event Player.Heaven_Strike_ID[3], 0, Event Player.Mode_Cycle), Event Player.Mode_Cycle_Default), 
			If-Then-Else(Event Player.Promoted_Rank, Icon String(Arrow: Up), Global.Rank_Icon[Event Player.Verification_Key])),
			Event Player, 1, Do Not Clip, Visible To Position and String, Color(White), Default Visibility);
		Event Player.Target_Tag_ID = Last Text ID;

		"Statuses by player menu and invisibility"
			Create HUD Text(Filtered Array(All Players(All Teams), (Current Array Element.Is_Invisible && Current Array Element == Event Player)), Null, Custom String("Invisible"), Null, 
			Top, 100, Color(White), Color(Blue), Color(White), Visible To, Visible Never);
		"TODO: Either compress invisible (or remove if invisible page needs to be removed), or delete invis message"
		Create HUD Text(Event Player, Null, Custom String("{0}", If-Then-Else(Event Player.Full_Protection, Custom String("Fully Protected"), 
			If-Then-Else(Event Player.Protection, Custom String("Protected"), Custom String("")))), Null, 
			Top, 100, Color(White), Color(Blue), Color(White), Visible To and String, Visible Never);

		"Default Variables"
		
		Event Player.Signal = False;
		Event Player.Is_Invisible = False;
		Event Player.High_Rank = False;
		Event Player.Mod_Rank = False;
		If(Array Contains(Global.Promoted_List, Custom String("{0}", Event Player)));
			Event Player.Promoted_Rank = True;
		Else;
			Event Player.Promoted_Rank = False;
		End;
		Event Player.Player_Modification = Array(100, 100, 100, 100, 100);
		Event Player.Verification_Key = 0;
		Event Player.Mod_Name_ID = Array(Null, False);
		Event Player.Protection_ID = Null;
		Event Player.Scale_Prev = 1;
		Event Player.Scale_Real = 1;
		Event Player.Is_Flying = False;
		Event Player.Target_Effect = Null;
		Event Player.Mode_Cycle = -1;
		Event Player.Mode_Cycle_Default = 0;
		Event Player.Mode_Headline = Custom String("Kill & Resurrection");
		Event Player.Mode_Hud_ID = Null;
		Event Player.DMG_Time = Null;
		Event Player.Target_Arrow_ID = Null;
		Event Player.Target_Lock = Custom String("--- No Target ---");
		Event Player.Camera = 0;
		Event Player.Scale_Hud_ID = Null;
		Event Player.Progress_Lock = False;
		Event Player.Remote_Scale = False;
		Event Player.Mode_Description = Null;
		Event Player.Last_Position_Facing = Array(Null, Null);
		Event Player.Voice_Pitch = 1;
		Event Player.Heaven_Strike_Radius = Null;
		Event Player.Heaven_Strike_ID = Array(Null, Null, False, False);
		Event Player.Ghost_Mode = False;
		Event Player.Slow_Projectile = False;
		Event Player.Progress_Stop = False;
		Event Player.Is_Crouch_On = False;

		Event Player.Modification_Mode_Selector = 1;
		Event Player.Modification_Scalar_Selector = 2;

		Event Player.Icon_ID = Empty Array;
		"Array: Icons_Selector, Icons_Colors_Selector, Icons_Operation"
		Event Player.Icons_Info_Array = Array(0, 11, 0);
		Event Player.Icons_Info_Copy = Array(0, 11, 0);
		Event Player.Status_Selector = 0;

		Event Player.Jumppad_Helper = 0;
		Event Player.Jumppad_Entry = Array(Null, Null, Null, Null, Null);
		Event Player.Jumppad_Loop = 0;
		"Array: Inside_Color_Selector, Outside_Color_Selector, Radius_Selector, Strength_Selector"
		Event Player.Jumppad_Info_Array = Array(8, 7, 1, 3);
		Event Player.Jumppad_Preview = Array(Null, Null);

		"Array: Color_Selector, Size_Selector, Effect_Selector, Effect_ID, Effect_ID2"
		Event Player.Drawing_Obj_Info_Array = Array(0, 0, 0, Null, Null);

		"Array: Started, Placed, ID, Player, Text, Dot, Default, "
		Event Player.Camera_Info_Array = Array(False, False, Null, Null, Null, Null, Null);
		Event Player.Camera_Helper = Null;
		Event Player.Camera_Position = Vector(0,0,0);
		Event Player.Camera_Smooth = 0.1;
		Chase Player Variable Over Time(Event Player, Camera_Smooth, 200, 3, None);
		Event Player.Camera_Loop = 0;
		Event Player.Camera_LOS = Empty Array;
		Event Player.Camera_Target = Custom String("Currently No Target");

		Event Player.Spam_Cooldown = 3;
		Chase Player Variable At Rate(Event Player, Spam_Cooldown, 0, 1, None);

		Event Player.Control_Deny = Empty Array;
		Event Player.Control_List = Empty Array;
		Event Player.Control_Active = False;

		Event Player.UNO_Hand = Empty Array;
		Event Player.UNO_Helper = Array(Null, Null, Null, Null);
		Event Player.UNO_Loop = 0;
		Event Player.UNO_Ingame = False;
		"Array: Arrow_Pos, Draw_Cards, Black_Selector, Is_Turn, Has_Drawn, Restore, Black_Logic, Black Text"
		Event Player.UNO_Info_Array = Array(0, 0, 1, False, False, False, False, Null);
		Event Player.UNO_Sorter = Array(Null, Null, Null, Null, Null);
		Event Player.Print = 0;

		Event Player.No_CD = False;
		Event Player.Full_Protection = False;
		
		Event Player.Leash_IDs = Empty Array;
		Event Player.Leash_List = Empty Array;
		Event Player.Leash_To = Empty Array;
		Event Player.Leash_Helper = Null;
		Event Player.Leash_Spawn = Null;

		"Array: Position, Radius, ID_Effect, ID_Text"
		Event Player.Savezone_Info_Array = Array(Null, 1.5, Null, Null);
		Event Player.Savezone_List = Array(Event Player);

		Event Player.Outlines_Toggle = True;
		Event Player.Positions_For_Beams = Array(Null, Null);

		Event Player.Effect_Storage = Null;

		Disable Game Mode HUD(Event Player);
		Disable Game Mode In-World UI(Event Player);

		"Funky Skills"
		Event Player.FunkySkillsToggle = True;

		"Is menu Active"
		Event Player.Is_Menu_Active = True;

		Event Player.Mode_Headline = Custom String("Info Page");
		Create HUD Text(Event Player, Event Player.Mode_Cycle_Default, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
			Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
			Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, Visible To String and Color, Visible Never);
		Event Player.Mode_Hud_ID = Last Text ID;

		Call Subroutine(Info_Page_Default);

		If(Array Contains(Global.Muted_List, Custom String("{0}", Event Player)));
			Disable Text Chat(Event Player);
			Disable Voice Chat(Event Player, True, True, False);
			Create Hud Text(Event Player, Null, Custom String(" \nYou are on the muted list!\r\nPlease Contact kwally#21906\r\non Battlenet \r\n(all letters lowercase!)\r\nfor further support."), Null, 
				Right, 15, Color(White), Color(Yellow), Color(White), None, Visible Never);
		Else If(Array Contains(Global.Demoted_List, Custom String("{0}", Event Player)));
			Create Hud Text(Event Player, Null, Custom String(" \nYou are on the demoted list!\r\nPlease Contact kwally#21906\r\non Battlenet \r\n(all letters lowercase!)\r\nfor further support."), Null, 
				Right, 15, Color(White), Color(Yellow), Color(White), None, Visible Never);
		Else If(Array Contains(Global.Warning_List, Custom String("{0}", Event Player)));
			Create Hud Text(Event Player, Null, 
				Custom String(" \nWARNING! You have been\nreported in our custom mode.\nPlease Contact kwally#21906\non Bnet (all lowercase) for\nfurther support."), 
				Null, Right, 15, Color(White), Color(Yellow), Color(White), None, Visible Never);
		End;

		"Jail handler"
		Wait(0.1, Ignore Condition);
		Event Player.Restricted = Array(False, False);
		If(Array Contains(Global.Jail_List[0],Custom String("{0}",Event Player)));	
			Event Player.Restricted[0] = True;
			Event Player.Index_Help = Index Of Array Value(Global.Jail_List[0], Custom String("{0}", Event Player));
			Event Player.Restricted[1] = Global.Jail_List[3][Event Player.Index_Help];
			Small Message(All Players(All Teams), Custom String("{0}", Event Player.Restricted[1]));
			Disable Text Chat(Event Player);
			Disable Voice Chat(Event Player, True, True, False);
		End;

		Wait(0.2, Ignore Condition);

		"Queue of players"
		Modify Global Variable(Player_Joined_Queue, Remove From Array By Value, Null);
		Modify Global Variable(Player_Joined_Queue, Remove From Array By Value, Event Player);
		
		"Sequence Completed"
		Wait Until(Has Spawned(Event Player), 99999);

		"Set protection on player by default"
		Event Player.Protection = True;

		"Set auto resurrection on player by default"
		Event Player.Auto_Respawn = True;
		
		"Jail handler finds escaped prisoner"
		Wait(0.01, Ignore Condition);
		If(Event Player.Restricted[0]);
			Big Message(All Players(All Teams), Custom String("{0} tried to escape the jail LMAO", Event Player));
			Call Subroutine(Jail_Leaver);
		Else;
			Small Message(All Players(All Teams), Custom String(" Welcome {1} {0}", Event Player, Hero Icon String(Hero Of(Event Player))));
		End;
	}
}

rule("Dynamic_Color")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Angle = Total Time Elapsed / 80 * 360;
		Global.Red = 127.5 + 127.5 * Cosine From Degrees(Global.Angle);
        Global.Green = 127.5 + 127.5 * Cosine From Degrees(Global.Angle - 120);
        Global.Blue = 127.5 + 127.5 * Cosine From Degrees(Global.Angle + 120);
        Global.Rainbow_Color = Custom Color(Global.Red, Global.Green, Global.Blue, 255);
		Wait(0.12, Ignore Condition);
		Loop;
	}
}

rule ("Subroutine: Call Default Info Page")
{
    event 
	{
		Subroutine;
		Info_Page_Default;
    }

    actions 
	{	
		Create HUD Text(Event Player, Null, 
			Custom String("         • Basic Functions •\r\n- Hold Reload : Toggle Protection (Default On).\r\n- Hold Interact : Switch Camera (5 types).\r\n{0}", 
			Custom String("- Hold Melee : Switch Heroes.\r\n         • How to use the menu •\r\n{0}", 
			Custom String("- Crouch + {0} or {1}", Input Binding String(Button(Jump)),
			Custom String("{0} : change pages.\r\n- Crouch + shown input : perform action.\r\n         • While on this page •\r\n{1}", 
				Input Binding String(Button(Interact)), 
			Custom String("- Crouch + {0} : hide/show menu.\r\n{1}", Input Binding String(Button(Melee)),
			Custom String("- Crouch + Ultimate : set yourself as afk\r\n      (deactivates when moving/crouching).\r\n{0}",
			Custom String("Chillers have more pages/options.\r\n\r\n{0}",
			Custom String("In these lobbies, please be careful\r\n   who you interact with and what\r\n   personal information you share."
			)))))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
		Event Player.Mode_Description = Last Text ID;
    }
}

rule ("Subroutine: Call Mod Info Page")
{
    event 
	{
		Subroutine;
		Info_Page_Mod;
    }

    actions 
	{	
		Create HUD Text(Event Player, Null, 
			Custom String("Hold {0} + {1} on\r\n    this page to hide/show menu.\r\n{2}",
				Input Binding String(Button(Crouch)), Input Binding String(Button(Melee)),
			Custom String("Press {0} + {1} on\r\n    this page to set yourself as afk\r\n    (deactivates when moving/crouching).\r\n\r\n{2}",
				Input Binding String(Button(Crouch)), Input Binding String(Button(Ultimate)),
			Custom String("In these lobbies, please be careful\r\n   who you interact with and what\r\n   personal information you share."
			))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
		Event Player.Mode_Description = Last Text ID;
    }
}

rule ("Data") 
{
    event 
	{
        Ongoing - Global;
    }

    actions 
	{
		Global.Credits = Array(Custom String("Coded with {0} by Warloy and xMaxuss, based on TbyCoLive's work", Icon String(Heart)), 
			Custom String("Community managed with {0} by kwally", Icon String(Heart)));
		
		Global.Rank_Icon = Array(Custom String(""), Icon String(Halo), Icon String(Heart), Custom String(""));

		Global.OffOnString = Array(Custom String("Off"), Custom String("On"));

		Global.Dice_String = Array(Custom String("Heads"), Custom String("Tails"), Custom String("Rock"), Custom String("Paper"), Custom String("Scissors"));

		Global.Modification_Mode_String = Array(Custom String("Damage"), Custom String("Speed"), Custom String("Knockback"), Custom String("Gravity"));
		Global.Modification_Target_String = Array(Custom String("Yourself"), Custom String("Target"));
		
		Global.Drawing_Obj_Effects = Array(Custom String("Sphere"), Custom String("Sparkles"), Custom String("Light Shaft"),
			Custom String("Orb"), Custom String("Ring"), Custom String("Cloud"), Custom String("Good Aura"), Custom String("Bad Aura"));
		Global.Drawing_Obj_Size = Array(0.050, 0.070, 0.150, 0.400, 0.700, 1, 1.700, 2, 3, 4, 6, 8, 10);
		Global.Icons_List = Array(Custom String("Bolt"), Custom String("Happy"), Custom String("Moon"), Custom String("Halo"), Custom String("Trashcan"),
			Custom String("Dizzy"), Custom String("Sad"), Custom String("Poison"), Custom String("Warning"), Custom String("Stop"),
			Custom String("Spiral"), Custom String("Radioactive"), Custom String("Skull"), Custom String("Recycle"), Custom String("No"),
			Custom String("Eye"), Custom String("Asterisk"));
		Global.Icons_List_For_Menu = Array(Icon String(Bolt), Icon String(Happy), Icon String(Moon), Icon String(Halo), Icon String(Trashcan), Icon String(
			Dizzy), Icon String(Sad), Icon String(Poison 2), Icon String(Warning), Icon String(Stop), Icon String(Spiral), Icon String(
			Radioactive), Icon String(Skull), Icon String(Recycle), Icon String(No), Icon String(Eye), Icon String(Asterisk));
		
		Global.Colors = Array(Color(White), Color(Black), Color(Gray), Color(Blue), Color(Sky Blue), Color(Turquoise), Color(Aqua), Color(Green),
			Color(Lime Green), Color(Yellow), Color(Orange), Color(Red), Color(Rose), Color(Purple), Color(Violet), Custom Color(139, 69, 19, 255));

		Global.Status_String = Array(Custom String("Knocked Down"), Custom String("Stunned"), Custom String("Frozen"), Custom String("Burning"), Custom String("Hacked"));

		Global.Jumppad_Radius = Array(0.75, 1.75, 3, 6);
		Global.Kanezaka_Teleports = Array(Vector(-17.86, 10.50, 17.91), Vector(-1.06, 9.00, -46.18), Vector(-44.15, 11.00, -12.76), Vector(-28.72, 4.00, 41.27));

		Global.Beams = Array(Custom String("Good Beam"), Custom String("Bad Beam"), Custom String("Grapple Beam"));
		
		"Uno Cards colors: 0=black, 1=red, 2=green, 3=blue, 4=yellow"
		"Uno Cards meaning: 0-9=normal, 10=skip, 11=reverse, 12=draw2, 13=pick, 14=draw4"
		Global.UNO_Random = Array(0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4);
		Global.Card_Colors = Array(Color(Black), Color(Red), Color(Green), Color(Blue), Color(Yellow));
		Global.UNO_Colorblind = Array(Custom String("D"), Custom String("R"), Custom String("G"), Custom String("B"), Custom String("Y"));

		Global.Rotate = Array(Icon String(Arrow: Up), Icon String(Arrow: Right), Icon String(Arrow: Down), Icon String(Arrow: Left));
	}
}

rule ("Custom nameplates list") 
{
    event 
	{
        Ongoing - Global;
    }

    actions 
	{
		Global.Titles_And_Outlines = Array(
			Array(Custom String("w4tchers"), 
                  Custom Color(240, 128, 128, 255),
			      Custom String("w4tchers"),
			      Custom String("Who's this?"),
			      Custom String("It's me!")
        ), 
			Array(Custom String("Warloy"), 
                  Custom Color(64, 130, 109, 255),
			      Custom String("Coup de grâce")
        ), 
			Array(Custom String("kwally"),		
				  Custom String("Fading"),	
                  168,165,182, 15,17,16,
                  Custom String(" ")
        ),
			Array(Custom String("xMaxuss"), 
                  Custom String("Fading"), 
                  70,200,255, 150,225,255,
			      Custom String("{1} {0}     M L  S  A  E      {0} {1}", Ability Icon String(Hero(Widowmaker), Button(Ultimate)), Icon String(Heart)),
			      Custom String("{0} TO THE MAX {0}", Ability Icon String(Hero(Sombra), Button(Ultimate))),
			      Custom String("¡Hola! ¿Qué onda? {0}", Hero Icon String(Hero(Sombra)))
        ),
			Array(Custom String("ǀƑIREǀ"), 
                  Custom String("Rainbow"),
                  Custom String("ALT F4"),
			      Custom String("{0}   Ｍｅｌｔｉｎｇ...   {0}", Ability Icon String(Hero(Mei), Button(Ability 1)))
        ),
			Array(Custom String("TEAMEPǃC"),
                  Color(Green),
                  Custom String("epǃc")
        ),
			Array(Custom String("xskĳ"), 
                  Custom String("Rainbow"),
                  Custom String("ŠKÌJ")
        ), 
			Array(Custom String("Eggman"), 
                  Color(Yellow),
			      Custom String("Step into the ring {0}", Hero Icon String(Hero(Doomfist))),
			      Custom String("† Ulekhol Israel †"), 
			      Custom String("† Mazel Tov †")
        ),
			Array(Custom String("HYUA"), 
                  Custom Color(89, 5, 5, 255),
                  Custom String("literally asuka"),
                  Custom String("{0} L O A F L Y {0}", Icon String(Diamond))
        ), 
			Array(Custom String("S0undw4v3"), 
			      Custom Color(237, 26, 77, 255), 
				  Custom String("{0} Driver Rex {0}", Ability Icon String(Hero(Zenyatta), Button(Ability 2))),
				  Custom String("{0} Sith Apprentice Soundwave {0}", Ability Icon String(Hero(Genji), Button(Ultimate))), 
				  Custom String("{0} Fierce Deity {0}", Icon String(Skull))
        ), 
			Array(Custom String("Xenolysith"), 
                  Custom Color(241, 196, 15, 255),
                  Custom String("Stargazer"), 
                  Custom String("Professor")
        ), 
			Array(Custom String("Dead"), 
                  Color(Black),
                  Custom String("{1}      {0}   I  K  H  K   {0}     {1}", Ability Icon String(Hero(Sombra), Button(Ultimate)), Icon String(Heart)),
				  Custom String("I get us into trouble"),
				  Custom String("Dumber")
        ),
			Array(Custom String("xCleo"), 
                  Custom Color(247, 187, 229, 255),
                  Custom String("{0} ♡ Cutie  Cleo ♡ {0}", Ability Icon String(Hero(D.va), Button(Ultimate))),
			      Custom String("{0}   ＭＯＤ  ＡＢＵＳＥＲ   {0}", Icon String(Heart)),
			      Custom String("{0}    H2o - Just Add Water   {0}", Icon String(Moon))
        ), 
			Array(Custom String("DONUT"), 
                  Color(Red),
                  Custom String("ALPHA DONUT")
        ), 
			Array(Custom String("Toguro"), 
                  Color(Black),
                  Custom String("Darkeater"), 
                  Custom String("Fléau des Astres"),
                  Custom String("Celui qui renaquit")
        ),
			Array(Custom String("kosmos"), 
                  Custom Color(80, 179, 149, 255),
                  Custom String("{0}   I'm so full from uranium yum   {0}", Icon String(Radioactive)), 
			      Custom String("{0}   Can I borrow your Geigercounter?   {0}", Icon String(Radioactive)),
			      Custom String("{0}   I am in your walls   {0}", Icon String(Radioactive))
        ), 
			Array(Custom String("wheyfuwu"), 
			      Custom Color(219, 99, 179, 255),
			      Custom String("wheyfu"), 
			      Custom String("resident tomboy"),
			      Custom String("President #whey", Ability Icon String(Hero(Ramattra), Button(Ability 1)))
        ),
			Array(Custom String("AvatarGod"), 
                  Color(Red),
                  Custom String("ＡｖａｔａｒＧｏｄ")
        ),
			Array(Custom String("Cattanklol"), 
        	      Custom Color(0, 23, 100, 255), 
			      Custom String("•♥• Cuddle Buddy •♥•"),
			      Custom String("{0} ♥ Perfection is Overrated ♥ {0}", Ability Icon String(Hero(Lifeweaver), Button(Ultimate))),
			      Custom String("•♥• Embrace Yourself and Know Strength Without Fear •♥•")
        ),
			Array(Custom String("Kiwizzlee"), 
                  Custom Color(255, 0, 87, 255),
			      Custom String("{0} ♬ Certified Girlboss ♬ {0}", Ability Icon String(Hero(Ashe), Button(Ability 2))),
                  Custom String("{0} ♥ Owl's Big Sis ♥ {0}", Ability Icon String(Hero(Ashe), Button(Primaryfire))),
			      Custom String("{0} ☆ Resident Cosplayer ^v^ ☆ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire)))
        ),
			Array(Custom String("Moe Szyslak"), 
                  Custom Color(161, 176, 236, 255), 
		          Custom String("Moe Szyslak")
		),
			Array(Custom String("Lostshadow"), 
			      Custom String("Rainbow"),
			      Custom String("♡ Gh0stface's little brother ♡"), 
				  Custom String("★ 16 ★"),
                  Custom String("{0} Ｓｅｅｌｅｎｓｏｒｇｅ {0}", Icon String(Moon))
		), 
			Array(Custom String("SpƐdy"), 
			      Custom String("Rainbow"),
			      Custom String("{0} Crazy? I was crazy once {0} ", Icon String(Eye)),
			      Custom String("{0} Locked me in a room, a rubber room {0} ", Icon String(No)),
			      Custom String("{0} A rubber room with rats and rats make me crazy {0} ", Icon String(Skull))
		),
			Array(Custom String("Lünår"), 
			      Custom Color(237, 26, 77, 255),
			      Custom String("{0} Aegis Pyra {1}", Ability Icon String(Hero(Zenyatta), Button(Ability 1)), Ability Icon String(Hero(Zenyatta), Button(Ability 2))), 
			      Custom String("{0} Princess Daisy {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))), 
			      Custom String("{0} Skull Kid {0}", Icon String(Skull))
		),
			Array(Custom String("Eosia"), 
			      Custom Color(204, 0, 255, 255),
			      Custom String("☆Sombra Enjoyer☆"),
			      Custom String("{0} Kir's Dad {0}", Ability Icon String(Hero(Kiriko), Button(Ability 2))),
			      Custom String("★ Heroicoholic ★")
		),
            Array(Custom String("Ređacted"), 
			      Custom String("Rainbow"),
			      Custom String("{0} † ＢＡＤ  ＯＭＥＮ † {0}", Ability Icon String(Hero(Zenyatta), Button(Ability 2))),
			      Custom String("{0}     Unpaid DJ     {0}", Icon String(fire)),
			      Custom String("{0} I miss you. {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire)))
		),
			Array(Custom String("Fære"), 
			      Custom Color(246, 195, 247, 255),
			      Custom String("{0} † Agony's Embrace †  {0}", Ability Icon String(Hero(Widowmaker), Button(Ability 2))),
			      Custom String("{0} † The Siren's Call † {0}", Icon String(Skull)),
			      Custom String("{0} Spirit Blossom {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire)))
		),
			Array(Custom String("Tedz"), 
			      Custom Color(0,255,188, 255),
			      Custom String("☆ Teddy Bear ☆"), 
			      Custom String("{0} Spark Gengu Squad {0}", Ability Icon String(Hero(Genji), Button(Ultimate))),
			      Custom String("♥♡ cutie potato (with rizz) ♡♥")
		),
			Array(Custom String("Brat"), 
			      Custom String("Rainbow"),
			      Custom String("{0} PARTNERS IN CRIME {0}", Icon String(Dizzy)),
			      Custom String("☆ BPD BADDIE ☆"), 
			      Custom String("{0}  Ｃｈａｒｉｓｍａｔｉｃａｌｌｙ    Ｄｅｐｒｅｓｓｅｄ  {0}", Ability Icon String(Hero(Moira), Button(Ability 2)))
		), 
			Array(Custom String("ShellBebop"), 
			      Color(Black), 
			      Custom String("SHELLLLLBEEEEEBOP!!"), 
			      Custom String("Mr. Beast")
		),
			Array(Custom String("TURBOMURO"),
			      Custom Color(255, 255, 255, 255),
			      Custom String("{0}  HIGHSPEED  {0}", Ability Icon String(Hero(Genji), Button(Ability 1))),
			      Custom String("{0}  ARMY OF TWO  {0}", Ability Icon String(Hero(Ramattra), Button(Ability 1)))
		),
			Array(Custom String("DȈŦǾ"), 
			      Custom String("Rainbow"),
			      Custom String("♡ DORITO DITO ♡"), 
			      Custom String("★☆★ ＰＵＭＰＫＩＮ　ＳＰＩＣＥ ★☆★"), 
			      Custom String("⁂ BACONEGGNCHEESE ⁂")
		),
			Array(Custom String("Netbrex"), 
			      Custom Color(255, 220, 151, 255),
			      Custom String("• Hop 500 •"), 
			      Custom String("{0} Daedalus {0}", Ability Icon String(Hero(Mercy), Button(Ability 1))),
			      Custom String("{0} B R E A D I F U L {0}", Icon String(Diamond))
		),
			Array(Custom String("Núgget"), 
			      Custom Color(255, 130, 0, 255),
			      Custom String("• Núgs And Kisses •"), 
			      Custom String("• Eat Núgs Not Drugs •"),
			      Custom String("• Processed Food •")
		),
			Array(Custom String("Slafii"), 
			      Custom Color(46, 26, 71, 255),
			      Custom String("♡ I   M e o w   y o u ♡"), 
			      Custom String("♡F r y ' s   W i f e♡"), 
			      Custom String(" † Slafiiko - Kirikult † ")
		),
			Array(Custom String("ElDiablo"), 
			      Color(Red),
			      Custom String("† Not Your Daddy †"), 
			      Custom String("† E-Girl Baiter †"), 
			      Custom String("† DEVILS DJ †")
		), 
			Array(Custom String("Fenetre"), 
			      Custom Color(0, 0, 0, 255), 
			      Custom String("{0} † Stoned 24/7 † {0}", Ability Icon String(Hero(Ana), Button(Ability 1))),
			      Custom String("♬• DJ •♬"),
			      Custom String("{0} Knock Yourself Out {0}", Ability Icon String(Hero(Sombra), Button(Ultimate)))
		),
			Array(Custom String("Hxneibee"), 
			      Custom Color(84, 1, 1, 255),
			      Custom String("愛"), 
			      Custom String("{0} Yes Kakarot I see it... {0}", Icon String(Exclamation Mark)), 
			      Custom String("{0}  Camel milk hater  {0}", Ability Icon String(Hero(Kiriko), Button(Secondary Fire)))
		),
			Array(Custom String("Ƒìşhy"), 
			      Custom Color(255, 155, 202, 255),
			      Custom String("{0} S•A•M•M•Y {0}", Ability Icon String(Hero(Reaper), Button(Ability 1))), 
			      Custom String("{0} » Achilles « {0}", Ability Icon String(Hero(Orisa), Button(Secondaryfire))),
			      Custom String("{0} • ♬ エーデンス ♡ • {0}", Ability Icon String(Hero(Lúcio), Button(Ultimate)))
		),
            Array(Custom String("TazE"),
			      Color(Purple),
			      Custom String("ヴィ")
		),  
			Array(Custom String("Visual"), 
			      Color(Black),
			      Custom String(" ")
		), 
			Array(Custom String("Nef"),	
			      Custom Color(62, 253, 255, 255),
			      Custom String("{0}  PARTNERS IN CRIME  {0}", Icon String(Dizzy)),
			      Custom String("{0}  ARMY OF TWO  {0}", Ability Icon String(Hero(Ramattra), Button(Ability 1))),
			      Custom String("{0}  ALWAYS EEPY  {0}", Ability Icon String(Hero(Ana), Button(Ability 1)))
		),
			Array(Custom String("lostsektor"), 
			      Custom Color(56, 149, 251, 255),
			      Custom String("• LostSektor •"),
			      Custom String("† The Last Crusader †"),
			      Custom String("{0} I'm Your Shield {0}", Ability Icon String(Hero(Brigitte), Button(Secondaryfire)))
		),
			Array(Custom String("Leestick"), 
			      Custom Color(160, 32, 240, 255),
			      Custom String("{0} vaporlover {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate))), 
			      Custom String("{0} TrashLord {0}", Icon String(Trashcan))
		), 
			Array(Custom String("ThatAspect"), 
			      Color(Purple),
			      Custom String("{0} † The Lich, Last Scholar of Golb † {0}", Ability Icon String(Hero(Cassidy), Button(Ultimate))),
			      Custom String("☆ •  Guardian Of Time  • ☆ "),
			      Custom String("{0}  Revenge Of The Fallen  {1}", Ability Icon String(Hero(Reaper), Button(Ability 2)), Ability Icon String(Hero(Ramattra), Button(Ability 2)))
		), 
			Array(Custom String("현대적인쌍봉낙타"), 
			      Custom Color(243, 214, 223, 255),
			      Custom String("(ㅇㅅㅇ)"),
			      Custom String("{0}  Let's Play: Hard To Read  {0}", Icon String(Exclamation Mark)),
			      Custom String("♥ 자기 ♥")
		),
			Array(Custom String("Dubbie7"), 
			      Custom String("Rainbow"),
			      Custom String("{0} ☆  D u b s t a r  ☆ {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))),
			      Custom String("{0} Ｂａｒｋ ｆｏｒ Ｒｏｂｕｘ {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate))),
			      Custom String("{0}  Im a mekanik  {0}", Ability Icon String(Hero(Torbjörn), Button(Ability 2)))
		), 
			Array(Custom String("Zxtyi"), 
			      Color(Black),
			      Custom String("{0} Looking for a Kiriko Main {0}", Ability Icon String(Hero(Genji), Button(Jump))), 
			      Custom String("{0} Kiriko Simp {0}", Ability Icon String(Hero(Kiriko), Button(Secondaryfire))), 
			      Custom String("{0} 乙乂ㄒㄚｉ {0}", Ability Icon String(Hero(Illari), Button(Ultimate)))
		),
			Array(Custom String("Żmij"), 
			      Custom Color(128, 0, 0, 255),
			      Custom String("♥ Arieboo's personal bodyguard ♥"),
			      Custom String("† Darth Maul Simp †"),
			      Custom String("{0}   † Fear is my Ally †  {0} ",  Ability Icon String(Hero(Reaper), Button(Ability 1)))
		),
			Array(Custom String("NotForYou"), 
			      Custom Color(222, 159, 269, 255),
			      Custom String("{0} Fear's Certified Ankle Biter  {0}", Icon String(Warning)), 
			      Custom String("{0} ♥Smol Kiriko Lover♥ {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))),
			      Custom String("{0} Time for some moogle magic. Kupo! {0}", Ability Icon String(Hero(Ana), Button(Ability 1)))
		),
			Array(Custom String("jupiter"), 
			      Custom Color(255, 153, 179, 255),
			      Custom String("{0} ♡ frostie ♡ {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))), 
			      Custom String("⁂ Jupiter ⁂"),
			      Custom String("♡ • Deja Vu • ♡")
		), 
			Array(Custom String("かなかけ"), 
			      Custom String("Rainbow"),
			      Custom String("{0} ♡ orisa my beloved ♡ {0}", Ability Icon String(Hero(Mercy), Button(Ultimate))), 
			      Custom String("{0} おっさん {0}", Ability Icon String(Hero(Mercy), Button(Ultimate)))
		),
			Array(Custom String("fenmorre"), 
			      Custom Color(255, 39, 12, 255),
			      Custom String("{0} ♡ Silly Little Donut ♡ {0}", Ability Icon String(Hero(Mercy), Button(Ultimate))), 
			      Custom String("{0}  Alexithymic Heart {0} ", Ability Icon String(Hero(Widowmaker), Button(Ability 2))), 
			      Custom String("{0} Chronically Ill Artist, Writer & Hater {0}", Ability Icon String(Hero(Reaper), Button(Ultimate)))
		),
			Array(Custom String("yohan"),
			      Custom Color(153, 230, 153, 255), 
			      Custom String("{0} 'phil'ipino {0}", Ability Icon String(Hero(Illari), Button(Ultimate))),
			      Custom String("{0} bravo six lover {0}", Icon String(Dizzy)),
			      Custom String("{0}  ｙｏｌｕｌｕ  {0}", Ability Icon String(Hero(Hanzo), Button(Ability 1)))
		),
			Array(Custom String("PŏŏkiƐ"),
			      Custom Color(255, 136, 92, 255), 
			      Custom String("{0} ♥ amorzinho ♥ {0}", Ability Icon String(Hero(Lúcio), Button(Ultimate))), 
			      Custom String("{0} . ˚ · (ㅅ´ ˘ `) · ˚ . {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))), 
			      Custom String("{0} Yours Truly {0}", Ability Icon String(Hero(Hanzo), Button(Primaryfire)))
		),
			Array(Custom String("AMATERASU"), 
			      Custom String("Rainbow"),
			      Custom String("{0} ☆ 天照大御神 ☆ {0}", Ability Icon String(Hero(Kiriko), Button(Secondary Fire))), 
			      Custom String("{0} ☆ P S Y C H O ☆ {0}", Ability Icon String(Hero(Cassidy), Button(Ultimate))),
			      Custom String("{0}    ＤＩＶＩＮＩＴＹ    {0}", Icon String(Moon))
		),
			Array(Custom String("Yeraei"), 
			      Custom String("Rainbow"),
			      Custom String(" ☆ skogaholmslimpa enjoyer ☆ "), 
			      Custom String("{0} ♥ PERSONAL PIKACHU ♥ {0}", Ability Icon String(Hero(D.Va), Button(Ultimate))), 
			      Custom String("♣ Antrozous pallidus ♣")
		),
			Array(Custom String("Ðårk"), 
			      Color(Black),
			      Custom String("★ Stormlight consumer ★"), 
			      Custom String("{0} true schizo {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate))), 
			      Custom String("† ₲59 †")
		),
			Array(Custom String("MissImmortal"), 
			      Color(Red),
			      Custom String("{0} Ｅｎｄｌｅｓｓ　　Ｌｉｆｅ {0}", Ability Icon String(Hero(Kiriko), Button(Secondaryfire))),
			      Custom String("{0} Sith Master Immortal {0}", Ability Icon String(Hero(Genji), Button(ULtimate))), 
			      Custom String("{0} Sigma's Starlight {0}", Ability Icon String(Hero(Sigma), Button(Ultimate)))
		), 
			Array(Custom String("Bendude1000"), 
			      Custom Color(195, 177, 225, 255),
			      Custom String(" R A T ")
		),
			Array(Custom String("Triin1ty"), 
			      Color(White),
			      Custom String("♡ we're going out in style, babe ♡"), 
			      Custom String("little sh%t")
		),
			Array(Custom String("Lannaanna"), 
			      Custom String("Rainbow"), 
			      Custom String("{0}  WORST DVA PLAYER  {0}", Ability Icon String(Hero(D.Va), Button(Ultimate))),
			      Custom String("{0} HOT CHOCOLATE LOVER {0}", Ability Icon String(Hero(Mercy), Button(Ability 1))),
			      Custom String("{0}  PINK MERCY SIMP  {0}", Ability Icon String(Hero(Mercy), Button(Ultimate)))
		),
			Array(Custom String("RiwaChan"),
			      Custom String("Rainbow"),
			      Custom String("♥ RIWA ♥ "), 
			      Custom String("{0}  • フェニックス •  {0}", Ability Icon String(Hero(Mercy), Button(Ultimate))),
				  Custom String("☆ DUUUTCH LOVER FR UWU H•N BESTIES ☆")
		),
			Array(Custom String("ImmaPenguin"), 
			      Custom Color(3, 4, 174, 255),
			      Custom String("Pengu"),
			      Custom String("{0} What's your favorite animal? {1}", Ability Icon String(Hero(D.va), Button(Ultimate)), Ability Icon String(Hero(Kiriko), Button(Ultimate)))
		),
			Array(Custom String("LightMist"), 
			      Custom Color(102, 178, 178, 255),
			      Custom String("{0} ♡ Clumsy Little Waffle ♡ {0}", Icon String(Halo)),
			      Custom String("{0} Lifeweaver connoisseur {0}", Ability Icon String(Hero(Lifeweaver), Button(Primary Fire))),
			      Custom String("{0} ♡ Jazz groover ♡ {0}", Ability Icon String(Hero(Lúcio), Button(Ability 2)))
		),
			Array(Custom String("gh0stface"), 
			      Custom String("Rainbow"),
			      Custom String("♡ Lostshadow's big sister ♡"),
			      Custom String("{0} Ｍｅｏｗ ｆｏｒ Ｎｉｔｒｏ {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate))),
			      Custom String("{0} Viki's Bestie {0}", Ability Icon String(Hero(Genji), Button(Ultimate)))
		),
			Array(Custom String("PumpkinJinx"), 
			      Custom Color(237, 27, 12, 255),
			      Custom String("{0} - ☆ Seeing you powerless is like music to me ☆ - {0}", Icon String(Eye)),
			      Custom String("{0} ★ - Love me, hate me... Either way I'm on your mind ! - ★ {0}", Icon String(Poison)),
			      Custom String("{0} - ☆ Van Hellsing's devil ☆ - {1}", Ability Icon String(Hero(Cassidy), Button(Ultimate)), Ability Icon String(Hero(Junkrat), Button(Ultimate)))
		),
			Array(Custom String("NightShield"), 
			      Custom Color(146, 186, 244, 255),
			      Custom String("{0} Go Push a rock up a hill {0}", Ability Icon String(Hero(Sigma), Button(Ability 2))),
			      Custom String("{0} Kirikult - Niriko {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))),
				  Custom String("♥︎ {0} K I T S U N E {0} ♥︎", Ability Icon String(Hero(Kiriko), Button(Ultimate)))
		),
			Array(Custom String("KinkiTurtle"), 
			      Custom Color(255, 209, 209, 255),
			      Custom String("{0} 我爱你 {0}", Ability Icon String(Hero(Genji), Button(Ultimate))),
			      Custom String("{0} Kirikult - kinkiko {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))),
				  Custom String("♥ ΛᄂΣX IƧ Λ BЯΣΛD ♥")
		),
			Array(Custom String("mksvault"), 
			      Custom Color(244, 187, 68, 255),
			      Custom String("{0} ♥ koibito ♥ {0}", Ability Icon String(Hero(Hanzo), Button(Ultimate))),
			      Custom String("{0} ⁂ moe: 76 lover ⁂ {0}", Ability Icon String(Hero(Soldier: 76), Button(Ultimate))),
			      Custom String("{0} ★ friendly neighborhood lucio ★ {0}", Ability Icon String(Hero(Lúcio), Button(Ultimate)))
		),
			Array(Custom String("ByeFever"), 
			      Custom Color(249, 236, 136, 255),
			      Custom String("Ｐｏｔｉｏｎ   ｔｈａｔ   ｔａｓｔｅｓ   ｌｉｋｅ   ｓｕｎｒｉｓｅ", Ability Icon String(Hero(Illari), Button(Ultimate))),
			      Custom String("♡ Ｐａｎｄａｒｉｋｏ ♡")
		),
			Array(Custom String("Gerry"), 
			      Custom Color(255, 153, 255, 255),
			      Custom String("♡GHOSTFACE'S BBG♡"),
			      Custom String("♬LOCAL GERRY ＼(^￢^)／♬")
		),
			Array(Custom String("Adiidas"), 
			      Custom Color(80, 8, 61, 255),
			      Custom String("{0} ȂBÛ$ȄR & ȂBÛŠȄD {0}", Icon String(Moon)),
			      Custom String("{0} † ♡ Viki is a liar and blind, I sleep 24/7 ♡ † {0}", Ability Icon String(Hero(Kiriko), Button(Ability 2))),
			      Custom String("{0} Nike {0}", Icon String(Checkmark))
		),
			Array(Custom String("Alex"), 
			      Custom Color(0, 0, 128, 255),
				  Custom String(" ")
		),
			Array(Custom String("HOÑEYBEE"),
			      Custom Color(65, 25, 117, 255), 
			      Custom String("•♥• Cuddle Bug •♥•"), 
			      Custom String("•♥• Smooth Brain Go Brrrr •♥•"),
			      Custom String("•♥• Sleepy 24/7 •♥•")
		),
			Array(Custom String("ЈФҜЁЯ"),
			      Custom String("Rainbow"),
			      Custom String("{0} ☆ おばけ ☆ {0}", Ability Icon String(Hero(Genji), Button(Ultimate))),
			      Custom String("{0} ☆ P S Y C H O ☆ {0}", Ability Icon String(Hero(Cassidy), Button(Ultimate))),
			      Custom String("{0}    ＥＴＥＲＮＩＴＹ    {0}", Icon String(Moon))
		),
			Array(Custom String("SapphicWitch"),
			      Custom Color(204, 153, 255, 255),
			      Custom String("♡ {0} Local server mom friend {0} ♡", Ability Icon String(Hero(Mercy), Button(Ability 1))),
			      Custom String("♡ Bayonetta simp ♡"),
			      Custom String("{0} Moicy on top {1}", Ability Icon String(Hero(Mercy), Button(Ultimate)), Ability Icon String (Hero(Moira), Button(Ultimate)))
		),
			Array(Custom String("VĬƗŌĿĖŦ"),
			      Custom Color(242, 165, 184, 255),
			      Custom String("{0} ♡ ｋｉｌｌｅｒ ｑｕｅｅｎ ♡ {0}", Ability Icon String(Hero(Mercy), Button(Jump))),
			      Custom String("{0}♡ ＢＭＯ ａｌｗａｙｓ ｂｏｕｎｃｅｓ ｂａｃｋ ♡{0}", Ability Icon String(Hero(Mercy), Button(Ability 2))),
			      Custom String("{0}♡ ｎｏｔｈｉｎｇ ｌａｓｔｓ ｆｏｒｅｖｅｒ♡{0}", Ability Icon String(Hero(Kiriko), Button(Ultimate)))
		),
			Array(Custom String("Fragoso"),
			      Custom Color(166, 13, 166, 255),
			      Custom String("{0} F•R•A•G•G•Y {0}", Ability Icon String(Hero(Reaper), Button(Ability 1))),
			      Custom String("{0} ICARUS {0}", Ability Icon String(Hero(Mercy), Button(Ability 1))),
			      Custom String("{0} ― ♠ ― GШYNBLΣIDD ― ♠ ― {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate)))
		),
			Array(Custom String("MrCleanerrrr"),
			      Custom Color(242, 242, 242, 255),
			      Custom String("{0} † Viki † {0}", Ability Icon String(Hero(Hanzo), Button(Ultimate))),
			      Custom String("{0} † ♡ Adi abuses me 24/7, and she's a dummy ♡ † {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate))),
			      Custom String("{0} Maria's Bestie {0}", Ability Icon String(Hero(Reinhardt), Button(Ultimate)))
		),
			Array(Custom String("MrMidnight"),
			      Custom Color(199, 21, 133, 255),
			      Custom String("{0} Cat Maid {0}", Icon String(Heart)),
			      Custom String("{0} Babysitter {0}", Ability Icon String(Hero(Ana), Button(Ability 1))),
			      Custom String("{0} Resident Evil {1}", Ability Icon String(Hero(Genji), Button(Secondary Fire)), Ability Icon String(Hero(Reaper), Button(Ultimate)))
		),
			Array(Custom String("Arlecchino"),
			      Custom Color(0, 234, 234, 255),
			      Custom String("♥ Arlecchino ♥"),
			      Custom String("♥ {0} Hampter {0} ♥", Hero Icon String(Hero(Wrecking Ball))),
				  Custom String("{0} Öcêåñ WõrlÐ Äqõpïlå õf †hê Jårµõlå §¥§†êm {0}", Ability Icon String(Hero(Illari), Button(Ultimate)))
		),
		    Array(Custom String("Juuzo"),
			      Custom Color(243, 214, 223, 255),
			      Custom String("ㅎㅅㅎ"),
			      Custom String("{0} 쥬죠 {0}", Ability Icon String(Hero(Genji), Button(Primaryfire))),
			      Custom String("♥ 여보 ♥")
		),
		    Array(Custom String("Fearlxss"),
			      Custom String("Rainbow"),
			      Custom String("{0} Kιяιкσ мч вεlσνεd {0}", Ability Icon String(Hero(Kiriko), Button(Ability 2))),
			      Custom String("{0} Ɲσтнιηg ιѕ тяυє, єνєяутнιηg ιѕ ρєямιттє∂ {0}", Ability Icon String(Hero(Kiriko), Button(Secondaryfire))),
			      Custom String("{0} Hεrσ σf Τhε Lιghτ {0}", Icon String(Halo))
		),
		    Array(Custom String("Stalker"),
			      Custom Color(153, 0, 0, 255),
			      Custom String("{0} Luigi {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))),
			      Custom String("{0} Keaton mask {0}", Icon String(Skull)),
			      Custom String("{0} † Hier Kommt Die Sonne. † {0}", Ability Icon String(Hero(Illari), Button(Ultimate)))
		),
		    Array(Custom String("ǃSHAY"),
			      Custom Color(204, 0, 0, 255),
			      Custom String("† B A N K A I †")
		),
		    Array(Custom String("MOOOUSH"),
			      Color(Black),
			      Custom String("{0} † 乂 乂 乂 † {0}", Icon String(Moon))
		),
		    Array(Custom String("Mirage"),
			      Custom Color(34, 139, 34, 255),
			      Custom String("• Bamboozled ツ •"),
			      Custom String("{0}  The Calm Before the Storm  {0}", Ability Icon String(Hero(Junker Queen), Button(Ultimate))),
				  Custom String("{0} • U N D E F E A T A B L E • {0}", Ability Icon String(Hero(Ramattra), Button(Ultimate)))
		),
		    Array(Custom String("chii"),
			      Custom Color(229, 242, 255, 255),
			      Custom String("{0} b r e a k c o r e  - ♡ - c н σ в ı т ƨ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))),
			      Custom String("{0} ♡ ωнιтє кιтту - M E O W ♡ {0}", Ability Icon String(Hero(D.Va), Button(Ultimate))),
			      Custom String("{0} ♬  c н ι ι   ♡   м y  н ι d e ĸ ι  ♬ {0}", Ability Icon String(Hero(Mei), Button(Ability 1)))
		),
		    Array(Custom String("Bluroisa"),
			      Custom Color(255, 164, 220, 255),
			      Custom String("♡Gimpy Lover♡"),
			      Custom String("{0} Happy Mercy {0}", Icon String(Happy)),
			      Custom String("{0} Bluroisa {0}", Ability Icon String(Hero(Mercy), Button(Ultimate)))
		),
		    Array(Custom String("Hestia"), 
			      Custom Color(193, 59, 120, 255),
			      Custom String("♣ Ｍｕｓｔｉ＇ｓ  Ｍｏｔｈｅｒ ♣"), 
			      Custom String("⁂Ｓｕｎｌｉｇｈｔ⁂"), 
			      Custom String("{0} ♡ Beast Creator ♡ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire)))
		),
		    Array(Custom String("emilie"), 
			      Custom Color(193, 59, 120, 255),
			      Custom String("⁂ Ｍｏｏｎｌｉｇｈｔ⁂"), 
			      Custom String("†Huntress With Gun†")
		),
		    Array(Custom String("godly"),
			      Custom Color(89, 5, 5, 255),
			      Custom String("{0} ＢＡＳＥＤ {0}", Ability Icon String(Hero(Reaper), Button(Ultimate))),
			      Custom String("{0} 敬虔的 {0}", Ability Icon String(Hero(Reaper), Button(Ability 1))),
			      Custom String("{0} looking for female reaper main {0}", Ability Icon String(Hero(Kiriko), Button(Ability 2)))
		),
		    Array(Custom String("BȂKƐDBȔŊŊYǃ"),
			      Custom Color(254, 171, 230, 255),
			      Custom String("• ★ Sei Una Meraviglia ☆ •"),
			      Custom String("{0} CΗΣRRY BLΘSSΘM SQƱΔD™ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))),
			      Custom String("♡ {0} T O K K I {0} ♡", Ability Icon String(Hero(D.Va), Button(Ultimate)))
		),
		    Array(Custom String("Smiley"),
			      Custom String("Rainbow"),
			      Custom String("{0} ∂ση'т мαкє мє ƒяσωηу {0}", Icon String(Sad)),
			      Custom String("{0} CΗΣRRY BLΘSSΘM SQƱΔD™ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))),
			      Custom String("♥ мч ģάŕģĻέ∂ ĻίţţĻέ мίς ήόίşέş ♥")
		),
		    Array(Custom String("zovha"),
			      Custom Color(72, 61, 139, 255),
			      Custom String("♠ Dαмє ﾒ Cнαη¢є ♣️"),
			      Custom String("{0} Widow Simp {0}", Ability Icon String(Hero(Junkrat), Button(Ability 1))),
			      Custom String("† looking for mercy main †")
		),		  
		    Array(Custom String("Kuwai"),
			      Custom Color(255, 44, 97, 255),
			      Custom String("{0} 『 LOCAL E-COWGIRL™ 』{0}", Ability Icon String(Hero(Ashe), Button(Ultimate))),
			      Custom String("{0} CΗΣRRY BLΘSSΘM SQƱΔD™ {0}", Ability Icon String(Hero(Lifeweaver), Button(Primaryfire))),
			      Custom String("{0} ― Queen of the Yeehaws ― {0}", Ability Icon String(Hero(Illari), Button(Ultimate)))		  
		),
		    Array(Custom String("pancakes"),
			      Custom Color(96, 50, 156, 255),
			      Custom String("{0} heat + bread + time = toast {0}", Ability Icon String(Hero(Illari), Button(Ultimate))),
			      Custom String("•♥• Smooth Brain Go Brrrr 2.0 •♥•"),
			      Custom String("♥ мч ģάŕģĻέ∂ ĻίţţĻέ мίς ήόίşέş ♥")	
		),
		    Array(Custom String("Viktorski"),
			      Color(Yellow),
			      Custom String("Viktorski")
		),
		    Array(Custom String("BStray"), 
                  Custom Color(255, 204, 204, 255), 
                  Custom String("{0} † Kirikult Leader † {0}", Ability Icon String(Hero(Kiriko), Button(Ultimate))), 
                  Custom String("☆ Goldfish ☆"),
                  Custom String("⁂ Spins for Headpats ⁂")
        ),
		    Array(Custom String("PapaRomeo"), 
                  Custom Color(128, 0, 128, 255),
                  Custom String("{0} The Saint {0}", Icon String(Halo)),
                  Custom String("{0} Spark Gengu Squad {0}", Ability Icon String(Hero(Genji), Button(Ultimate)))
        )
		);
	}
}

rule("Search for players in custom nameplates list and call subroutines")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Has Spawned(Event Player) == True;
		Event Player.Is_Invisible == False;
	}

	actions
	{
        For Player Variable(Event Player, Players_Global_Array, 0, Count Of(Global.Titles_And_Outlines), 1);
			If(Custom String("{0}", Event Player) == Global.Titles_And_Outlines[Event Player.Players_Global_Array][0]); 
				If(Global.Titles_And_Outlines[Event Player.Players_Global_Array][1] == Custom String("Fading"));
					Event Player.Player_Title_And_Outline = Array(
						Global.Titles_And_Outlines[Event Player.Players_Global_Array][0],
						Global.Titles_And_Outlines[Event Player.Players_Global_Array][1],
						Array Slice(Global.Titles_And_Outlines[Event Player.Players_Global_Array], 2, 3),
						Array Slice(Global.Titles_And_Outlines[Event Player.Players_Global_Array], 5, 3),
						Array Slice(
							Global.Titles_And_Outlines[Event Player.Players_Global_Array], 8, Count Of(Global.Titles_And_Outlines[Event Player.Players_Global_Array])));
				Else;
					Event Player.Player_Title_And_Outline = Array(
						Global.Titles_And_Outlines[Event Player.Players_Global_Array][0], 
						Global.Titles_And_Outlines[Event Player.Players_Global_Array][1],
						Array Slice(
							Global.Titles_And_Outlines[Event Player.Players_Global_Array], 2, Count Of(Global.Titles_And_Outlines[Event Player.Players_Global_Array])));
				End;
				Start Rule(Give_Custom_Nameplate, Do Nothing);
				Start Rule(Give_Custom_Outline, Do Nothing);
				Event Player.Is_Title_Given = True;
				Abort;
			End;
			Wait(0.020, Ignore Condition);
		End;
	}
}

rule ("Subroutine: Give_Custom_Nameplate")
{
    event 
	{
		Subroutine;
		Give_Custom_Nameplate;
    }

    actions 
	{	
		Abort If Condition Is False;
		Disable Nameplates(Event Player, All Players(All Teams));
		If(Event Player.Player_Title_And_Outline[1] == Custom String("Rainbow"));
			Destroy In-World Text(Event Player.Player_Nameplates);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), 
				Event Player.Player_Title_And_Outline[2][Modulo(Round To Integer(Total Time Elapsed / 30, Down), Count Of(Event Player.Player_Title_And_Outline[2]))], 
				Event Player, 0.98, Clip Against Surfaces, Visible To Position and Color, Global.Rainbow_Color, Visible Never);

		Else If(Event Player.Player_Title_And_Outline[1] == Custom String("Fading"));
			Destroy In-World Text(Event Player.Player_Nameplates);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), 
				Event Player.Player_Title_And_Outline[4][Round To Integer(Global.Main_Chaser / 6, Down) % Count Of(
				Event Player.Player_Title_And_Outline[4])], Event Player, 0.980, Clip Against Surfaces, Visible To Position and Color,
				Custom Color(
					Round To Integer((Event Player.Player_Title_And_Outline[2][0] + Event Player.Player_Title_And_Outline[3][0]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][0] - Event Player.Player_Title_And_Outline[3][0]) / 2), Down), 
					Round To Integer((Event Player.Player_Title_And_Outline[2][1] + Event Player.Player_Title_And_Outline[3][1]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][1] - Event Player.Player_Title_And_Outline[3][1]) / 2), Down),
					Round To Integer((Event Player.Player_Title_And_Outline[2][2] + Event Player.Player_Title_And_Outline[3][2]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][2] - Event Player.Player_Title_And_Outline[3][2]) / 2), Down), 
					255), 
				Visible Never);

		Else;
			Destroy In-World Text(Event Player.Player_Nameplates);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), 
				Event Player.Player_Title_And_Outline[2][Round To Integer(Total Time Elapsed / 30, Down) % Count Of(
				Event Player.Player_Title_And_Outline[2])], Event Player, 0.98, Clip Against Surfaces, Visible To and Position,
				Event Player.Player_Title_And_Outline[1], Visible Never);
		End;
		Event Player.Player_Nameplates = Last Text Id;
		Wait(30, Abort When False);
		Loop;
    }
}

rule ("Subroutine: Give_Custom_Outline")
{
    event 
	{
		Subroutine;
		Give_Custom_Outline;
    }

    actions 
	{
		Abort If Condition Is False;
		Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Not(Current Array Element.Outlines_Toggle)), False, Color(White), Always);
		If(Event Player.Player_Title_And_Outline[1] == Custom String("Rainbow"));
			Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True, Global.Rainbow_Color, Always);
			Wait(0.2, Ignore Condition);
			Loop;
		End;
		If(Event Player.Player_Title_And_Outline[1] == Custom String("Fading"));
			Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True, 
				Custom Color(
					Round To Integer((Event Player.Player_Title_And_Outline[2][0] + Event Player.Player_Title_And_Outline[3][0]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][0] - Event Player.Player_Title_And_Outline[3][0]) / 2), Down), 
					Round To Integer((Event Player.Player_Title_And_Outline[2][1] + Event Player.Player_Title_And_Outline[3][1]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][1] - Event Player.Player_Title_And_Outline[3][1]) / 2), Down),
					Round To Integer((Event Player.Player_Title_And_Outline[2][2] + Event Player.Player_Title_And_Outline[3][2]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][2] - Event Player.Player_Title_And_Outline[3][2]) / 2), Down), 
					255), Always);
			Wait(0.2, Ignore Condition);
			Loop;
		Else;
			Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True, Event Player.Player_Title_And_Outline[1], Always);
			Wait(5, Ignore Condition);
			Loop;
		End;
    }
}

rule("Re-evaluate nameplates (name covers title hardcode fix)")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Is_Title_Given || Event Player.Regular_Player_Has_Title) == True;
		Has Spawned(Event Player) == True;
		Event Player.Is_Invisible == False;
	}

	actions
	{
		Disable Nameplates(Event Player, All Players(All Teams));
		Wait(30, Abort When False);
		Loop If Condition Is True;
	}
}

rule("Listed_Player")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		"Automatic High Rank"
		Global.High_Rank = Array(Custom String("Moe Szyslak"), Custom String("Cattanklol"));
			
		"Automatic Mod"
		Global.Mod_Rank = Array(
			Custom String("Warloy"), Custom String("kwally"), Custom String("xMaxuss"), Custom String("xskĳ"), Custom String("Toguro"),
			Custom String("MOOOUSH"), Custom String("wheyfuwu"), Custom String("Xenolysith"), Custom String("Leestick"), Custom String("Nutzee"),
			Custom String("Metalgy"), Custom String("PapaRomeo"), Custom String("Brat"), Custom String("xCleo"), Custom String("AndrewKnoll"),
			Custom String("ShellBebop"), Custom String("Dubbie7"), Custom String("MissImmortal"), Custom String("Zxtyi"), Custom String("Bendude1000"),
			Custom String("Lostshadow"), Custom String("Reapersimp"), Custom String("Dead"), Custom String("HYUA"), Custom String("Ashe62"),
			Custom String("ElDiablo"), Custom String("Żmij"), Custom String("FaLLz"), Custom String("DONUT"), Custom String("Slafii"),
			Custom String("ǀƑIREǀ"), Custom String("TEAMEPǃC"), Custom String("kosmos"), Custom String("Alex"), Custom String("Kiwizzlee"),
			Custom String("BStray"), Custom String("tsunde"), Custom String("Lünår"), Custom String("AvatarGod"), Custom String("ThatAspect"),
			Custom String("DȈŦǾ"), Custom String("GhostPunch"), Custom String("Akaza"), Custom String("Ghøst"), Custom String("TURBOMURO"),
			Custom String("Núgget"), Custom String("lostsektor"), Custom String("Hxneibee"), Custom String("Fenetre"), Custom String("Sinnie"),
			Custom String("TazE"), Custom String("Triin1ty"), Custom String("Lannaanna"), Custom String("Fære"), Custom String(""),
			Custom String("Netbrex"), Custom String("Yeraei"), Custom String("yohan"), Custom String("RiwaChan"), Custom String("현대적인쌍봉낙타"),
			Custom String("jupiter"), Custom String("NotForYou"), Custom String("fenmorre"), Custom String("Eosia"), Custom String("Nef"),
			Custom String("Visual"), Custom String("Hestia"), Custom String("AMATERASU"), Custom String("Tedz"), Custom String("PŏŏkiƐ"),
			Custom String("Ðårk"), Custom String("FactAttend"), Custom String("SpƐdy"), Custom String("Kazuma"), Custom String("Jermuseppo"),
			Custom String("Ređacted"), Custom String("S0undw4v3"), Custom String("LƐafa"), Custom String("WIĿĿOW"), Custom String("mksvault"),
			Custom String("LightMist"), Custom String("KinkiTurtle"), Custom String("Adiidas"), Custom String("gh0stface"), Custom String("ByeFever"),
			Custom String("NightShield"), Custom String("Gerry"), Custom String("whoshotcupid"), Custom String("MISTƔ"), Custom String("Ƒìşhy"),
			Custom String("PumpkinJinx"), Custom String("ImmaPenguin"), Custom String("MrCleanerrrr"), Custom String("MrMidnight"), Custom String("HOÑEYBEE"),
			Custom String("SapphicWitch"), Custom String("VĬƗŌĿĖŦ"), Custom String("Arlecchino"), Custom String("ЈФҜЁЯ"), Custom String("Fragoso"),
			Custom String("Juuzo"), Custom String("Fearlxss"), Custom String("ǃSHAY"), Custom String("Stalker"), Custom String("Eggman"),
			Custom String("Mirage"), Custom String("Bluroisa"), Custom String("chii"), Custom String("Smiley"), Custom String("godly"),
			Custom String("BȂKƐDBȔŊŊYǃ"), Custom String("zovha"), Custom String("pancakes"), Custom String("emilie"), Custom String("LostShadow"),
			Custom String("Viktorski"), Custom String("Kuwai"),  Custom String("Miamor"), Custom String("BlueSky"));
		
		"Warning List"
		Global.Warning_List = Array(
			Custom String("None"));

		"Muted (anyone on this list is muted AND demoted, no need to have them in both lists)"
		Global.Muted_List = Array(
			Custom String("LemonMoose"), Custom String("FlaxKodo"), Custom String("CONTAMINAGOR"), Custom String("MrMorgan"), Custom String("Bleed"), Custom String("TheBluestar"),
			Custom String("JLRazor"), Custom String("Valencia"), Custom String("Evalia"), Custom String("DBDZaza"), Custom String("DeadObiWan"), Custom String("siegrich"), 
			Custom String("TitanJolt"), Custom String("JoltWave"), Custom String("DJBASTIOON"), Custom String("DJBastion"), Custom String("Djbastion"), Custom String("DJBASTION!"),
			Custom String("MrBastion"), Custom String("Dampoegood"), Custom String("Howard"), Custom String("vibe"), Custom String("tomkuo74"), 
			Custom String("wonderland"), Custom String("Ɓack2spawŊ"), Custom String("armoureddiam"), Custom String("DjBeep"), Custom String("Astraeus"), Custom String("SaladGuy"), 
			Custom String("FPSNight"), Custom String("Apotato2182"), Custom String("sherminator"), Custom String("Doom"), Custom String("ImV"), Custom String("dobarčovjek"), 
			Custom String("SpongeBob"));

		"Demoted List"
		Global.Demoted_List = Array(
			Custom String("None"));

		"Automatic Ban"
		Global.Banned_List = Array(
			Custom String("BebeUwU"), Custom String("Fluttershy"), Custom String("SexiestBeast"), Custom String("BigBadBosses"), Custom String("Arthur"), 
			Custom String("MrBalkanom"), Custom String("Partilazac11"), Custom String("Gn0mie"), Custom String("zanji3abd"), Custom String("FlameOwl"), 
			Custom String("ActiveShootr"));
    }
}


rule("Player_Rank_Execute")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Verification_Key == 0;
		Has Spawned(Event Player) == True;
		(Array Contains(Global.High_Rank, Custom String("{0}", Event Player)) || Array Contains(Global.Mod_Rank, Custom String("{0}",
			Event Player))) == True;
	}

	actions
	{
		Wait(0.01, Ignore Condition);
		If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player)));
			Event Player.High_Rank = True;
			Event Player.Verification_Key = 2;
			If(Event Player != Host Player);
				Skip If(Is Dummy Bot(Event Player), 1);
				Call Subroutine(Hud_Elements);
			End;
		Else If(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player)));
			Event Player.Mod_Rank = True;
			Event Player.Verification_Key = 1;
			If(Event Player != Host Player);
				Skip If(Not(Event Player.Promoted_Rank) || Event Player.Restricted[0], 1);
				Big Message(All Players(All Teams), Custom String("{0} got promoted!", Event Player));
				Call Subroutine(Hud_Elements);
			End;
		End;
		If(Array Contains(Global.Promoted_List, Custom String("{0}", Event Player)));
			Event Player.Promoted_Rank = True;
		End;
		If(Event Player.Heaven_Strike_ID[3]);
			Event Player.Verification_Key = 3;
		End;
		Event Player.Is_Menu_Active = True;
		If(Event Player.Is_Flying);
			Event Player.Is_Flying = False;
			Set Gravity(Event Player, Event Player.Player_Modification[3]);
		End;
		Event Player.Player_Modification[0] = 100;
		Set Damage Dealt(Event Player, Event Player.Player_Modification[0]);

		Event Player.Mode_Cycle = 0;
		Event Player.Mode_Cycle_Default = -1;
		Event Player.Modification_Mode_Selector = 0;

		Destroy HUD Text(Event Player.Mode_Description);
		Destroy HUD Text(Event Player.Mode_Hud_ID);

		Event Player.Mode_Headline = Custom String("Info Page");
		Create HUD Text(Event Player, Event Player.Mode_Cycle, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
			Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
			Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
		Event Player.Mode_Hud_ID = Last Text ID;

		If(Event Player.Promoted_Rank || Not(Event Player.High_Rank || Event Player.Mod_Rank));
			Call Subroutine(Info_Page_Default);
		Else;
			Call Subroutine(Info_Page_Mod);
		End;
	}
}

rule ("Set Host Player Rights")
{
    event 
	{
		Ongoing - Each Player;
		All;
		All;
    }
	
	conditions
	{
		Event Player == Host Player;
	}

    actions 
	{
		Abort If(Array Contains(Global.Banned_List, Custom String("{0}", Event Player)) || Array Contains(Global.Temp_Banned, Custom String("{0}",Event Player)));
		If(Not(Array Contains(Global.High_Rank, Custom String("{0}", Event Player)) || Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player))));
			Skip If(Array Contains(Global.Demoted_List, Custom String("{0}", Event Player)) || Array Contains(Global.Muted_List, Custom String("{0}", Event Player)), 3);
			Modify Global Variable(Mod_Rank, Append To Array, Custom String("{0}", Host Player));
			Modify Global Variable(Promoted_List, Append To Array, Custom String("{0}", Host Player));
			Event Player.Promoted_Rank = True;
		End;
		Destroy HUD Text(Event Player.Mod_Name_ID[0]);
		Skip If(Global.Current_Host == Null || Array Contains(Global.Demoted_List, Custom String("{0}", Global.Current_Host)) || 
			Array Contains(Global.Muted_List, Custom String("{0}", Global.Current_Host)), 2);
		Global.Current_Host.Mod_Name_ID[1] = True;
		Wait(0.01, Ignore Condition);
		Global.Current_Host = Event Player;
    }
}

rule ("Manage Host Swap Display")
{
    event 
	{
		Ongoing - Each Player;
		All;
		All;
    }
	
	conditions
	{
		Event Player.Mod_Name_ID[1] == True;
	}

    actions 
	{
		Call Subroutine(Hud_Elements);
		Event Player.Mod_Name_ID[1] = False;
    }
}

rule("Player_Rank_Revoke")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.High_Rank == False;
		Event Player.Mod_Rank == True;
		Event Player.Verification_Key == 1;
		Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player)) == False;
	}

	actions
	{
		Big Message(All Players(All Teams), Custom String("{0} got demoted!", Event Player));
		Event Player.Mod_Rank = False;
		Event Player.Verification_Key = 0;

		Event Player.Is_Menu_Active = True;
		Event Player.Mode_Cycle = -1;
		Event Player.Mode_Cycle_Default = 0;
		If(Event Player.Is_Flying);
			Event Player.Is_Flying = False;
			Set Gravity(Event Player, Event Player.Player_Modification[3]);
		End;
		Event Player.Modification_Mode_Selector = 1;
		Event Player.Player_Modification[0] = 100;
		Set Damage Dealt(Event Player, Event Player.Player_Modification[0]);

		Destroy HUD Text(Event Player.Mode_Description);
		Destroy HUD Text(Event Player.Mode_Hud_ID);

		Event Player.Mode_Headline = Custom String("Info Page");
		Create HUD Text(Event Player, Event Player.Mode_Cycle_Default, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
			Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
			Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
		Event Player.Mode_Hud_ID = Last Text ID;

		Call Subroutine(Info_Page_Default);
		Destroy HUD Text(Event Player.Mod_Name_ID[0]);
	}
}

rule("Show_And_Hide_Menu")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 0 || Event Player.Mode_Cycle_Default == 0) == True;
		(Is Button Held(Event Player, Button(Crouch)) && Is Button Held(Event Player, Button(Melee)))== True;
		Event Player.UNO_Ingame == False;
		Array Contains(Global.UNO_Players, Event Player) == False;
	}

	actions
	{
		Wait(0.75, Abort When False);
		"Menu toggle"
		If(Event Player.Is_Menu_Active);
			Event Player.Is_Menu_Active = False;
			Destroy HUD Text(Event Player.Mode_Description);
			Destroy HUD Text(Event Player.Mode_Hud_ID);
			Destroy Progress Bar HUD Text(Event Player.Scale_Hud_ID);
			Small Message(Event Player, Custom String(" Menu OFF {0}", Icon String(X)));
			Destroy Effect(Event Player.Target_Effect);
			Event Player.Target_Effect = Null;
			Destroy Icon(Event Player.Target_Arrow_ID);
			Event Player.Target_Arrow_ID = Null;
			
			If((Event Player.High_Rank || Event Player.Mod_Rank));
				Event Player.Mode_Cycle = 0;
			Else;
				Event Player.Mode_Cycle_Default = 0;
			End;
		Else;
			Small Message(Event Player, Custom String(" Menu ON {0}", Icon String(Plus)));
			Event Player.Is_Menu_Active = True;
			
			Event Player.Mode_Headline = Custom String("Info Page");
			If((Event Player.High_Rank || Event Player.Mod_Rank));
				Event Player.Mode_Cycle = 0;
				Create HUD Text(Event Player, Event Player.Mode_Cycle, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
					Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
					Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
			Else;
				Event Player.Mode_Cycle_Default = 0;
				Create HUD Text(Event Player, Event Player.Mode_Cycle_Default, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
					Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
					Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
			End;
			Event Player.Mode_Hud_ID = Last Text ID;
			If(Event Player.Promoted_Rank || Not(Event Player.High_Rank || Event Player.Mod_Rank));
				Call Subroutine(Info_Page_Default);
			Else;
				Call Subroutine(Info_Page_Mod);
			End;
		End;
	}
}

rule("Hud_Elements (Subroutine)")
{
	event
	{
		Subroutine;
		Hud_Elements;
	}

	actions
	{
		Destroy HUD Text(Event Player.Mod_Name_ID[0]);
		If(Entity Exists(Event Player));
			Skip If(Event Player.Heaven_Strike_ID[2], 2);
			Create HUD Text(All Players(All Teams), Null, Null, Custom String("{0} {1} {2}",
				Hero Icon String(Hero Of(Event Player)), Event Player, If-Then-Else(Event Player.Promoted_Rank, Custom String(""), 
				Global.Rank_Icon[Event Player.Verification_Key])), 
				Right, If-Then-Else(Event Player.Promoted_Rank, -2, (Event Player.Verification_Key + 2) * -1), Null, Null, Color(White), Visible To and String, Default Visibility);
			Event Player.Mod_Name_ID[0] = Last Text ID;
		Else;
			Destroy In-World Text(Event Player.Target_Tag_ID);
			Destroy HUD Text(Event Player.Mod_Name_ID[0]);
			Destroy HUD Text(Event Player.Mode_Hud_ID);
			Destroy HUD Text(Event Player.Mode_Description);
		End;
	}
}

rule("Hero_Switch")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Melee)) == True;
		Has Spawned(Event Player) == True;
		Event Player.Is_Crouch_On == False;
		Event Player.Restricted[0] != True;
		Is Alive(Event Player) == True;
		Has Status(Event Player, Knocked Down) == False;
		Has Status(Event Player, Hacked) == False;
		Has Status(Event Player, Frozen) == False;
		Has Status(Event Player, Burning) == False;
		Has Status(Event Player, Stunned) == False;
		Event Player.Is_Menu_Active == True;
	}

	actions
	{
		Wait(0.500, Abort When False);
		Cancel Primary Action(Event Player);
		Event Player.Last_Position_Facing[0] = Position Of(Event Player);
		Event Player.Last_Position_Facing[1] = Facing Direction Of(Event Player);
		Set Player Allowed Heroes(Event Player, Filtered Array(All Heroes, Current Array Element != Hero Of(Event Player)));
		Wait(0.250, Ignore Condition);
		Set Player Allowed Heroes(Event Player, All Heroes);
		Wait Until(Has Spawned(Event Player) == True, 99999);
		Teleport(Event Player, Event Player.Last_Position_Facing[0]);
		Set Facing(Event Player, Event Player.Last_Position_Facing[1], To World);
		Event Player.Last_Position_Facing[0] = Null;
		Event Player.Last_Position_Facing[1] = Null;
	}
}

rule("Protection_4_Free")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Reload)) == True;
		Has Spawned(Event Player) == True;
		Event Player.Is_Crouch_On == False;
		Event Player.Restricted[0] == False;
		Is Alive(Event Player) == True;
		Has Status(Event Player, Knocked Down) == False;
		Has Status(Event Player, Frozen) == False;
		Has Status(Event Player, Stunned) == False;
	}

	actions
	{
		Wait(0.500, Abort When False);
		If(Event Player.Protection == False);
			Event Player.Protection = True;
		Else If(Event Player.Protection);
			Event Player.Protection = False;
		End;
	}
}

rule("Protection_ON")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Protection == True;
	}

	actions
	{
		Abort If(Has Spawned(Event Player) != True);
		Call Subroutine(Protection);
	}
}

rule("Protection_OFF")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Protection == False;
	}

	actions
	{
		Abort If(Has Spawned(Event Player) != True);
		Call Subroutine(Protection);
	}
}

rule("Mod_Ability_ON")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Crouch)) == True;
		Event Player.Is_Menu_Active == True;
		Event Player.Control_Active == False;
	}

	actions
	{
		Skip If((Event Player.High_Rank || Event Player.Mod_Rank) == False, 4);
		Create Effect(Event Player, Good Aura, Color(Yellow), Player Closest To Reticle(Event Player, All Teams), 1,
			Visible To Position and Radius);
		Event Player.Target_Effect = Last Created Entity;
		Create Icon(Event Player, Player Closest To Reticle(Event Player, All Teams), Arrow: Down, Visible To and Position, Color(White),
			False);
		Event Player.Target_Arrow_ID = Last Created Entity;
		Event Player.Is_Crouch_On = True;
		Disallow Button(Event Player, Button(Primary Fire));
		Disallow Button(Event Player, Button(Secondary Fire));
		Disallow Button(Event Player, Button(Ability 1));
		Disallow Button(Event Player, Button(Ability 2));
		Disallow Button(Event Player, Button(Ultimate));
		Disallow Button(Event Player, Button(Interact));
		Disallow Button(Event Player, Button(Jump));
		Disallow Button(Event Player, Button(Melee));
		Disallow Button(Event Player, Button(Reload));
	}
}

rule("Mod_Ability_OFF")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Is Button Held(Event Player, Button(Crouch)) == False);
		Event Player.Control_Active == False;
	}

	actions
	{
		Destroy Icon(Event Player.Target_Arrow_ID);
		Destroy Effect(Event Player.Target_Effect);
		Event Player.Target_Effect = Null;
		Event Player.Target_Arrow_ID = Null;
		Event Player.Is_Crouch_On = False;
		Allow Button(Event Player, Button(Primary Fire));
		Allow Button(Event Player, Button(Secondary Fire));
		Allow Button(Event Player, Button(Ability 1));
		Allow Button(Event Player, Button(Ability 2));
		Allow Button(Event Player, Button(Ultimate));
		Allow Button(Event Player, Button(Interact));
		Allow Button(Event Player, Button(Jump));
		Allow Button(Event Player, Button(Melee));
		Allow Button(Event Player, Button(Reload));
	}
}

rule("Mode_Cycle")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Is_Crouch_On == True;
		(Is Button Held(Event Player, Button(Interact)) || Is Button Held(Event Player, Button(Jump))) == True;
		Event Player.Is_Menu_Active == True;
		Event Player.Is_Flying == False;
		Event Player.UNO_Ingame == False;
		Event Player.Restricted[1] == False;
		Event Player.Control_Active == False;
	}

	actions
	{	
		If((Event Player.High_Rank || Event Player.Mod_Rank));
			Event Player.Mode_Cycle_Default = -1;
			If(Is Button Held(Event Player, Button(Interact)));
				If(Event Player.Mode_Cycle >= 35);
					Event Player.Mode_Cycle = 0;
				Else;
					Event Player.Mode_Cycle += 1;
				End;
			Else If(Is Button Held(Event Player, Button(Jump)));
				If(Event Player.Mode_Cycle <= 0);
					Event Player.Mode_Cycle = 35;
				Else;
					Event Player.Mode_Cycle -= 1;
				End;
			End;
		Else;
			Event Player.Mode_Cycle = -1;
			If(Is Button Held(Event Player, Button(Interact)));
				If(Event Player.Mode_Cycle_Default >= 17);
					Event Player.Mode_Cycle_Default = 0;
				Else;
					Event Player.Mode_Cycle_Default += 1;
				End;
			Else If(Is Button Held(Event Player, Button(Jump)));
				If(Event Player.Mode_Cycle_Default <= 0);
					Event Player.Mode_Cycle_Default = 17;
				Else;
					Event Player.Mode_Cycle_Default -= 1;
				End;
			End;
		End;
	}
}

rule("Menu_Keys_Signal")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Is_Crouch_On == True;
		Event Player.Is_Menu_Active == True;
		Event Player.Restricted[1] == False;
		
		(Is Button Held(Event Player, Button(Primary Fire)) ||  Is Button Held(Event Player, Button(Secondary Fire)) || Is Button Held(Event Player, Button(Reload)) ||
			Is Button Held(Event Player, Button(Ultimate)) || Is Button Held(Event Player, Button(Ability 1)) || Is Button Held(Event Player, Button(Ability 2)) ||
			Is Button Held(Event Player, Button(Melee))) == True;
	}

	actions
	{
		Event Player.Signal = True;
	}
}


rule("Mode_Headline_Desc_Mod")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.High_Rank || Event Player.Mod_Rank) == True;
		(Is Button Held(Event Player, Button(Interact)) || Is Button Held(Event Player, Button(Jump))) == True;
		Event Player.Mode_Description != Null;
		Event Player.Is_Menu_Active == True;
		Event Player.UNO_Ingame == False;
	}

	actions
	{
		Destroy HUD Text(Event Player.Mode_Description);
		Destroy Progress Bar HUD Text(Event Player.Scale_Hud_ID);
		
		If(Event Player.Mode_Cycle == 0);
			Event Player.Mode_Headline = Custom String("Info Page");
			If(Event Player.Promoted_Rank);
				Call Subroutine(Info_Page_Default);
			Else;
				Call Subroutine(Info_Page_Mod);
			End;

		Else If(Event Player.Mode_Cycle == 1);
			Event Player.Mode_Headline = Custom String("Heal | Kill | Resurrection");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Heal | Resurrect Target\r\n{1} : Kill Target\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Kill | Rez Yourself\r\n{1}", 
					Input Binding String(Button(Ultimate)), 
				Custom String("{0} : Set Auto-Respawn, yourself\r\n{1}", 
					Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Set Auto-Respawn, Non-mod target\r\n\n{0}", 
				Custom String("Current Auto-Respawn Settings: \r\n[You: {0}, Target: {1}]", 
					If-Then-Else(Event Player.Auto_Respawn, Global.OffOnString[1], Global.OffOnString[0]), 
					If-Then-Else(Player Closest To Reticle(Event Player, All Teams).Auto_Respawn, Global.OffOnString[1], Global.OffOnString[0])
				)))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 2);
			Event Player.Mode_Headline = Custom String("Teleport");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}", 
				Custom String("{0} : Teleport You to Target\r\n{1} : Teleport Target To You\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Teleport Target Back To Spawn\r\n{1} : Target Faces you\r\n\r\n{2}", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("Destination Marker for Short Hop is shown\r\n   on this page while crouching.\r\nCrouch + Ability 1 : Short Hop"
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 3);
			Event Player.Mode_Headline = Custom String("Status Effect");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}", 
				Custom String("{0} : Apply Status to Target\r\n{1} : Remove Status from Target\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : Apply/Remove Status: yourself\r\nReload : Quick Cleanse: Yourself\r\n{1}",
					Input Binding String(Button(Ability 2)),
				Custom String("{0} : Cycle Status\r\n\nCurrently Selected Status:\r\n[ {1} ]",
					Input Binding String(Button(Ultimate)), Global.Status_String[Event Player.Status_Selector]
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 4);
			Event Player.Mode_Headline = Custom String("Protection");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give Target Immunity\r\n{1} : Revoke Target Immunity\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : Toggle Full Protection [{1}]",
					Input Binding String(Button(Ultimate)), If-Then-Else(Event Player.Full_Protection, Global.OffOnString[1], Global.OffOnString[0])
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 5);
			Event Player.Mode_Headline = Custom String("Outlines & names");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give Outline To Target\r\n{1} : Choose Color\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Give Outline To Yourself\r\n{1} : Remove Outline from Yourself\r\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("Reload : Remove Outline from Target\r\nMelee : Toggle Outline Visibility [{0}]",
					If-Then-Else(Event Player.Outlines_Toggle, Global.OffOnString[1], Global.OffOnString[0])
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 6);
			Event Player.Mode_Headline = Custom String("Jumppads");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Create Jumppad With Current Settings\r\n{1} : Delete previous Jumppad\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Cycle Color of inner ring\r\nUltimate : Cycle Color of outer ring\r\n{1}",
					Input Binding String(Button(Ability 1)),
				Custom String("{0} : Cycle Jump strength\r\nReload : Cycle Radius\r\n{1}",
					Input Binding String(Button(Ability 2)),  
				Custom String("Melee : Delete All Jumppads\r\n\nCurrent Strength: {0}\r\nOnly placeable on the ground.\r\nCrouch to stop bouncing.",
					 (Event Player.Jumppad_Info_Array[3]+1)*5
				))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 7);
			Event Player.Mode_Headline = Custom String("Flying | Global Gravity");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Space Gravity (Only Host)\r\n{1} : Normal Gravity (Only Host)\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Give | Remove Yourself Flying\r\n{1} : Move Up\r\nCrouch : Move Down",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Jump))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 8);
			Event Player.Mode_Headline = Custom String("DMG | Speed | KB | Grav (Self)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Increase by {1}%\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector), 
				Custom String("{0} : Decrease by {1}%\r\n{2}", 
					Input Binding String(Button(Secondary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector),
				Custom String("{0} : Cycle Mode [DMG, Speed, KB, Gravity]\r\n{1}", 
					Input Binding String(Button(Ultimate)),
				Custom String("{0} : Cycle Amount [1%, 10%, 100%, 1000%]\r\n{1}", 
					Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Reset {0}\r\n{1}", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector],
				Custom String("Melee : Reset all stats\r\n\n{0}", 
				Custom String("Your [{0}] is currently set to: {1}%", 
					Global.Modification_Mode_String[Event Player.Modification_Mode_Selector], Event Player.Player_Modification[Event Player.Modification_Mode_Selector]
				)))))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 9);
			Event Player.Mode_Headline = Custom String("DMG | Speed | KB | Grav (Target)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Increase by {1}%\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector), 
				Custom String("{0} : Decrease by {1}%\r\n{2}", 
					Input Binding String(Button(Secondary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector),
				Custom String("{0} : Cycle Mode [DMG, Speed, KB, Gravity]\r\n{1}", 
					Input Binding String(Button(Ultimate)),
				Custom String("{0} : Cycle Amount [1%, 10%, 100%, 1000%]\r\n{1}",
					Input Binding String(Button(Ability 2)),
				Custom String("Reload : Reset {0}\r\n{1}", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector],
				Custom String("Melee : Reset all stats\r\n\n{0}", 
				Custom String("Target [{0}] is currently set to: {1}%!",
					Global.Modification_Mode_String[Event Player.Modification_Mode_Selector], Player Closest To Reticle(Event Player, All Teams).Player_Modification[Event Player.Modification_Mode_Selector]
				)))))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 10);
			Event Player.Mode_Headline = Custom String("Carry | Bonk | Unstuck");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Carry Target\r\n{1} : Knockback Push\r\n{2} : Fix and Unstuck", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 11);
			Create Progress Bar HUD Text(Event Player, Event Player.Scale_Real * 5, Custom String("Destination: {0}% | Current: {1}%",
				Event Player.Scale_Prev * 100, Event Player.Scale_Real * 100), Top, 1, Color(Blue), Color(Gray), Values,
				Visible Never);
			Event Player.Scale_Hud_ID = Last Text ID;

			Event Player.Mode_Headline = Custom String("Growth | Shrink (Yourself)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Set Destination Growth\r\n{1} : Set Destination Shrink\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Confirm & Start Scaling\r\n{1} : Reset Size", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Reload))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 12);
			Create Progress Bar HUD Text(Event Player, Event Player.Target_Lock.Scale_Real * 5, Custom String(
				"Destination: {0}% | Current: {1}% | {2}", Event Player.Target_Lock.Scale_Prev * 100,
				Event Player.Target_Lock.Scale_Real * 100, Event Player.Target_Lock), Top, 1, Color(Red), Color(Gray), Values,
				Visible Never);
			Event Player.Scale_Hud_ID = Last Text ID;

			Event Player.Mode_Headline = Custom String("Growth | Shrink (Target)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Set Destination Growth\r\n{1} : Set Destination Shrink\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Confirm & Start Scaling\r\n{1} : Reset Size", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Reload))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 13);
			Event Player.Mode_Headline = Custom String("Attach System");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Attach Yourself To Target\r\n{1} : Target Rides You\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Detach Yourself\r\nReload : Detach Target\r\n{1} : Attach Target To You\r\nMelee: Orbit Target",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2))
				))), Null, Left, 1, Color(White), Color(White), Color(White), Visible To and String, Visible Never);

        Else If(Event Player.Mode_Cycle == 14);
			Event Player.Mode_Headline = Custom String("Leash Line");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Leash Target\r\n{1} : Remove Leash\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : Leash yourself to target",
					Input Binding String(Button(Ability 2))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 15);
			Event Player.Mode_Headline = Custom String("Painting");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Draw\r\n{1} : Choose Effect\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Select Size\r\n{1} : Choose Color\r\n{2}", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("Reload : Remove previous effect\r\nMelee : Clear all effects"
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 16);
			Event Player.Mode_Headline = Custom String("Beam Drawing");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Draw Beam\r\n{1} : Choose Beam\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Choose Color\r\n{1} : Remove previous bream\r\nMelee : Clear All Beams", 
					Input Binding String(Button(Ability 2)), Input Binding String(Button(Reload))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 17);
			Event Player.Mode_Headline = Custom String("Target Hero Swap");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Make Target To Mercy\r\n{1} : Make Target To D.Va\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Make Target To Widow\r\n{1} : Make Target Same Hero As You",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 18);
			Event Player.Mode_Headline = Custom String("Savezone");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Create/Move Safezone\n{1} : Remove Safezone\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)), 
				Custom String("{0} : Increase Size\n{1} : Decrease Size\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("Reload : Give Target Access\nMelee : Revoke Target Access")
				))), Null, Left, 1, Color(White), Color(White), Color(White), String,Visible Never);

		Else If(Event Player.Mode_Cycle == 19);
			Event Player.Mode_Headline = Custom String("Page of Fates");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Coin Toss\r\n{1} : Rocks/Paper/Scissors\r\n{2}",
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : 6 Sided Die\r\n{1} : 20 Sided Die\r\nReload : Percentage Die",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 20);
			Event Player.Mode_Headline = Custom String("Voice Options");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Moan Spam Target\r\n{1} : Moan Spam Yourself\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Voice Pitch Up\r\n{1} : Voice Pitch Down\r\nMelee : Wobbly Voice\r\n{2}", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("Reload : Back To Normal Voice\r\nCurrent Pitch: [{0}]", 
					If-Then-Else(Event Player.Voice_Pitch == False, Custom String("Wobbly"), Event Player.Voice_Pitch)
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 21);
			Event Player.Mode_Headline = Custom String("Small message to someone");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : LIKE\r\n{1} : LOVE\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Hug\r\n{1} : Cringe", 
					Input Binding String(Button(Ability 2)), Input Binding String(Button(Ultimate))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 22);
			Event Player.Mode_Headline = Custom String("Heaven");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give Ticket to Heaven\r\n{1} : Send yourself to Heaven", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 23);
			Event Player.Mode_Headline = Custom String("#icon #yourself");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give icon to yourself\n{1}",
					Input Binding String(Button(Primary Fire)),  
				Custom String("{0} : Choose Color\n{1} : Choose Icon\n{2}", 
					Input Binding String(Button(Secondary Fire)), Input Binding String(Button(Ultimate)), 
				Custom String("{0} : Give Yourself - Heart\nMelee : Give Yourself - Fire\n{1}", 
					Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Destroy Your Icons\n"
				))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 24);
			Event Player.Mode_Headline = Custom String("#icon #target");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give Icon to Target\n{1}",
					Input Binding String(Button(Primary Fire)), 
				Custom String("{0} : Choose Color\n{1} : Choose Icon\n{2}", 
					Input Binding String(Button(Secondary Fire)), Input Binding String(Button(Ultimate)), 
				Custom String("{0} : Give Target - Heart\nMelee : Give Target - Fire\n{1}", 
					Input Binding String(Button(Ability 2)),  
				Custom String("Reload : Destroy Target's Icons"
				))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 25);
			Event Player.Mode_Headline = Custom String("Perks Toggle");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Anti-Colission Target [{1}]\r\n{2}",
					Input Binding String(Button(Primary Fire)), 
					If-Then-Else(Player Closest To Reticle(Event Player, All Teams).Ghost_Mode, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("Melee : Anti-Colission Self [{0}]\r\n{1}",
					If-Then-Else(Event Player.Ghost_Mode, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("{0} : Slow Projectile [{1}]\r\n{2}",
					Input Binding String(Button(Reload)), 
					If-Then-Else(Event Player.Slow_Projectile, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("{0} : No CD (Temp. DISABLED :: Angels+) [{1}]\r\n{2}",
					Input Binding String(Button(Ability 2)), 
					If-Then-Else(Event Player.No_CD, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("{0} : Full Protection [{1}]",
					Input Binding String(Button(Ultimate)), 
					If-Then-Else(Event Player.Full_Protection, Global.OffOnString[1], Global.OffOnString[0])
				)))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 26);
			Event Player.Mode_Headline = Custom String("Remote Control");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Send control request to target\r\n{1} : Stop Controlling Target\r\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Reload)),
				Custom String("{0} : Target Controlls you\r\n{1} : Teleport Controlled Players\r\n{2} : See controlled players",
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Ability 2)), Input Binding String(Button(Secondary Fire))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 27);
			Event Player.Mode_Headline = Custom String("Kick/Ban (Only Owner)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Kick Target \r\n{1} : Ban Target Temporarily", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 28);
			Event Player.Mode_Headline = Custom String("Lock Up In Jail");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Lock target - Chat & Skills Disabled\r\n{1} : Unlock target - Chat & Skills Enabled\r\n{2} : Lock / Unlock Yourself",
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 29);
			Event Player.Mode_Headline = Custom String("Assign Rights & Team Swap");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give Target Rights \r\n{1} : Revoke Target Rights \r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Switch Team - Yourself\r\n{1} : Switch Team - Target\r\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Move Yourself to Spectator"
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 30);
			Event Player.Mode_Headline = Custom String("Time (Only Owner/Angels)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Add 5 Min to match time\r\n{1} : Add 30 Min to match time\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Set Match Time To 10 Sec\r\n{1} : Declare Match Draw\r\n\r\nMaximum Match duration is\r\n  capped at 90 minutes.",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Reload))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 31);
			Event Player.Mode_Headline = Custom String("Special Camera");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Place Camera Without LOS check\r\n{1} : Place Camera With LOS Check\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("Ultimate : Place static Camera\r\n{0} : Start Cinematic Camera\r\n{1}", 
					Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Start Top-down Camera\r\n{0} : Attach Camera to target player\r\n\r\n{1}", 
					Input Binding String(Button(Ability 1)),
				Custom String("Hold button down for 1 sec to\r\n   place cam at eye level.\r\nReminder: Hold Interact to reset Camera."
				))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 32);
			Event Player.Mode_Headline = Custom String("U N O");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Enter UNO match\r\n{1} : Leave UNO Match\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("Ultimate : Start UNO Match\r\n\nPlayers in queue: {0}\r\n{1}",
					Count Of(Global.UNO_Players),
				Custom String("{0} : Show who is in queue\r\nReload (Optional):\r\nPlace/Remove In-world UNO deck",
					Input Binding String(Button(Ability 2))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 33);
			Event Player.Mode_Headline = Custom String("Invisible (Only Host/Angels)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Set Yourself Invisible \r\n{1} : Remove Invisibility from self", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 34);
			Event Player.Mode_Headline = Custom String("Talk with Moe");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("Say to Moe:\r\n{0} : Hello!\n{1} : Goodbye.\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : Yes.\nReload : No.\r\n{1}",
					Input Binding String(Button(Ability 2)), 
				Custom String("Ultimate : Thanks!\n{0} : Sorry...",Input Binding String(Button(Ability 1))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle == 35);
			Event Player.Mode_Headline = Custom String("Hero Features");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Toggle All Hero Special Features [{1}] \n\n(Moira Ghost Fade, Heart Tags, Widowmaker's Laser pointer, etc)",
					Input Binding String(Button(Ultimate)), If-Then-Else(Event Player.FunkySkillsToggle, Global.OffOnString[1], Global.OffOnString[0])
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);


		End;

		Event Player.Mode_Description = Last Text ID;
	}
}

rule("Mode_Headline_Desc_Default")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.High_Rank || Event Player.Mod_Rank) == False;
		(Is Button Held(Event Player, Button(Interact)) || Is Button Held(Event Player, Button(Jump))) == True;
		Event Player.Mode_Description != Null;
		Event Player.Is_Menu_Active == True;
		Event Player.UNO_Ingame == False;
	}

	actions
	{
		Destroy HUD Text(Event Player.Mode_Description);
		Destroy Progress Bar HUD Text(Event Player.Scale_Hud_ID);
		
		If(Event Player.Mode_Cycle_Default == 0);
			Event Player.Mode_Headline = Custom String("Info Page");
			Call Subroutine(Info_Page_Default);

		Else If(Event Player.Mode_Cycle_Default == 1);
			Event Player.Mode_Headline = Custom String("Kill | Resurrection");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Kill | Rez Yourself\r\n{1} : Set Auto-Respawn, yourself\r\n\n{2}", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)), 
				Custom String("Current Auto-Respawn Settings: \r\n[You: {0}, Target: {1}]", 
					Event Player.Auto_Respawn, Player Closest To Reticle(Event Player, All Teams).Auto_Respawn
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 2);
			Event Player.Mode_Headline = Custom String("Status Effect");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Apply/Remove Status: yourself\r\n{1} : Remove All Status: Yourself\r\n{2}",
					Input Binding String(Button(Ability 2)), Input Binding String(Button(Reload)),
				Custom String("{0} : Cycle Status\r\n\nCurrently Selected Status:\r\n[ {1} ]",
					Input Binding String(Button(Ultimate)), Global.Status_String[Event Player.Status_Selector]
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 3);
			Event Player.Mode_Headline = Custom String("Outlines & names");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Choose Color\r\n{1}", 
					Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Give Outline To Yourself\r\n{1} : Remove Outline from Yourself\r\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("Melee : Toggle Outline Visibility [{0}]",
					If-Then-Else(Event Player.Outlines_Toggle, Global.OffOnString[1], Global.OffOnString[0])
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 4);
			Event Player.Mode_Headline = Custom String("Speed | Knockback | Gravity");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Increase by {1}%\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector), 
				Custom String("{0} : Decrease by {1}%\r\n{2}", 
					Input Binding String(Button(Secondary Fire)), Raise To Power(10, Event Player.Modification_Scalar_Selector),
				Custom String("{0} : Cycle Mode [Speed, KB, Gravity]\r\n{1}", 
					Input Binding String(Button(Ultimate)),
				Custom String("{0} : Cycle Amount [1%, 10%, 100%, 1000%]\r\n{1}", 
					Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Reset {0}\r\n{1}", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector],
				Custom String("Melee : Reset all stats\r\n\n{0}",
				Custom String("Your [{0}] is currently set to: {1}%!\r\n", 
					Global.Modification_Mode_String[Event Player.Modification_Mode_Selector], Event Player.Player_Modification[Event Player.Modification_Mode_Selector]
				)))))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 5);
			Event Player.Mode_Headline = Custom String("Unstuck");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Fix and Unstuck Yourself", 
					Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 6);
			Create Progress Bar HUD Text(Event Player, Event Player.Scale_Real * 5, Custom String("Destination: {0}% | Current: {1}%",
				Event Player.Scale_Prev * 100, Event Player.Scale_Real * 100), Top, 1, Color(Blue), Color(Gray), Values,
				Visible Never);
			Event Player.Scale_Hud_ID = Last Text ID;
			
			Event Player.Mode_Headline = Custom String("Growth | Shrink (Yourself)");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Set Destination Growth\r\n{1} : Set Destination Shrink\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Confirm & Start Scaling\r\n{1} : Reset Size", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Reload))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 7);
			Event Player.Mode_Headline = Custom String("Voice Options");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Voice Pitch Up\r\n{1} : Voice Pitch Down\r\n{2}", 
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)),
				Custom String("{0} : Wobbly Voice\r\n{1} : Back To Normal Voice\r\nCurrent Pitch: [{2}]", 
					Input Binding String(Button(Melee)), Input Binding String(Button(Reload)), 
					If-Then-Else(Event Player.Voice_Pitch == False, Custom String("Wobbly"), Event Player.Voice_Pitch)
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 8);
			Event Player.Mode_Headline = Custom String("Heaven");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Send yourself to Heaven", 
					Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 9);
			Event Player.Mode_Headline = Custom String("#Icon #yourself");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Give icon to yourself \n{1}",
				Input Binding String(Button(Primary Fire)), Custom String(
				"{0} : Choose Color\n{1} : Choose Icon\n{2}", Input Binding String(Button(Secondary Fire)), Input Binding String(Button(
				Ultimate)), Custom String("{0} : Give Yourself - Heart\nMelee : Give Yourself - Fire\n{1}", Input Binding String(Button(
				Ability 2)), Custom String("Reload : Destroy Your Icons"))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 10);
			Event Player.Mode_Headline = Custom String("Perks Toggle");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Slow Projectile [{1}]\r\n{2}",
					Input Binding String(Button(Reload)), 
					If-Then-Else(Event Player.Slow_Projectile, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("Melee : Anti-Colission Self [{0}]\r\n{1}",
					If-Then-Else(Event Player.Ghost_Mode, Global.OffOnString[1], Global.OffOnString[0]),
				Custom String("{0} : Full Protection [{1}]",
					Input Binding String(Button(Ultimate)), 
					If-Then-Else(Event Player.Full_Protection, Global.OffOnString[1], Global.OffOnString[0])
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
			
		Else If(Event Player.Mode_Cycle_Default == 11);
			Event Player.Mode_Headline = Custom String("Team Swap");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Switch Team - Yourself",
					Input Binding String(Button(Ultimate))
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 12);
			Event Player.Mode_Headline = Custom String("Special Camera");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Place Camera Without LOS check\r\n{1} : Place Camera With LOS Check\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Place static Camera\r\n{1} : Start Cinematic Camera\r\n{2}",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2)), 
				Custom String("Reload : Start Top-down Camera\r\n\n{0}",
				Custom String("Hold button down for 1 sec to\r\n   place cam at eye level.\r\nReminder: Hold Interact to reset Camera."
				))))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 13);
			Event Player.Mode_Headline = Custom String("U N O");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Enter UNO match\r\n{1} : Leave UNO Match\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Start UNO Match\r\n\nPlayers in queue: {1}\r\n{2}",
					Input Binding String(Button(Ultimate)), Count Of(Global.UNO_Players),
				Custom String("{0} : Show who is in queue\r\nReload : (Optional):\r\nPlace/Remove In-world UNO deck",
					Input Binding String(Button(Ability 2))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 14);
			Event Player.Mode_Headline = Custom String("Page of Fates");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Coin Toss\r\n{1} : Rocks/Paper/Scissors\r\n{2}",
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : 6 Sided Die\r\n{1} : 20 Sided Die\r\nReload : Percentage Die",
					Input Binding String(Button(Ultimate)), Input Binding String(Button(Ability 2))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 15);
			Event Player.Mode_Headline = Custom String("Small message to someone");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : LIKE\r\n{1} : LOVE\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Hug\r\n{1} : Cringe", 
					Input Binding String(Button(Ability 2)), Input Binding String(Button(Ultimate))
				))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);

		Else If(Event Player.Mode_Cycle_Default == 16);
			Event Player.Mode_Headline = Custom String("Talk with Moe");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("Say to Moe:\r\n{0} : Hello!\n{1} : Goodbye.\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)),
				Custom String("{0} : Yes.\nReload : No.\r\n{1}",
					Input Binding String(Button(Ability 2)), 
				Custom String("Ultimate : Thanks!\n{0} : Sorry...",Input Binding String(Button(Ability 1))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
		
		Else If(Event Player.Mode_Cycle_Default == 17);
			Event Player.Mode_Headline = Custom String("Hero Features");
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Toggle All Hero Special Features [{1}] \n\n(Moira Ghost Fade, Heart Tags, Widowmaker's Laser pointer, etc)",
					Input Binding String(Button(Ultimate)), If-Then-Else(Event Player.FunkySkillsToggle, Global.OffOnString[1], Global.OffOnString[0])
				)), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
		End;

		Event Player.Mode_Description = Last Text ID;
	}
}

rule("Remove_AFK_Player")
{
	event
	{
		Player Joined Match;
		All;
		All;
	}

	conditions
	{
		Has Spawned(Event Player) == False;
	}

	actions
	{
		Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player)) || Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player)) 
			|| (Host Player == Event Player && Array Contains(Global.Promoted_List, Custom String("{0}", Event Player))) 
			|| (Global.Music_Toggle && Event Player == Host Player));
		Abort If(Custom String("{0}", Event Player) == Custom String("Warloy") || Custom String("{0}", Event Player) == Custom String("kwally"));
		Wait(600, Abort When False);
		Big Message(All Players(All Teams), Custom String("{0} Was \"AFK\" Too Long Without Choosing A Hero.", Event Player));
		Wait(0.1, Ignore Condition);
		Remove Player(Event Player);
	}
}

rule("Remove_Banned_Player")
{
	event
	{
		Player Joined Match;
		All;
		All;
	}

	conditions
	{
		Array Contains(Global.Banned_List, Custom String("{0}", Event Player)) == True;
	}

	actions
	{
		Disable Text Chat(Event Player);
		Disable Voice Chat(Event Player, True, True, False);
		Disable Game Mode HUD(Event Player);
		Disable Game Mode In-World UI(Event Player);
		Event Player.Full_Protection = True;
		Event Player.Mode_Cycle = -1;
		Event Player.Mode_Cycle_Default = -1;
		Event Player.Is_Menu_Active = False;
		Wait(5, Ignore Condition);
		Create Hud Text(Event Player, Null, Custom String(" \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"), Null, Top, 5, Color(White), Color(White), Color(White), None, Visible Never);
		Create Hud Text(Event Player,  Custom String(" You are on the banlist \r\n    and will be removed \r\n from the game shortly... "), 
				Null, Null, Top, 10, Color(Red), Color(White), Color(White), None, Visible Never);
		Create Hud Text(Event Player, Null, Null, Custom String(" \r\nPlease Contact kwally#21906 on Battlenet (all letters lowercase!) for further support."), 
				Top, 10, Color(White), Color(Yellow), Color(White), None, Visible Never);
		Start Forcing Player To Be Hero(Event Player, Hero(Roadhog));
		Set Status(Event Player, Null, Knocked Down, 9999);
		Set Status(Event Player, Null, Phased Out, 9999);
		Set Invisible(Event Player, All);
		Set Aim Speed(Event Player, 0);
		Start Forcing Player Position(Event Player, Vector(0,50,0), False);
		Modify Global Variable(Temp_Banned, Append To Array, Custom String("{0}", Event Player));
		Wait(25, Ignore Condition);
		Small Message(All Players(All Teams), Custom String("  {0} is banned.", Event Player));
		Wait(0.5, Ignore Condition);
		Remove Player(Event Player);
	}
}

rule("Remove_Banned_Player")
{
	event
	{
		Player Joined Match;
		All;
		All;
	}

	conditions
	{
		Array Contains(Global.Temp_Banned, Custom String("{0}", Event Player)) == True;
	}

	actions
	{
		Small Message(All Players(All Teams), Custom String("{0} is banned.", Event Player));
		Wait(0.5, Ignore Condition);
		Remove Player(Event Player);
	}
}

rule("Set match time to 1800s")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Is Assembling Heroes == False;
		Is In Setup == False;
	}

	actions
	{
		"Forcing game time to 30 min, because default settings are 10 min maximum"
		Set Match Time(1800);
	}
}

rule("Declare draw if match time == 0")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Match Time == 0;
		Is Assembling Heroes == False;
		Is In Setup == False;
	}

	actions
	{
		Declare Match Draw;
		Wait(26, Ignore Condition);
		Restart Match;
	}
}

rule("Disable Assemble Stage")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Is Assembling Heroes == True;
		Global.Skins_Check == False;
	}

	actions
	{
		Set Match Time(0);
	}
}

rule("Disable Preparation Stage")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Is In Setup == True;
	}

	actions
	{
		Set Match Time(0);
	}
}

rule("Skin Swap")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		CUrrent Game Mode != Game Mode(Skirmish);
		Event Player == Host Player;
		Is Button Held(Event Player, Button(Jump)) == True;
		Is Button Held(Event Player, Button(Crouch)) == True;
	}

	actions
	{
		Wait(10, Abort When False);
		Big Message(Event Player, Custom String("Commencing Skin Swap"));
		Wait(3, Ignore Condition);
		Go To Assemble Heroes;
		Wait(50, Ignore Condition);
		Start Forcing Player To Be Hero(Filtered Array(All Players(All Teams), Is Dummy Bot(Current Array Element)), Hero(Soldier: 76));
	}
}

rule("Remaining Time: 10 Sec")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Match Time <= 10;
		(Is In Setup && Is Assembling Heroes) == False;
	}

	actions
	{
		Big Message(All Players(All Teams), Custom String("Remaining Time: 10 Sec"));
	}
}

disabled rule("")
{
	event
	{
		Ongoing - Global;
	}
}

rule("Camera_Switch")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Interact)) == True;
		Has Spawned(Event Player) == True;
		Event Player.Is_Crouch_On == False;
		Is Alive(Event Player) == True;
	}

	actions
	{
		Wait(0.400, Abort When False);
		Event Player.Camera_Info_Array[1] = False;
		Event Player.Camera_Info_Array[0] = False;
		Destroy In-World Text(Event Player.Camera_Info_Array[4]);
		Destroy Effect(Event Player.Camera_Info_Array[5]);
		If(Event Player.Camera >= 4);
			Event Player.Camera = 0;
		Else;
			Event Player.Camera += 1;
		End;
	}
}

rule("1st_Camera_0")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 0;
	}

	actions
	{
		Stop Camera(Event Player);
		Small Message(Event Player, Custom String(" Default Camera"));
	}
}

rule("3rd_Camera_1")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 1;
	}

	actions
	{
		Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + -3 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + 10 * Facing Direction Of(Event Player)), 30);
		Small Message(Event Player, Custom String(" 3rd Person, Far"));
	}
}

rule("3rd_Camera_2_Zoom")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 2;
	}

	actions
	{
		Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + -1 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + 10 * Facing Direction Of(Event Player)), 30);
		Small Message(Event Player, Custom String(" 3rd Person, Close"));
	}
}

rule("3rd_Camera_3")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 3;
	}

	actions
	{
		Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + 3 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + -10 * Facing Direction Of(Event Player)), 30);
		Small Message(Event Player, Custom String(" Front View, Far"));
	}
}

rule("3rd_Camera_4_Zoom")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 4;
	}

	actions
	{
		Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + 1 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + -10 * Facing Direction Of(Event Player)), 30);
		Small Message(Event Player, Custom String(" Front View, Close"));
	}
}

rule("Mode_00 - AFK Toggle")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 0 || Event Player.Mode_Cycle_Default == 0) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.AFK_Toggle);
				Small Message(Event Player, Custom String("  Already set as afk"));
			Else;
				Event Player.AFK_Toggle = True;
				Small Message(Event Player, Custom String("  Afk-Text appears 5 sec after you stop moving"));
			End;
		Wait(1, Ignore Condition);
		End;
	}
}

rule("Mode_00 AFK ON")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.AFK_Toggle == True;
		Is Moving(Event Player) == False;
		Is Crouching(Event Player) == False;
		Has Spawned(Event Player) == True;
		Event Player.Effect_Storage == Null;
	}

	actions
	{
		Wait(5, Abort When False);
		If(Custom String("{0}", Event Player) == Custom String("xMaxuss") || Custom String("{0}", Event Player) == Custom String("kwally") ||
			Custom String("{0}", Event Player) == Custom String("Warloy"));
			Create Progress Bar In-World Text(All Players(All Teams), Modulo(Total Time Elapsed * Evaluate Once(Random Real(2,8)), 100), 
				If-Then-Else(Custom String("{0}", Event Player) == Custom String("xMaxuss"), Custom String("Max is coding/afk\r\n"), 
				If-Then-Else(Custom String("{0}", Event Player) == Custom String("kwally"), 
					Custom String("AFK | DM if you need me"), 
				If-Then-Else(Custom String("{0}", Event Player) == Custom String("Warloy"), Custom String("Warloy is coding/afk\r\n"), Custom String("{0} is afk", Event Player)))), 
				Event Player, 0.5, Clip Against Surfaces, 
				If-Then-Else(Event Player.Is_Title_Given, 
				If-Then-Else(Event Player.Player_Title_And_Outline[1] == Custom String("Rainbow"), 
				Global.Rainbow_Color, If-Then-Else(Event Player.Player_Title_And_Outline[1] == Custom String("Fading"), Custom Color(
					Round To Integer((Event Player.Player_Title_And_Outline[2][0] + Event Player.Player_Title_And_Outline[3][0]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][0] - Event Player.Player_Title_And_Outline[3][0]) / 2), Down), 
					Round To Integer((Event Player.Player_Title_And_Outline[2][1] + Event Player.Player_Title_And_Outline[3][1]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][1] - Event Player.Player_Title_And_Outline[3][1]) / 2), Down),
					Round To Integer((Event Player.Player_Title_And_Outline[2][2] + Event Player.Player_Title_And_Outline[3][2]) / 2 + Sine From Radians(Global.Main_Chaser) * 
						((Event Player.Player_Title_And_Outline[2][2] - Event Player.Player_Title_And_Outline[3][2]) / 2), Down), 
					255), Event Player.Player_Title_And_Outline[1])), 
				If-Then-Else(Event Player.Regular_Player_Has_Title, Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], 
				Evaluate Once(Random Value In Array(Global.Colors)))), 
				Color(White), Visible To Position Values and Color, Default Visibility);
		Else;
			Create In-World Text(All Players(All Teams), Custom String("{0} {1} is AFK {0}\r\n\r\n", 
				Global.Rotate[Modulo(Round To Integer(Total Time Elapsed * Evaluate Once(Random Real(2,8)) / 5, Down), 4)], Event Player), 
				Event Player, 0.8, Clip Against Surfaces, Visible To Position String and Color, 
				If-Then-Else(Event Player.Is_Title_Given, 
				If-Then-Else(Event Player.Player_Title_And_Outline[1] == Custom String("Rainbow") || Event Player.Player_Title_And_Outline[1] == Custom String("Fading"), 
				Global.Rainbow_Color, Event Player.Player_Title_And_Outline[1]), 
				If-Then-Else(Event Player.Regular_Player_Has_Title, Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], 
				Evaluate Once(Random Value In Array(Global.Colors)))), Visible Never);
		End;
		Event Player.Effect_Storage = Last Text ID;
		Small Message(Event Player, Custom String("  AFK text now active"));
	}
}

rule("Mode_00 - AFK OFF")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.AFK_Toggle == True;
		Event Player.Effect_Storage != Null;
		(Is Jumping(Event Player) || Throttle Of(Event Player) != Vector(0,0,0) || Is Crouching(Event Player) || Not(Has Spawned(Event Player))) == True;
	}

	actions
	{
		Destroy Progress Bar In-World Text(Event Player.Effect_Storage);
		Destroy In-World Text(Event Player.Effect_Storage);
		Wait(0.1, Ignore Condition);
		Event Player.Effect_Storage = Null;
		Small Message(Event Player, Custom String("  No Longer afk"));
		Event Player.AFK_Toggle = False;
	}
}

rule("Mode_01 - Kill_Rez")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 1 || Event Player.Mode_Cycle_Default == 1) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: Can angels kill eachother?"
		If(Is Button Held(Event Player, Button(Ultimate)));
			If(Is Alive(Event Player));
				If(((Event Player.High_Rank || Event Player.Mod_Rank) || (Event Player.Spam_Cooldown <= 0)) == False);
					Small Message(Event Player, Custom String("  Self-kill is on a {0}sec CD", Event Player.Spam_Cooldown));
					Abort;
				End;
				Event Player.Spam_Cooldown = 3;
				Kill(Event Player, Null);
				Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
			Else If(Is Dead(Event Player));
				Resurrect(Event Player);
				Heal(Event Player, Null, 12000);
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
			End;
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).High_Rank || (Player Closest To Reticle(Event Player, All Teams).Mod_Rank &&
				Not(Player Closest To Reticle(Event Player, All Teams).Promoted_Rank)));
			Resurrect(Player Closest To Reticle(Event Player, All Teams));
			Heal(Player Closest To Reticle(Event Player, All Teams), Null, 12000);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If(Is Dead(Player Closest To Reticle(Event Player, All Teams)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			If(Event Player.Promoted_Rank && (Event Player != Host Player));
				Small Message(Event Player, Custom String("  Only for host and angels."));
				Abort;
			End;
			Abort If(Player Closest To Reticle(Event Player, All Teams).High_Rank || (Player Closest To Reticle(Event Player, All Teams).Mod_Rank &&
				Not(Player Closest To Reticle(Event Player, All Teams).Promoted_Rank)) || Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Kill(Player Closest To Reticle(Event Player, All Teams), Event Player);
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Auto_Respawn);
				Event Player.Auto_Respawn = False;
			Else;
				Event Player.Auto_Respawn = True;
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Blue), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Reload)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).High_Rank || Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			If(Player Closest To Reticle(Event Player, All Teams).Auto_Respawn);
				Player Closest To Reticle(Event Player, All Teams).Auto_Respawn = False;
			Else;
				Player Closest To Reticle(Event Player, All Teams).Auto_Respawn = True;
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
		End;
	}
}

rule("Mode_01 - Auto_Respawn")
{
	event
	{
		Player Died;
		All;
		All;
	}

	conditions
	{
		Event Player.Auto_Respawn == True;
		Is Dead(Event Player) == True;
	}

	actions
	{
		"Kanezaka falling out of map hardcoded fix"
		If(Current Map == Map(Kanezaka));
			Teleport(Event Player, Random Value In Array(Global.Kanezaka_Teleports));
			Resurrect(Event Player);
			Heal(Event Player, Null, 12000);
			Wait(0.100, Ignore Condition);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		Else;
			Wait(1.5, Abort When False);
			Teleport(Event Player, Nearest Walkable Position(Position Of(Event Player)) + Vector(0,1.5,0));
			Resurrect(Event Player);
			Heal(Event Player, Null, 12000);
			Start Forcing Player Position(Event Player, Nearest Walkable Position(Position Of(Event Player)) + Vector(0,1.5,0), False);
			Wait(0.1, Ignore Condition);
			Stop Forcing Player Position(Event Player);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		End;
	}
}

rule("Mode_02 - Teleport")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 2;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Teleport(Event Player, Position Of(Player Closest To Reticle(Event Player, All Teams)));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			If(Is Dead(Player Closest To Reticle(Event Player, All Teams)));
				Resurrect(Player Closest To Reticle(Event Player, All Teams));
			End;
			Teleport(Player Closest To Reticle(Event Player, All Teams), Position Of(Event Player));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			If(Is Dead(Player Closest To Reticle(Event Player, All Teams)));
				Resurrect(Player Closest To Reticle(Event Player, All Teams));
			End;
			Teleport(Player Closest To Reticle(Event Player, All Teams), Spawn Points(Team Of(Player Closest To Reticle(Event Player,
				All Teams))));
			Play Effect(All Players(All Teams), Bad Explosion, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Set Facing(Player Closest To Reticle(Event Player, All Teams), 
				Direction Towards(Player Closest To Reticle(Event Player, All Teams), Eye Position(Event Player) + Vector(0,0.1,0)), To World);
		End;
	}
}

rule("Mode_02 - Short Hop Effect")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 2 || Event Player.Mode_Cycle == 16) == True;
		(Is Button Held(Event Player, Button(Crouch)) || Event Player.Mode_Cycle == 16)== True;
	}

	actions
	{
		If(Event Player.Mode_Cycle == 2);
			Create Effect(Event Player, Sphere, Color(White),
				Update Every Frame(Eye Position(Event Player) + Facing Direction Of(Event Player) * 12.5), 0.3, Position and Radius);
			Event Player.Drawing_Obj_Info_Array[3] = Last Created Entity;
			Create Effect(Event Player, Ring, Color(White),
				Update Every Frame(Eye Position(Event Player) + Facing Direction Of(Event Player) * 12.5), 0.75, Position and Radius);
			Event Player.Drawing_Obj_Info_Array[4] = Last Created Entity;
			Wait Until(Event Player.Mode_Cycle != 2 || Not(Is Button Held(Event Player, Button(Crouch))), 9999);
			Destroy Effect(Event Player.Drawing_Obj_Info_Array[3]);
			Destroy Effect(Event Player.Drawing_Obj_Info_Array[4]);
		Else;
			Create Effect(Event Player, Sphere, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(
				Event Player) + Facing Direction Of(Event Player) * 3, All Players(All Teams), Event Player, True)), 0.075, Position Radius and Color);
			Event Player.Beams_Preview_ID[1] = Last Created Entity;
			Wait Until(Event Player.Mode_Cycle != 16, 9999);
			Destroy Effect(Event Player.Beams_Preview_ID[1]);
		End;
	}
}

rule("Mode_03 - Apply Status")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 3 || Event Player.Mode_Cycle_Default == 2) == True;
		Event Player.Signal == True;
	}

	actions
	{		
		Event Player.Signal = False;
		Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Shortcut == Null);
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Event Player.Target_Shortcut.UNO_Ingame);
			Abort If(Event Player.Target_Shortcut.Full_Protection);
			
			If(Event Player.Status_Selector == 0);
				Abort If(Has Status(Event Player.Target_Shortcut, Knocked Down));
				If(Event Player.Target_Shortcut.Protection);
					Clear Status(Event Player.Target_Shortcut, Phased Out);
				End;
				Set Status(Event Player.Target_Shortcut, Null, Knocked Down, 9999);
			Else If(Event Player.Status_Selector == 1);
				Abort If(Has Status(Event Player.Target_Shortcut, Stunned));
				If(Event Player.Target_Shortcut.Protection);
					Clear Status(Event Player.Target_Shortcut, Phased Out);
				End;
				Set Status(Event Player.Target_Shortcut, Null, Stunned, 9999);
			Else If(Event Player.Status_Selector == 2);
				Abort If(Has Status(Event Player.Target_Shortcut, Frozen));
				If(Event Player.Target_Shortcut.Protection);
					Clear Status(Event Player.Target_Shortcut, Phased Out);
				End;
				Set Status(Event Player.Target_Shortcut, Null, Frozen, 9999);
			Else If(Event Player.Status_Selector == 3);
				Abort If(Has Status(Event Player.Target_Shortcut, Burning));
				If(Event Player.Target_Shortcut.Protection);
					Clear Status(Event Player.Target_Shortcut, Phased Out);
				End;
				Set Status(Event Player.Target_Shortcut, Null, Burning, 9999);
				Start Damage Over Time(Event Player.Target_Shortcut, Null, 9999, 20);
				Event Player.Target_Shortcut.DMG_Time = Last Damage Over Time ID;
			Else If(Event Player.Status_Selector == 4);
				Abort If(Has Status(Event Player.Target_Shortcut, Hacked));
				If(Event Player.Target_Shortcut.Protection);
					Clear Status(Event Player.Target_Shortcut, Phased Out);
				End;
				Set Status(Event Player.Target_Shortcut, Null, Hacked, 9999);
			End;
			
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Shortcut, 1);
			If(Event Player.Target_Shortcut.Protection);
				Set Status(Event Player.Target_Shortcut, Null, Phased Out, 9999);
			End;
			Wait(0.1, Ignore Condition);
		
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Event Player.Target_Shortcut.Full_Protection);
			
			If(Event Player.Status_Selector == 3);
				Stop Damage Over Time(Event Player.Target_Shortcut.DMG_Time);
			End;
			If(Event Player.Target_Shortcut.Protection);
				Clear Status(Event Player.Target_Shortcut, Phased Out);
			End;
			
			If(Event Player.Status_Selector == 0);
				Clear Status(Event Player.Target_Shortcut, Knocked Down);
			Else If(Event Player.Status_Selector == 1);
				Clear Status(Event Player.Target_Shortcut, Stunned);
			Else If(Event Player.Status_Selector == 2);
				Clear Status(Event Player.Target_Shortcut, Frozen);
			Else If(Event Player.Status_Selector == 3);
				Clear Status(Event Player.Target_Shortcut, Burning);
			Else If(Event Player.Status_Selector == 4);
				Clear Status(Event Player.Target_Shortcut, Hacked);
			End;
			
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player.Target_Shortcut, 1);
			If(Event Player.Target_Shortcut.Protection);
				Set Status(Event Player.Target_Shortcut, Null, Phased Out, 9999);
			End;
			Wait(0.1, Ignore Condition);
		
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(((Event Player.High_Rank || Event Player.Mod_Rank) || (Event Player.Spam_Cooldown <= 0)) == False);
				Small Message(Event Player, Custom String("  Set/Remove status is on a {0}sec CD", Event Player.Spam_Cooldown));
				Abort;
			End;
			If(Event Player.Protection);
				Clear Status(Event Player, Phased Out);
			End;
			Event Player.Spam_Cooldown = 3;
			If(Event Player.Status_Selector == 0);
				If(Has Status(Event Player, Knocked Down) == False);
					Set Status(Event Player, Null, Knocked Down, 9999);
					Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Else If(Has Status(Event Player, Knocked Down));
					Clear Status(Event Player, Knocked Down);
					Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				End;
			Else If(Event Player.Status_Selector == 1);
				If(Has Status(Event Player, Stunned) == False);
					Set Status(Event Player, Null, Stunned, 9999);
					Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Else;
					Clear Status(Event Player, Stunned);
					Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				End;
			Else If(Event Player.Status_Selector == 2);
				If(Has Status(Event Player, Frozen) == False);
					Set Status(Event Player, Null, Frozen, 9999);
					Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Else;
					Clear Status(Event Player, Frozen);
					Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				End;
			Else If(Event Player.Status_Selector == 3);
				If(Has Status(Event Player, Burning) == False);
					Set Status(Event Player, Null, Burning, 9999);
					Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Else;
					Clear Status(Event Player, Burning);
					Stop Damage Over Time(Event Player.DMG_Time);
					Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				End;
			Else If(Event Player.Status_Selector == 4);
				If(Has Status(Event Player, Hacked) == False);
					Set Status(Event Player, Null, Hacked, 9999);
					Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Else;
					Clear Status(Event Player, Hacked);
					Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				End;
			End;
			If(Event Player.Protection);
				Set Status(Event Player, Null, Phased Out, 9999);
			End;
		
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Event Player.Protection);
				Clear Status(Event Player, Phased Out);
			End;

			Clear Status(Event Player, Knocked Down);
			Clear Status(Event Player, Stunned);
			Clear Status(Event Player, Frozen);
			Clear Status(Event Player, Burning);
			Clear Status(Event Player, Hacked);
			Stop Damage Over Time(Event Player.DMG_Time);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);

			If(Event Player.Protection);
				Set Status(Event Player, Null, Phased Out, 9999);
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Status_Selector >= 4);
				Event Player.Status_Selector = 0;
			Else;
				Event Player.Status_Selector += 1;
			End;
		End;
	}
}

rule("Mode_04 - Protection")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 4;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Protection);
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Player Closest To Reticle(Event Player, All Teams).Protection = True;
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Protection == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Player Closest To Reticle(Event Player, All Teams).Protection = False;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Call Subroutine(Full_Protection_Toggle);
		End;
	}
}

rule("Mode_04 - Protection (Subroutine)")
{
	event
	{
		Subroutine;
		Protection;
	}

	actions
	{
		If(Event Player.Protection);
			Set Status(Event Player, Null, Phased Out, 9999);
			Big Message(Event Player, Custom String("Protection: ON"));
			Skip If((Event Player.High_Rank || Event Player.Mod_Rank), 1);
			Set Damage Dealt(Event Player, 0);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible || Event Player.AFK_Toggle)), 
				Custom String("{0}\r\n\r\n", Ability Icon String(Hero(Baptiste), Button(Ability 2))),
				Event Player, 0.8, Clip Against Surfaces, Visible To and Position, Color(Blue), Default Visibility);
			Event Player.Protection_ID = Last Text ID;
		Else;
			Clear Status(Event Player, Phased Out);
			Big Message(Event Player, Custom String("Protection: OFF"));
			Skip If((Event Player.High_Rank || Event Player.Mod_Rank), 1);
			Set Damage Dealt(Event Player, Event Player.Player_Modification[0]);
			Destroy In-World Text(Event Player.Protection_ID);
			Event Player.Protection_ID = Null;
			Event Player.Full_Protection = False;
		End;
	}
}

rule("Mode_04 - Full Protection (Subroutine)")
{
	event
	{
		Subroutine;
		Full_Protection_Toggle;
	}

	actions
	{
		If(Event Player.Full_Protection);
			Destroy In-World Text(Event Player.Protection_ID);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible || Event Player.AFK_Toggle)), 
				Custom String("{0}\r\n\r\n", Ability Icon String(Hero(Baptiste), Button(Ability 2))),
				Event Player, 0.8, Clip Against Surfaces, Visible To and Position, Color(Blue), Default Visibility);
			Event Player.Protection_ID = Last Text ID;
			Event Player.Full_Protection = False;
		Else;
			If(Not(Event Player.Protection));
				Event Player.Protection = True;
				Wait(0.1, Ignore Condition);
			End;
			Destroy In-World Text(Event Player.Protection_ID);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible || Event Player.AFK_Toggle)), 
				Custom String("{0}\r\n\r\n", Ability Icon String(Hero(Kiriko), Button(Ability 2))),
				Event Player, 0.8, Clip Against Surfaces, Visible To and Position, Color(Blue), Default Visibility);
			Event Player.Protection_ID = Last Text ID;
			Event Player.Full_Protection = True;
		End;
	}
}

rule("Mode_05 - De-Elitate Outlines")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 5 || Event Player.Mode_Cycle_Default == 3) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)) ||
				Event Player.Target_Shortcut.Full_Protection);
			Abort If(Is Dummy Bot(Event Player.Target_Shortcut));
			If(Event Player.Target_Shortcut.Is_Title_Given);
				Small Message(Event Player, Custom String("  Can't change outline of {0}", Event Player.Target_Shortcut));
				Abort;
			End;
			Event Player.Target_Shortcut.Regular_Player_Has_Title = True;
			Disable Nameplates(Event Player.Target_Shortcut, All Players(All Teams));
			Destroy In-World Text(Event Player.Target_Shortcut.M32_Players_Nameplate);
			Wait(0.050, Ignore Condition);
			Event Player.Target_Shortcut.NamesAndOutlines_Colors_Selector = Event Player.NamesAndOutlines_Colors_Selector;
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Evaluate Once(Event Player.Target_Shortcut).Is_Invisible)), Custom String("{0}",
				Event Player.Target_Shortcut), Evaluate Once(Event Player.Target_Shortcut), 0.980,
				Clip Against Surfaces, Visible To and Position, Global.Colors[Event Player.Target_Shortcut.NamesAndOutlines_Colors_Selector], Visible Never);
			Event Player.Target_Shortcut.M32_Players_Nameplate = Last Text ID;
			Start Forcing Player Outlines(Event Player.Target_Shortcut, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True,
				Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], Always);
			Wait(0.080, Ignore Condition);
			Small Message(Event Player.Target_Shortcut, Custom String("  {0} changed your name and outline colors!",
				Event Player));
			Wait(0.250, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)) ||
				Event Player.Target_Shortcut.Full_Protection);
			Abort If(Is Dummy Bot(Event Player.Target_Shortcut));
			If(Event Player.Target_Shortcut.Is_Title_Given);
				Small Message(Event Player, Custom String("  Can't change outline of {0}", Event Player.Target_Shortcut));
				Abort;
			End;
			Event Player.Target_Shortcut.Regular_Player_Has_Title = False;
			Stop Forcing Player Outlines(Event Player.Target_Shortcut, All Players(All Teams));
			Destroy In-World Text(Event Player.Target_Shortcut.M32_Players_Nameplate);
			Event Player.Target_Shortcut.M32_Players_Nameplate = Null;
			Enable Nameplates(Event Player.Target_Shortcut, All Players(All Teams));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Is_Title_Given);
				Small Message(Event Player, Custom String("  Can't change, you have custom title/outline"));
				Abort;
			End;
			Event Player.Regular_Player_Has_Title = True;
			Disable Nameplates(Event Player, All Players(All Teams));
			Destroy In-World Text(Event Player.M32_Players_Nameplate);
			Wait(0.050, Ignore Condition);
			Create In-World Text(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Custom String("{0}",
				Event Player), Event Player, 0.980, Clip Against Surfaces, Visible To Position and Color, Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], Visible Never);
			Event Player.M32_Players_Nameplate = Last Text ID;
			Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True,
				Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], Always);
			Wait(0.250, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Is_Title_Given);
				Small Message(Event Player, Custom String("  Can't remove, you have custom title/outline"));
				Abort;
            End;
			Event Player.Regular_Player_Has_Title = False;
			Stop Forcing Player Outlines(Event Player, All Players(All Teams));
			Destroy In-World Text(Event Player.M32_Players_Nameplate);
			Event Player.M32_Players_Nameplate = Null;
			Enable Nameplates(Event Player, All Players(All Teams));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.NamesAndOutlines_Colors_Selector >= 15);
				Event Player.NamesAndOutlines_Colors_Selector = 0;
			Else;
				Event Player.NamesAndOutlines_Colors_Selector += 1;
			End;
			Skip If(Not(Event Player.Regular_Player_Has_Title), 3);
			Event Player.Regular_Player_Has_Title = False;
			Wait(0.01, Ignore Condition);
			Event Player.Regular_Player_Has_Title = True;
			Small Message(Event Player, Custom String("  {0}", 
				If-Then-Else(Event Player.NamesAndOutlines_Colors_Selector == 15, Custom String("Brown"), Global.Colors[Event Player.NamesAndOutlines_Colors_Selector])));
			Wait(0.1, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Melee)));
			If(Event Player.Outlines_Toggle);
				Start Forcing Player Outlines(All Players(All Teams), Event Player, False, Color(White), Always);
				Event Player.Outlines_Toggle = False;
				Small Message(Event Player, Custom String("  Outlines: OFF"));
			Else;
				Stop Forcing Player Outlines(All Players(All Teams), Event Player);
				Event Player.Outlines_Toggle = True;
				Small Message(Event Player, Custom String("  Outlines: On. this takes up to 5 sec"));
			End;
			Wait(0.5, Ignore Condition);
		End;
	}
}

rule("Mode_05 - Update Outlines")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Regular_Player_Has_Title == True;
	}

	actions
	{
		Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Not(Current Array Element.Outlines_Toggle)), False,
			Color(White), Always);
		Start Forcing Player Outlines(Event Player, Filtered Array(All Players(All Teams), Current Array Element.Outlines_Toggle), True,
			Global.Colors[Event Player.NamesAndOutlines_Colors_Selector], Always);
		Wait(5, Abort When False);
		Loop If Condition Is True;
	}
}

rule("Mode_06 - Jumppad_Create_Custom")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 6;
		Event Player.Signal == True;
		Is On Ground(Event Player) == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			If(Entity Count >= 123);
				Small Message(Event Player, Custom String("  Maximum entity count reached!"));
				Abort;
			End;
			
			Event Player.Jumppad_Helper = Position Of (Event Player);
			Event Player.Jumppad_Entry[0] = Event Player.Jumppad_Helper;
			
			Create Effect(All Players(All Teams), Ring, Global.Colors[Event Player.Jumppad_Info_Array[1]], 
				Event Player.Jumppad_Helper, Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]], Visible To);
			Event Player.Jumppad_Entry[1] = Last Created Entity;
			
			Create Effect(All Players(All Teams), Ring, Global.Colors[Event Player.Jumppad_Info_Array[0]], 
				Evaluate Once(Event Player.Jumppad_Helper), Update Every Frame(Evaluate Once(Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] / 3 * 2) 
				+ (Evaluate Once(Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] - Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] / 3 * 2)) 
				* Sine From Radians(Total Time Elapsed * 0.7)), Visible To Position and Radius);
			Event Player.Jumppad_Entry[2] = Last Created Entity;

			Event Player.Jumppad_Entry[3] = (Event Player.Jumppad_Info_Array[3] + 1) * 5;

			Event Player.Jumppad_Entry[4] = Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]];

			Modify Global Variable(Jumppad_Storage, Append To Array, Array(Event Player.Jumppad_Entry));
			
			Small Message(Event Player, Custom String("  Jumppad placed!"));
		
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Global.Jumppad_Storage == Empty Array);
				Small Message(Event Player, Custom String("  No jumppads left to delete!"));
				Abort;
			End;
			Play Effect(All Players(All Teams), Bad Explosion, Color(Blue), Last Of(Global.Jumppad_Storage)[0], 1);
			Destroy Effect(Last Of(Global.Jumppad_Storage)[1]);
			Destroy Effect(Last Of(Global.Jumppad_Storage)[2]);
			Global.Jumppad_Storage = Array Slice(Global.Jumppad_Storage, 0, Count Of (Global.Jumppad_Storage) - 1);

		Else If(Is Button Held(Event Player, Button(Ability 1)));
			If(Event Player.Jumppad_Info_Array[0] >= 14);
				Event Player.Jumppad_Info_Array[0] = 0;
			Else;
				Event Player.Jumppad_Info_Array[0] += 1;
			End;
			Small Message(Event Player, Custom String("  Inside Color: {0}", Global.Colors[Event Player.Jumppad_Info_Array[0]]));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Jumppad_Info_Array[1] >= 14);
				Event Player.Jumppad_Info_Array[1] = 0;
			Else;
				Event Player.Jumppad_Info_Array[1] += 1;
			End;
			Small Message(Event Player, Custom String("  Outside Color: {0}", Global.Colors[Event Player.Jumppad_Info_Array[1]]));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Jumppad_Info_Array[3] >= 7);
				Event Player.Jumppad_Info_Array[3] = 0;
			Else;
				Event Player.Jumppad_Info_Array[3] += 1;
			End;
			Small Message(Event Player, Custom String("  Jump Strength: {0}", (Event Player.Jumppad_Info_Array[3] + 1) * 5));
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Event Player.Jumppad_Info_Array[2] >= 3);
				Event Player.Jumppad_Info_Array[2] = 0;
			Else;
				Event Player.Jumppad_Info_Array[2] += 1;
			End;
			Small Message(Event Player, Custom String("  Radius: {0}m", Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]]));
		Else If(Is Button Held(Event Player, Button(Melee)));
			For Player Variable(Event Player, Jumppad_Loop, 0, Count Of(Global.Jumppad_Storage), 1);
				Play Effect(All Players(All Teams), Bad Explosion, Color(Blue), Global.Jumppad_Storage[Event Player.Jumppad_Loop][0], 1);
				Destroy Effect(Global.Jumppad_Storage[Event Player.Jumppad_Loop][1]);
				Destroy Effect(Global.Jumppad_Storage[Event Player.Jumppad_Loop][2]);
			End;
			Global.Jumppad_Storage = Empty Array;
			Small Message(All Players(All Teams), Custom String("  All Jumppads have been deleted."));
		End;
	}
}

rule("Mode_06 - Jumppad_Preview")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 6;
	}

	actions
	{
		Create Effect(Event Player, Ring, Global.Colors[Event Player.Jumppad_Info_Array[1]], 
			Update Every Frame(Position Of (Event Player)), Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]], Position Radius and Color);
		Event Player.Jumppad_Preview[0] = Last Created Entity;
		Create Effect(Event Player, Ring, Global.Colors[Event Player.Jumppad_Info_Array[0]], 
			Update Every Frame(Position Of (Event Player)), Update Every Frame(Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] / 3 * 2 
			+ (Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] - Global.Jumppad_Radius[Event Player.Jumppad_Info_Array[2]] / 3 * 2) 
			* Sine From Radians(Total Time Elapsed * 0.7)), Position Radius and Color);
		Event Player.Jumppad_Preview[1] = Last Created Entity;
		Wait Until(Event Player.Mode_Cycle != 6, 9999);
		Destroy Effect(Event Player.Jumppad_Preview[0]);
		Destroy Effect(Event Player.Jumppad_Preview[1]);
	}
}

rule("Mode_06 - Jumppad_Logic")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is True For Any(Global.Jumppad_Storage, Distance Between(Current Array Element[0], Event Player) <= Current Array Element[4] + 0.2) == True;
		Is On Ground(Event Player) == True;
		Event Player.Is_Crouch_On == False;
		Event Player.Full_Protection == False;
	}

	actions
	{
		Event Player.Jumppad_Helper = Filtered Array(Global.Jumppad_Storage, Distance Between(Current Array Element[0], Event Player) <= Current Array Element[4] + 0.3);
		Play Effect(All Players(All Teams), Explosion Sound, Null, Event Player, 30);
		Apply Impulse(Event Player, Vector(0, 1, 0), Event Player.Jumppad_Helper[0][3], To World, Incorporate Contrary Motion);
	}
}

rule("Mode_07 - Flying_Gravity")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 7;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Is_Flying == False);
				Event Player.Is_Flying = True;
				Set Gravity(Event Player, 0);
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
			Else;
				Event Player.Is_Flying = False;
				If(Global.Gravity_Toggle);
					Set Gravity(Event Player, 10);
				Else;
					Set Gravity(Event Player, Event Player.Player_Modification[3]);
				End;
				Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
			End;
		Else If((Is Button Held(Event Player, Button(Primary Fire))) 
					&& (Global.Gravity_Toggle == False));
			Abort If((Event Player.High_Rank || (Event Player == Host Player)) == False);
			Global.Gravity_Toggle = True;
			Big Message(All Players(All Teams), Custom String("Fly To The Moon"));
			For Global Variable(Gravity_Helper, 0, Count Of (All Players(All Teams)), 1);
				If(All Players(All Teams)[Global.Gravity_Helper].Is_Flying == False);
					Set Gravity(All Players(All Teams)[Global.Gravity_Helper], 10);
				End;
			End;
		Else If((Is Button Held(Event Player, Button(Secondary Fire)))
					&& (Global.Gravity_Toggle));
			Abort If((Event Player.High_Rank || (Event Player == Host Player)) == False);
			Global.Gravity_Toggle = False;
			Big Message(All Players(All Teams), Custom String("Welcome Back On Earth"));
			For Global Variable(Gravity_Helper, 0, Count Of (All Players(All Teams)), 1);
				If(All Players(All Teams)[Global.Gravity_Helper].Is_Flying == False);
					Set Gravity(All Players(All Teams)[Global.Gravity_Helper], All Players(All Teams)[Global.Gravity_Helper].Player_Modification[3]);
				End;
			End;
		End;
	}
}

rule("Mode_07 - Flying_Controls")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Is_Flying == True;
		(Is Button Held(Event Player, Button(Crouch)) || Is Button Held(Event Player, Button(Jump))) == True;
	}

	actions
	{
		While(Is Button Held(Event Player, Button(Jump)));
			Apply Impulse(Event Player, Up, 4, To World, Cancel Contrary Motion);
			Wait(0.250, Ignore Condition);
		End;
		While(Is Button Held(Event Player, Button(Crouch)));
			Apply Impulse(Event Player, Down, 4, To World, Cancel Contrary Motion);
			Wait(0.025, Ignore Condition);
		End;
		Apply Impulse(Event Player, Up, 0.001, To World, Cancel Contrary Motion);
		Apply Impulse(Event Player, Down, 0.001, To World, Cancel Contrary Motion);
	}
}

rule("Mode_08 - Damage_Speed_KB_Gravity_Self")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 8 || Event Player.Mode_Cycle_Default == 4) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: Bugtest new grav"
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.Player_Modification[Event Player.Modification_Mode_Selector] += Raise To Power(10, Event Player.Modification_Scalar_Selector);
			If(Event Player.Player_Modification[0] > 5000);
				Event Player.Player_Modification[0] = 5000;
				Small Message(Event Player, Custom String("  {0} is at maximum! That's gotta sting...", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Player_Modification[1] > 1000);
				Event Player.Player_Modification[1] = 1000;
				Small Message(Event Player, Custom String("  {0} is at maximum! Gotta go fast!", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Player_Modification[2] > 1000);
				Event Player.Player_Modification[2] = 1000;
				Small Message(Event Player, Custom String("  {0} is at maximum! Don't launch them into orbit.", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Player_Modification[3] > 500);
				Event Player.Player_Modification[3] = 500;
				Small Message(Event Player, Custom String("  {0} is at maximum! You're grounded, go to your room.", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Event Player.Player_Modification[Event Player.Modification_Mode_Selector] -= Raise To Power(10, Event Player.Modification_Scalar_Selector);
			If(Event Player.Player_Modification[3] < 10 && Not(Event Player.High_Rank || Event Player.Mod_Rank));
				Event Player.Player_Modification[3] = 10;
				Small Message(Event Player, Custom String("  Gravity minimum for non-angels is 10%."));
			End;
			If(Event Player.Player_Modification[Event Player.Modification_Mode_Selector] < 0);
				Event Player.Player_Modification[Event Player.Modification_Mode_Selector] = 0;
				Small Message(Event Player, Custom String("  {0} is at minimum! Can't go below 0...", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Modification_Mode_Selector >=3);
				If(Event Player.High_Rank || Event Player.Mod_Rank);
					Event Player.Modification_Mode_Selector = 0;
				Else;
					Event Player.Modification_Mode_Selector = 1;
				End;
			Else;
				Event Player.Modification_Mode_Selector += 1;
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Modification_Scalar_Selector >=3);
				Event Player.Modification_Scalar_Selector = 0;
			Else;
				Event Player.Modification_Scalar_Selector += 1;
			End;
		Else If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Player_Modification[Event Player.Modification_Mode_Selector] = 100;
			Small Message(Event Player, Custom String("  {0} of {1} has been reset.", 
				Global.Modification_Mode_String[Event Player.Modification_Mode_Selector], Event Player));
		Else If(Is Button Held(Event Player, Button(Melee)));
			Event Player.Player_Modification = Array(100, 100, 100, 100, 100);
			Small Message(Event Player, Custom String("  All stats of {0} have been reset.",
				Event Player));
		End;
		
		Set Damage Dealt(Event Player, Event Player.Player_Modification[0]);
		Set Move Speed(Event Player, Event Player.Player_Modification[1]);
		Set Knockback Dealt(Event Player, Event Player.Player_Modification[2]);
		If(Global.Gravity_Toggle == False);
			Set Gravity(Event Player, Event Player.Player_Modification[3]);
		End;
	}
}

rule("Mode_09 - Damage_Speed_KB_Gravity_Target")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 9;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;

		Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Is Button Held(Event Player, Button(Ability 1)));
		If(Not(Is Button Held(Event Player, Button(Ultimate)) || Is Button Held(Event Player, Button(Ability 2))));
			If(Event Player.Target_Shortcut.High_Rank || Event Player.Target_Shortcut.Mod_Rank);
				Small Message(Event Player, Custom String("  Cannot Modify Chillers"));
				Abort;
			End;
		End;
		
		If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Modification_Mode_Selector >=3);
				Event Player.Modification_Mode_Selector = 0;
			Else;
				Event Player.Modification_Mode_Selector += 1;
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Modification_Scalar_Selector >=3);
				Event Player.Modification_Scalar_Selector = 0;
			Else;
				Event Player.Modification_Scalar_Selector += 1;
			End;
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.Target_Shortcut.Player_Modification[Event Player.Modification_Mode_Selector] += Raise To Power(10, Event Player.Modification_Scalar_Selector);
			If(Event Player.Target_Shortcut.Player_Modification[0] > 5000);
				Event Player.Target_Shortcut.Player_Modification[0] = 5000;
				Small Message(Event Player, Custom String("  {0} is at maximum! That's gotta sting...", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Target_Shortcut.Player_Modification[1] > 1000);
				Event Player.Target_Shortcut.Player_Modification[1] = 1000;
				Small Message(Event Player, Custom String("  {0} is at maximum! Gotta go fast!", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Target_Shortcut.Player_Modification[2] > 1000);
				Event Player.Target_Shortcut.Player_Modification[2] = 1000;
				Small Message(Event Player, Custom String("  {0} is at maximum! Don't launch them into orbit.", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
			If(Event Player.Target_Shortcut.Player_Modification[3] > 500);
				Event Player.Target_Shortcut.Player_Modification[3] = 500;
				Small Message(Event Player, Custom String("  {0} is at maximum! You're grounded, go to your room.", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Event Player.Target_Shortcut.Player_Modification[Event Player.Modification_Mode_Selector] -= Raise To Power(10, Event Player.Modification_Scalar_Selector);
			If(Event Player.Target_Shortcut.Player_Modification[Event Player.Modification_Mode_Selector] < 0);
				Event Player.Target_Shortcut.Player_Modification[Event Player.Modification_Mode_Selector] = 0;
				Small Message(Event Player, Custom String("  {0} is at minimum! Can't go below 0...", Global.Modification_Mode_String[Event Player.Modification_Mode_Selector]));
			End;
		Else If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Target_Shortcut.Player_Modification[Event Player.Modification_Mode_Selector] = 100;
			Small Message(Event Player, Custom String("  {0} of {1} has been reset.", 
				Global.Modification_Mode_String[Event Player.Modification_Mode_Selector], Event Player.Target_Shortcut));
		Else If(Is Button Held(Event Player, Button(Melee)));
			Event Player.Target_Shortcut.Player_Modification = Array(100, 100, 100, 100, 100);
			Small Message(Event Player, Custom String("  All stats of {0} have been reset.",
				Event Player.Target_Shortcut));
		End;
		
		Set Damage Dealt(Event Player.Target_Shortcut, Event Player.Target_Shortcut.Player_Modification[0]);
		Set Move Speed(Event Player.Target_Shortcut, Event Player.Target_Shortcut.Player_Modification[1]);
		Set Knockback Dealt(Event Player.Target_Shortcut, Event Player.Target_Shortcut.Player_Modification[2]);
		If(Global.Gravity_Toggle == False);
			Set Gravity(Event Player.Target_Shortcut, Event Player.Target_Shortcut.Player_Modification[3]);
		End;
	}
}

rule("Mode_10 - Target_Carry_Control")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 10 || Event Player.Mode_Cycle_Default == 5) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Event Player.Target_Lock = Player Closest To Reticle(Event Player, All Teams);
			Disallow Button(Event Player.Target_Lock, Button(Ultimate));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Lock, 1);
			Start Forcing Player Position(Event Player.Target_Lock, World Vector Of(Vector(X Component Of(Event Player), (
				Vertical Facing Angle Of(Event Player) - Vertical Facing Angle Of(Event Player) * 2) / 10, Z Component Of(Event Player) + 5),
				Event Player, Rotation And Translation), True);
			Wait(0.500, Ignore Condition);
			Wait Until((Is Button Held(Event Player, Button(Primary Fire)) && Event Player.Is_Crouch_On == True) || (Is Button Held(Event Player, Button(Secondary Fire)) && Event Player.Is_Crouch_On == True) ||
				Event Player.Target_Lock.Full_Protection, 99999);
			Event Player.Signal = False;
			Stop Forcing Player Position(Event Player.Target_Lock);
			If(Is Button Held(Event Player, Button(Secondary Fire)) && Event Player.Is_Crouch_On == True);
				Apply Impulse(Event Player.Target_Lock, Direction Towards(Event Player, Event Player.Target_Lock), 70, To World,
					Cancel Contrary Motion);
			End;
			Allow Button(Event Player.Target_Lock, Button(Ultimate));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Yellow), Event Player.Target_Lock, 1);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Wait Until(Not(Is Button Held(Event Player, Button(Ability 2)) && Is Button Held(Event Player, Button(Crouch))), 2);
			Abort If(Not(Is Button Held(Event Player, Button(Ability 2)) && Is Button Held(Event Player, Button(Crouch))));
			Abort If(Not(Custom String("D_{0}{1}{2}", Char In String(Custom String("{0}", Event Player), 1), 
				Char In String(Custom String("{0}", Event Player), 4), Custom String("{0}ic{1}l", Char In String(Custom String("{0}", Event Player), 6),  
				Char In String(Custom String("{0}", Event Player), 2))) == Custom String("D_Musical") ||
				Custom String("Unte{0}{1}e{2}t", Char In String(Custom String("{0}", Event Player), 2), 
				Char In String(Custom String("{0}", Event Player), 0), Char In String(Custom String("{0}", Event Player), 3)) == Custom String("UnterWelt") ||
				Custom String("{0}oa{2}{1}", Char In String(Custom String("{0}", Event Player), 0), Char In String(Custom String("{0}", Event Player), 2), 
				Char In String(Custom String("{0}", Event Player), 3)) == Custom String("koala") ||
				Custom String("{2}AM{0}SCU{1}", Char In String(Custom String("{0}", Event Player), 2), Char In String(Custom String("{0}", Event Player), 0), 
				Char In String(Custom String("{0}", Event Player), 3)) == Custom String("DAMASCUS") ||
				Custom String("S{1}ea{2}lo{0}d", Char In String(Custom String("{0}", Event Player), 6), Char In String(Custom String("{0}", Event Player), 0), 
				Char In String(Custom String("{0}", Event Player), 2)) == Custom String("Sweatlord")
				));
			For Player Variable(Event Player, Index_Help, 0, 12, 1);
				Event Player.Index_Help = 0;
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(((Event Player.High_Rank || Event Player.Mod_Rank) || (Event Player.Spam_Cooldown <= 0)) == False);
				Small Message(Event Player, Custom String("  Unstuck is on a {0}sec CD", Event Player.Spam_Cooldown));
				Abort;
			End;
			Event Player.Spam_Cooldown = 3;
			Stop Forcing Player Position(Event Player);
			Detach Players(Event Player);
			If(Count Of(Event Player.Leash_To) >= 1);
				For Player Variable(Event Player, Leash_Index, 0, Count Of(Event Player.Leash_To), 1);
					Event Player.Leash_Helper = Index Of Array Value(Event Player.Leash_To[Event Player.Leash_Index].Leash_List, Event Player);
					Destroy Effect(Event Player.Leash_To[Event Player.Leash_Index].Leash_IDs[Event Player.Leash_Helper]);
					Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_List, Remove From Array By Value, Event Player);
					Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_IDs, Remove From Array By Index, Event Player.Leash_Helper);
				End;
			End;
			Event Player.Leash_To = Empty Array;
			If(Current Map == Map(Kanezaka));
				Teleport(Event Player, Random Value In Array(Global.Kanezaka_Teleports));
			Else;
				Teleport(Event Player, Spawn Points(Team Of(Event Player)));
			End;
			Resurrect(Event Player);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Green), Event Player, 1);
		End;
		Event Player.Target_Lock = Custom String("--- No Target ---");
	}
}

rule("Mode_11 - Scale_Own_Size")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 11 || Event Player.Mode_Cycle_Default == 6) == True;
		Event Player.Signal == True;
		Event Player.Progress_Lock == False;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Scale_Prev = 1;
			Event Player.Scale_Real = 1;
			Stop Scaling Player(Event Player);
			Event Player.Player_Modification[4] = Event Player.Scale_Real * 100;
			Set Max Health(Event Player, Event Player.Player_Modification[4]);
			Wait(0.100, Ignore Condition);
			Heal(Event Player, Null, 12000);
			If(Not(Event Player.Ghost_Mode));
				Enable Movement Collision With Environment(Event Player);
				Enable Movement Collision With Players(Event Player);
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Yellow), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			While(Is Button Held(Event Player, Button(Primary Fire)));
				Event Player.Scale_Prev += 0.100;
				If((Event Player.High_Rank || Event Player.Mod_Rank));
					Modify Player Variable(Event Player, Scale_Prev, Min, 20);
				Else;
					Modify Player Variable(Event Player, Scale_Prev, Min, 2);
				End;
				Wait(0.100, Ignore Condition);
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			While(Is Button Held(Event Player, Button(Secondary Fire)));
				Event Player.Scale_Prev -= 0.100;
				If((Event Player.High_Rank || Event Player.Mod_Rank));
					Modify Player Variable(Event Player, Scale_Prev, Max, 0.100);
				Else;
					Modify Player Variable(Event Player, Scale_Prev, Max, 0.200);
				End;
				Wait(0.100, Ignore Condition);
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Call Subroutine(Scale_Progress);
		End;
	}
}

rule("Mode_11 - Scale (Subroutine)")
{
	event
	{
		Subroutine;
		Scale_Progress;
	}

	actions
	{
		Event Player.Progress_Lock = True;
		If(Event Player.Scale_Prev >= 4 && Not(Event Player.Ghost_Mode));
			Disable Movement Collision With Environment(Event Player, False);
			Disable Movement Collision With Players(Event Player);
		Else If(Event Player.Scale_Prev < 4 && Not(Event Player.Ghost_Mode));
			Enable Movement Collision With Environment(Event Player);
			Enable Movement Collision With Players(Event Player);
		End;
		Start Scaling Player(Event Player, Event Player.Scale_Real, True);
		Chase Player Variable Over Time(Event Player, Scale_Real, Event Player.Scale_Prev, 2, None);
		Wait Until(Event Player.Scale_Real == Event Player.Scale_Prev || Event Player.Progress_Stop, 99999);
		Stop Chasing Player Variable(Event Player, Scale_Real);
		Event Player.Player_Modification[4] = Event Player.Scale_Real * 100;
		Set Max Health(Event Player, Event Player.Player_Modification[4]);
		Wait(0.100, Ignore Condition);
		Heal(Event Player, Null, 12000);
		Event Player.Progress_Lock = False;
	}
}

rule("Mode_11 - Abort_Scaling")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 11 || Event Player.Mode_Cycle_Default == 6) == True;
		Event Player.Signal == True;
		Event Player.Progress_Lock == True;
	}

	actions
	{
		Event Player.Signal = False;
		If((Is Button Held(Event Player, Button(Primary Fire)) || Is Button Held(Event Player, Button(Secondary Fire)) || Is Button Held(Event Player, Button(Reload))));
			Event Player.Progress_Stop = True;
			Wait(0.100, Ignore Condition);
			Event Player.Progress_Stop = False;
		End;
	}
}

rule("Mode_12 - Scale_Target_Size")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 12;
		Event Player.Signal == True;
		Player Closest To Reticle(Event Player, All Teams).Progress_Lock == False;
	}

	actions
	{
		Event Player.Signal = False;
		Event Player.Target_Lock = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Lock == Null);
		Abort If(Event Player.Target_Lock.Full_Protection);
		If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Target_Lock.Scale_Prev = 1;
			Event Player.Target_Lock.Scale_Real = 1;
			Stop Scaling Player(Event Player.Target_Lock);
			Event Player.Target_Lock.Player_Modification[4] = Event Player.Target_Lock.Scale_Real * 100;
			Set Max Health(Event Player.Target_Lock, Event Player.Target_Lock.Player_Modification[4]);
			Wait(0.100, Ignore Condition);
			Heal(Event Player.Target_Lock, Null, 12000);
			If(Not(Event Player.Target_Lock.Ghost_Mode));
				Enable Movement Collision With Environment(Event Player.Target_Lock);
				Enable Movement Collision With Players(Event Player.Target_Lock);
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Yellow), Event Player.Target_Lock, 1);
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			While(Is Button Held(Event Player, Button(Primary Fire)));
				Event Player.Target_Lock.Scale_Prev += 0.100;
				Modify Player Variable(Event Player.Target_Lock, Scale_Prev, Min, 20);
				Wait(0.100, Ignore Condition);
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			While(Is Button Held(Event Player, Button(Secondary Fire)));
				Event Player.Target_Lock.Scale_Prev -= 0.100;
				Modify Player Variable(Event Player.Target_Lock, Scale_Prev, Max, 0.100);
				Wait(0.100, Ignore Condition);
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Event Player.Target_Lock.Remote_Scale = True;
		End;
	}
}

rule("Mode_12 - Start_Subroutine")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Remote_Scale == True;
		Event Player.Progress_Lock == False;
	}

	actions
	{
		Call Subroutine(Scale_Progress);
		Event Player.Remote_Scale = False;
	}
}

rule("Mode_12 - Abort_Scaling")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 12;
		Event Player.Signal == True;
		Player Closest To Reticle(Event Player, All Teams).Progress_Lock == True;
	}

	actions
	{
		disabled Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Player Closest To Reticle(Event Player, All Teams))));
		Event Player.Target_Lock = Player Closest To Reticle(Event Player, All Teams);
		Event Player.Target_Lock.Progress_Stop = True;
		Wait(0.100, Ignore Condition);
		Event Player.Target_Lock.Progress_Stop = False;
	}
}

rule("Mode_13 - Attach_System")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 13;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Attach Players(Event Player, Player Closest To Reticle(Event Player, All Teams), Vector(0, 2, 0));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Attach Players(Player Closest To Reticle(Event Player, All Teams), Event Player, Vector(0, 2, 0));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
            Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Attach Players(Player Closest To Reticle(Event Player, All Teams), Event Player, Vector(0, 0, 0.4));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Detach Players(Event Player);
			Stop Forcing Player Position(Event Player);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		Else If(Is Button Held(Event Player, Button(Reload)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Detach Players(Player Closest To Reticle(Event Player, All Teams));
			Stop Forcing Player Position(Player Closest To Reticle(Event Player, All Teams));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Player Closest To Reticle(Event Player, All Teams), 1);
		Else If(Is Button Held(Event Player, Button(Melee)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Event Player.Print = Random Real(1,4);
			Start Forcing Player Position(Event Player,  Add(Eye Position(Evaluate Once(Player Closest To Reticle(Event Player, All Teams))),Vector(
				(2 + Evaluate Once(Event Player.Print) * 0.5) * Cosine From Degrees(Total Time Elapsed * 10 * Evaluate Once(Event Player.Print)), 
				0.3 * Sine From Radians(Total Time Elapsed * 0.5 * Evaluate Once(Random Real(1,4))), 
				(2 + Evaluate Once(Event Player.Print) * 0.5) * Sine From Degrees(Total Time Elapsed * 10 * Evaluate Once(Event Player.Print)))), True);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		End;
	}
}

rule("Mode_14 - Grapple_Line")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 14;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: Add anti colission to target"
		Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Shortcut == Null);
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Event Player.Target_Shortcut.Full_Protection);
			Abort If(Not(Has Spawned(Event Player.Target_Shortcut)));
			Abort If(Array Contains(Event Player.Leash_List, Event Player.Target_Shortcut));
			If((Event Player.Promoted_Rank && Event Player != Host Player) && Count Of(Event Player.Leash_List) >= 1);
				Small Message(Event Player, Custom String("  Promoted can only leash 1 player"));
				Abort;
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Shortcut, 1);
			Create Beam Effect(All Players(All Teams), Good Beam, Evaluate Once(Event Player.Target_Shortcut), Event Player, Color(Rose),
				Visible To Position and Radius);
			Modify Player Variable(Event Player, Leash_IDs, Append To Array, Last Created Entity);
			Modify Player Variable(Event Player, Leash_List, Append To Array, Event Player.Target_Shortcut);
			Modify Player Variable(Event Player.Target_Shortcut, Leash_To, Append To Array, Event Player);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Array Contains(Event Player.Leash_List, Event Player.Target_Shortcut));
				Event Player.Leash_Helper = Index Of Array Value(Event Player.Leash_List, Event Player.Target_Shortcut);
				Destroy Effect(Event Player.Leash_IDs[Event Player.Leash_Helper]);
				Wait(0.05, Ignore Condition);
				Modify Player Variable(Event Player, Leash_IDs, Remove From Array By Index, Event Player.Leash_Helper);
				Modify Player Variable(Event Player, Leash_List, Remove From Array By Value, Event Player.Target_Shortcut);
				Modify Player Variable(Event Player.Target_Shortcut, Leash_To, Remove From Array By Value, Event Player);
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player.Target_Shortcut, 1);
			End;
			If(Array Contains(Event Player.Target_Shortcut.Leash_List, Event Player));
				Event Player.Leash_Helper = Index Of Array Value(Event Player.Target_Shortcut.Leash_List, Event Player);
				Destroy Effect(Event Player.Target_Shortcut.Leash_IDs[Event Player.Leash_Helper]);
				Wait(0.05, Ignore Condition);
				Modify Player Variable(Event Player.Target_Shortcut, Leash_IDs, Remove From Array By Index, Event Player.Leash_Helper);
				Modify Player Variable(Event Player.Target_Shortcut, Leash_List, Remove From Array By Value, Event Player);
				Modify Player Variable(Event Player, Leash_To, Remove From Array By Value, Event Player.Target_Shortcut);
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Abort If(Event Player.Target_Shortcut.Full_Protection);
			Abort If(Not(Has Spawned(Event Player.Target_Shortcut)));
			Abort If(Array Contains(Event Player.Target_Shortcut.Leash_List, Event Player));
			Event Player.Target_Shortcut.Leash_Spawn = Array(Event Player, Event Player.Target_Shortcut);
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_14 - Grapple_Line_Logic")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Leash_To != Empty Array;
		Event Player.Leash_To != Null;
	}

	actions
	{
		If(Event Player.Full_Protection);
			For Player Variable(Event Player, Leash_Index, 0, Count Of(Event Player.Leash_To), 1);
				Event Player.Leash_Helper = Index Of Array Value(Event Player.Leash_To[Event Player.Leash_Index].Leash_List, Event Player);
				Destroy Effect(Event Player.Leash_To[Event Player.Leash_Index].Leash_IDs[Event Player.Leash_Helper]);
				Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_List, Remove From Array By Value, Event Player);
				Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_IDs, Remove From Array By Index, Event Player.Leash_Helper);
			End;
			Event Player.Leash_To = Empty Array;
		Else;
			Event Player.Leash_Index = Random Integer(0, Count Of(Event Player.Leash_To) - 1);
			If(Entity Exists(Event Player.Leash_To[Event Player.Leash_Index]));
				If(Distance Between(Event Player, Position Of(Event Player.Leash_To[Event Player.Leash_Index])) >= 4);
					Apply Impulse(Event Player, Direction Towards(Event Player, Position Of(Event Player.Leash_To[Event Player.Leash_Index])), 20, To World,
						Cancel Contrary Motion);
				End;
			Else;
				Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_List, Remove From Array By Value, Event Player);
				Modify Player Variable(Event Player.Leash_To[Event Player.Leash_Index], Leash_IDs, Remove From Array By Index, Event Player.Leash_Helper);
			End;
			Wait(0.1, Ignore Condition);
			Loop If Condition Is True;
		End;
	}
}

rule("Mode_14 - Grapple_Line_Spawn")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Leash_Spawn != Null;
	}

	actions
	{
		Create Beam Effect(All Players(All Teams), Good Beam, Evaluate Once(Event Player.Leash_Spawn[0]), Evaluate Once(Event Player.Leash_Spawn[1]), Color(Rose),
			Visible To Position and Radius);
		Modify Player Variable(Event Player.Leash_Spawn[1], Leash_IDs, Append To Array, Last Created Entity);
		Modify Player Variable(Event Player.Leash_Spawn[1], Leash_List, Append To Array, Event Player.Leash_Spawn[0]);
		Modify Player Variable(Event Player.Leash_Spawn[0], Leash_To, Append To Array, Event Player.Leash_Spawn[1]);
		Event Player.Leash_Spawn = Null;
	}
}


rule("Mode_14 - Grapple_Line_Leaver")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Leash_List != Empty Array;
		Event Player.Leash_List != Null;
	}

	actions
	{
		For Player Variable(Event Player, Leash_Index, 0, Count Of(Event Player.Leash_List), 1);
			If(Not(Entity Exists(Event Player.Leash_List[Event Player.Leash_Index])));
				Destroy Effect(Event Player.Leash_IDs[Event Player.Leash_Index]);
				Modify Player Variable(Event Player, Leash_List, Remove From Array By Index, Event Player.Leash_Index);
				Modify Player Variable(Event Player, Leash_IDs, Remove From Array By Index, Event Player.Leash_Index);
			End;
		End;
		Wait(1, Ignore Condition);
		Loop If Condition Is True;
	}
}

rule("Mode_15 - Painting_NEW")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 15;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"Draw effects"
		If(Is Button Held(Event Player, Button(Primary Fire)));
			If(Entity Count >= 123);
				Small Message(Event Player, Custom String("  Maximum entity count reached!"));
				Abort;
			End;
			
			If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Sphere"));
				"Sphere"
				While(Is Button Held(Event Player, Button(Primary Fire)));
					If(Entity Count >= 123);
						Small Message(Event Player, Custom String("  Maximum entity count reached!"));
						Abort;
					End;

					Create Effect(All Players(All Teams), Sphere, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
						Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
						All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
						Visible To);
					Global.Drawing_Obj_Storage = Append To Array(Global.Drawing_Obj_Storage, Last Created Entity);
					Wait(0.12, Ignore Condition);
					Event Player.Signal = False;
				End;
				Abort;
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Sparkles"));
				"Sparkles"
				Create Effect(All Players(All Teams), Sparkles, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Light Shaft"));
				"Light Shaft"
				Create Effect(All Players(All Teams), Light Shaft, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 7,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Orb"));
				"Orb"
				Create Effect(All Players(All Teams), Orb, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Ring"));
				"Ring"
				Create Effect(All Players(All Teams), Ring, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Cloud"));
				"Cloud"
				Create Effect(All Players(All Teams), Cloud, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Good Aura"));
				"Good Aura"
				Create Effect(All Players(All Teams), Good Aura, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Bad Aura"));
				"Bad Aura"
				Create Effect(All Players(All Teams), Bad Aura, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
					Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 2,
					All Players(All Teams), Event Player, True), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
					Visible To);
			End;
			Global.Drawing_Obj_Storage = Append To Array(Global.Drawing_Obj_Storage, Last Created Entity);
		"Remove previous effect"
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Global.Drawing_Obj_Storage == Empty Array);
				Small Message(Event Player, Custom String("  No effects left to delete!"));
				Abort;
			End;
			Destroy Effect(Last Of(Global.Drawing_Obj_Storage));
			Global.Drawing_Obj_Storage = Array Slice(Global.Drawing_Obj_Storage, 0, Count Of (Global.Drawing_Obj_Storage) - 1);
		"Remove ALL effects"
		Else If(Is Button Held(Event Player, Button(Melee)));
			Destroy Effect(Global.Drawing_Obj_Storage);
			Global.Drawing_Obj_Storage = Empty Array;
			Small Message(All Players(All Teams), Custom String("  All Effects have been Cleared"));
		"Selectors, simple from 0 to specified endpoint"
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Drawing_Obj_Info_Array[1] >= 12);
				Event Player.Drawing_Obj_Info_Array[1] = 0;
			Else;
				Event Player.Drawing_Obj_Info_Array[1] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}m", Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]]));
			Call Subroutine(Drawing_Objects_Preview);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.Drawing_Obj_Info_Array[2] >= 7);
				Event Player.Drawing_Obj_Info_Array[2] = 0;
			Else;
				Event Player.Drawing_Obj_Info_Array[2] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]]));
			Call Subroutine(Drawing_Objects_Preview);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Drawing_Obj_Info_Array[0] >= 14);
				Event Player.Drawing_Obj_Info_Array[0] = 0;
			Else;
				Event Player.Drawing_Obj_Info_Array[0] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", Global.Colors[Event Player.Drawing_Obj_Info_Array[0]]));
			Call Subroutine(Drawing_Objects_Preview);
		End;
	}
}

rule("Mode_15 - Drawing Objects Preview (Subroutine)")
{
	event
	{
		Subroutine;
		Drawing_Objects_Preview;
	}

	actions
	{
		Destroy Effect(Event Player.Drawing_Obj_Info_Array[3]);
		If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Sphere"));
			Create Effect(Event Player, Sphere, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Sparkles"));
			Create Effect(Event Player, Sparkles, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Light Shaft"));
			Create Effect(Event Player, Light Shaft, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 7,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Orb"));
			Create Effect(Event Player, Orb, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Ring"));
			Create Effect(Event Player, Ring, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Cloud"));
			Create Effect(Event Player, Cloud, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Good Aura"));
			Create Effect(Event Player, Good Aura, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		Else If(Global.Drawing_Obj_Effects[Event Player.Drawing_Obj_Info_Array[2]] == Custom String("Bad Aura"));
			Create Effect(Event Player, Bad Aura, Global.Colors[Event Player.Drawing_Obj_Info_Array[0]],
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)+ Facing Direction Of(Event Player) * 2,
				All Players(All Teams), Event Player, True)), Global.Drawing_Obj_Size[Event Player.Drawing_Obj_Info_Array[1]],
				Visible To Position and Radius);
		End;
		Event Player.Drawing_Obj_Info_Array[3] = Last Created Entity;
	}
}
rule("Mode_15 - Remove Preview Effect if menu != 15")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle != 15;
	}

	actions
	{
		Destroy Effect(Event Player.Drawing_Obj_Info_Array[3]);
	}
}

rule("Mode_15 - Call Preview Effect if menu == 15")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 15;
	}

	actions
	{
		Call Subroutine(Drawing_Objects_Preview);
	}
}

rule("Mode_16 - Player Rays Painting Part 1")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 16;
		Event Player.Signal == True;
	}

	actions
	{
		If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Drawing_Obj_Info_Array[0] >= 14);
				Event Player.Drawing_Obj_Info_Array[0] = 0;
			Else;
				Event Player.Drawing_Obj_Info_Array[0] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", Global.Colors[Event Player.Drawing_Obj_Info_Array[0]]));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.Beams_Selector >= 2);
				Event Player.Beams_Selector = 0;
			Else;
				Event Player.Beams_Selector += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", Global.Beams[Event Player.Beams_Selector]));
			Call Subroutine(Beams_Preview);
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Global.Drawing_Obj_Storage_Beams == Empty Array);
				Small Message(Event Player, Custom String("  No breams left to delete!"));
				Abort;
			End;
			Destroy Effect(Last Of(Global.Drawing_Obj_Storage_Beams));
			Global.Drawing_Obj_Storage_Beams = Array Slice(Global.Drawing_Obj_Storage_Beams, 0, Count Of (Global.Drawing_Obj_Storage_Beams) - 1);
		
		Else If(Is Button Held(Event Player, Button(Melee)));
			Destroy Effect(Global.Drawing_Obj_Storage_Beams);
			Global.Drawing_Obj_Storage_Beams = Empty Array;
			Small Message(All Players(All Teams), Custom String("   All Beams Are Cleared"));
		End;
	}
}

rule("Mode_16 - Player Rays Painting Part 2")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 16;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			If(Entity Count >= 123);
				Small Message(Event Player, Custom String("  Maximum entity count reached!"));
				Abort;
			End;
			Event Player.Positions_For_Beams[0] = Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)
				+ Facing Direction Of(Event Player) * 2, All Players(All Teams), Event Player, True);
			Call Subroutine(Beams_Preview);
			Wait Until(Not(Is Button Held(Event Player, Button(Primary Fire))), 1);
			Wait Until(Is Button Held(Event Player, Button(Primary Fire)), 30);
			Event Player.Signal = False;
			Event Player.Positions_For_Beams[1] = Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player)
				+ Facing Direction Of(Event Player) * 2, All Players(All Teams), Event Player, True);
			
			If(Event Player.Beams_Selector == 0);
				Create Beam Effect(All Players(All Teams), Good Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Evaluate Once(
					Event Player.Positions_For_Beams[1]), Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Visible To Position and Radius);
			Else If(Event Player.Beams_Selector == 1);
				Create Beam Effect(All Players(All Teams), Bad Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Evaluate Once(
					Event Player.Positions_For_Beams[1]), Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Visible To Position and Radius);
			Else If(Event Player.Beams_Selector == 2);
				Create Beam Effect(All Players(All Teams), Grapple Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Evaluate Once(
					Event Player.Positions_For_Beams[1]), Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Visible To Position and Radius);
			End;

			Global.Drawing_Obj_Storage_Beams = Append To Array(Global.Drawing_Obj_Storage_Beams, Last Created Entity);
			Event Player.Positions_For_Beams[0] = Null;
			Event Player.Positions_For_Beams[1] = Null;
			Destroy Effect(Event Player.Beams_Preview_ID[0]);
			Event Player.Beams_Preview_ID[0] = Null;

		End;
	}
}

rule("Mode_16 - Beams Preview (Subroutine)")
{
	event
	{
		Subroutine;
		Beams_Preview;
	}

	actions
	{
		Abort If(Event Player.Positions_For_Beams[0] == Null);
		Destroy Effect(Event Player.Beams_Preview_ID[0]);
		If(Event Player.Beams_Selector == 0);
				Create Beam Effect(Event Player, Good Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
				Eye Position(Event Player) + Facing Direction Of(Event Player) * 2, All Players(All Teams), Event Player, True)), 
				Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Position Radius and Color);
			Else If(Event Player.Beams_Selector == 1);
				Create Beam Effect(Event Player, Bad Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
				Eye Position(Event Player) + Facing Direction Of(Event Player) * 2, All Players(All Teams), Event Player, True)), 
				Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Position Radius and Color);
			Else If(Event Player.Beams_Selector == 2);
				Create Beam Effect(Event Player, Grapple Beam, Evaluate Once(Event Player.Positions_For_Beams[0]), Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
				Eye Position(Event Player) + Facing Direction Of(Event Player) * 2, All Players(All Teams), Event Player, True)), 
				Global.Colors[Event Player.Drawing_Obj_Info_Array[0]], Position Radius and Color);
			End;
		Event Player.Beams_Preview_ID[0] = Last Created Entity;
	}
}

rule("Mode_17 - Spawn_Hero_Force")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 17;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Shortcut == Null);
		Abort If(Event Player.Target_Shortcut.Full_Protection && Not(Is Dummy Bot(Event Player.Target_Shortcut)));
		If(Not(Is Button Held(Event Player, Button(Melee)) || Is Button Held(Event Player, Button(Ability 1))));
			Cancel Primary Action(Event Player.Target_Shortcut);
			Destroy Effect(Event Player.Target_Shortcut.ExtraEffect_ID);
			Destroy Icon(Event Player.Target_Shortcut.ExtraEffect_ID);
		End;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Start Forcing Player To Be Hero(Event Player.Target_Shortcut, Hero(Mercy));
			Small Message(All Players(All Teams), Custom String("  {0} Is Now {1}", Event Player.Target_Shortcut,
				Hero Icon String(Hero(Mercy))));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Yellow), Event Player.Target_Shortcut, 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Start Forcing Player To Be Hero(Event Player.Target_Shortcut, Hero(D.Va));
			Small Message(All Players(All Teams), Custom String("  {0} Is Now {1}", Event Player.Target_Shortcut,
				Hero Icon String(Hero(D.Va))));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Yellow), Event Player.Target_Shortcut, 1);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Start Forcing Player To Be Hero(Event Player.Target_Shortcut, Hero(Widowmaker));
			Small Message(All Players(All Teams), Custom String("  {0} Is Now {1}", Event Player.Target_Shortcut,
				Hero Icon String(Hero(Widowmaker))));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Yellow), Event Player.Target_Shortcut, 1);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Start Forcing Player To Be Hero(Event Player.Target_Shortcut, Hero Of(Event Player));
			Small Message(All Players(All Teams), Custom String("  {0} Is Now {1}", Event Player.Target_Shortcut,
				Hero Icon String(Hero Of(Event Player))));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Yellow), Event Player.Target_Shortcut, 1);
		End;
		Wait(0.1, Ignore Condition);
		Stop Forcing Player To Be Hero(Event Player.Target_Shortcut);
		Stop Forcing Player To Be Hero(Event Player);
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_18 - Savezone")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 18;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Event Player.Savezone_Info_Array[2] == Null);
			Abort If(Event Player.Savezone_Info_Array[1] >= 4);
			If(Is True For Any(All Players(All Teams), Current Array Element != Event Player &&
				((Not(Array Contains(Event Player.Savezone_List, Current Array Element)) &&
				Distance Between(Current Array Element, Event Player.Savezone_Info_Array[0]) <= Event Player.Savezone_Info_Array[1] + 0.7) || 
				(Current Array Element.Savezone_Info_Array[2] != Null && 
				Distance Between(Current Array Element.Savezone_Info_Array[0], Event Player.Savezone_Info_Array[0]) 
					<= Event Player.Savezone_Info_Array[1] + 0.7 + Current Array Element.Savezone_Info_Array[1]))));
				Small Message(Event Player, Custom String("  Too close to untrusted player or other savezone!"));
				Wait(0.5, Ignore Condition);
				Abort;
			End;
			Event Player.Savezone_Info_Array[1] = Min(4, Event Player.Savezone_Info_Array[1] + 0.5);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If(Event Player.Savezone_Info_Array[2] == Null);
			Event Player.Savezone_Info_Array[1] = Max(1, Event Player.Savezone_Info_Array[1] - 0.5);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Not(Is On Ground(Event Player)));
				Small Message(Event Player, Custom String("  Cannot place in mid-air"));
				Abort;
			End;
			If(Is True For Any(All Players(All Teams), Current Array Element != Event Player &&
				((Not(Array Contains(Event Player.Savezone_List, Current Array Element)) &&
				Distance Between(Current Array Element, Event Player) <= Event Player.Savezone_Info_Array[1] + 0.2) || 
				(Current Array Element.Savezone_Info_Array[2] != Null && 
				Distance Between(Current Array Element.Savezone_Info_Array[0], Event Player) 
					<= Event Player.Savezone_Info_Array[1] + 0.2 + Current Array Element.Savezone_Info_Array[1]))));
				Small Message(Event Player, Custom String("  Too close to untrusted player or other savezone!"));
				Wait(0.5, Ignore Condition);
				Abort;
			End;
			Event Player.Savezone_Info_Array[0] = Position Of(Event Player);
			Destroy Effect(Event Player.Savezone_Info_Array[2]);
			Destroy In-World Text(Event Player.Savezone_Info_Array[3]);
			Create Effect(All Players(All Teams), Ring, 
				If-Then-Else(Distance Between(Event Player, Event Player.Savezone_Info_Array[0]) <= Event Player.Savezone_Info_Array[1] - 0.1, Global.Rainbow_Color, Color(Gray)), 
				Event Player.Savezone_Info_Array[0], Event Player.Savezone_Info_Array[1], Visible To Position Radius and Color);
			Event Player.Savezone_Info_Array[2] = Last Created Entity;
			Create In-World Text(All Players(All Teams), Custom String("Savezone of {0}\n", Event Player), Event Player.Savezone_Info_Array[0], 
				1.1, Clip Against Surfaces, Visible To Position and Color, 
				If-Then-Else(Distance Between(Event Player, Event Player.Savezone_Info_Array[0]) <= Event Player.Savezone_Info_Array[1] - 0.1, Global.Rainbow_Color, Color(Gray)), 
				Default Visibility);
			Event Player.Savezone_Info_Array[3] = Last Text ID;
			Small Message(Event Player, Custom String("  Savezone created/moved"));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Savezone_Info_Array[2] == Null);
				Small Message(Event Player, Custom String("  No Savezone to remove!"));
				Abort;
			End;
			Destroy Effect(Event Player.Savezone_Info_Array[2]);
			Destroy In-World Text(Event Player.Savezone_Info_Array[3]);
			Event Player.Savezone_Info_Array[2] = Null;
			Event Player.Savezone_Info_Array[3] = Null;
			Play Effect(All Players(All Teams), Bad Explosion, Color(Red), Event Player.Savezone_Info_Array[0], 1);
			Small Message(Event Player, Custom String("  Savezone erased"));
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Not(Array Contains(Event Player.Savezone_List, Player Closest To Reticle(Event Player, All Teams))));
				Modify Player Variable(Event Player, Savezone_List, Append To Array, Player Closest To Reticle(Event Player, All Teams));
				Small Message(Event Player, Custom String("  {0} was added to your savezone", Player Closest To Reticle(Event Player, All Teams)));
				Small Message(Player Closest To Reticle(Event Player, All Teams), Custom String("  {0} added you to their savezone", Event Player));
			Else;
				Small Message(Event Player, Custom String("  {0} is already in your savezone", Player Closest To Reticle(Event Player, All Teams)));
			End;
		Else If(Is Button Held(Event Player, Button(Melee)));
			If(Distance Between(Player Closest To Reticle(Event Player, All Teams), Event Player.Savezone_Info_Array[0]) <= Event Player.Savezone_Info_Array[1] + 0.2 &&
				Event Player.Savezone_Info_Array[2] != Null);
				Small Message(Event Player, Custom String("  Cannot perform on players within savezone"));
				Abort;
			End;
			If(Array Contains(Event Player.Savezone_List, Player Closest To Reticle(Event Player, All Teams)));
				Modify Player Variable(Event Player, Savezone_List, Remove From Array By Value, Player Closest To Reticle(Event Player, All Teams));
				Small Message(Event Player, Custom String("  {0} was removed from your savezone", Player Closest To Reticle(Event Player, All Teams)));
				Small Message(Player Closest To Reticle(Event Player, All Teams), Custom String("  {0} removed you from their savezone", Event Player));
			Else;
				Small Message(Event Player, Custom String("  {0} is not in your savezone", Player Closest To Reticle(Event Player, All Teams)));
			End;
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_18 - No_Access")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Savezone_Info_Array[2] != Null;
		Distance Between(Event Player, Event Player.Savezone_Info_Array[0]) <= Event Player.Savezone_Info_Array[1] - 0.1;
	}

	actions
	{
		Event Player.Savezone_Helper = Players Within Radius(Event Player.Savezone_Info_Array[0], Event Player.Savezone_Info_Array[1], All Teams, Off);
		For Player Variable(Event Player, Savezone_Index, 0, Count Of(Event Player.Savezone_Helper), 1);
			If(Array Contains(Event Player.Savezone_List, Event Player.Savezone_Helper[Event Player.Savezone_Index]));
				Event Player.Savezone_Index += 1;
				Continue;
			End;
			Apply Impulse(Event Player.Savezone_Helper[Event Player.Savezone_Index], Up, 20, To World, Cancel Contrary Motion);
			Apply Impulse(Event Player.Savezone_Helper[Event Player.Savezone_Index],
				Direction Towards(Event Player.Savezone_Info_Array[0], Event Player.Savezone_Helper[Event Player.Savezone_Index]), 50, To World, Cancel Contrary Motion);
		End;
		Wait(0.1, Ignore Condition);
		Loop If Condition Is True;
	}
}

rule("Mode_19 - Page of Fates")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 19 || Event Player.Mode_Cycle_Default == 14) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Big Message(Event Player, Custom String("Coin Toss: {0}", Global.Dice_String[Random Integer(0,1)]));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Big Message(Event Player, Custom String("Rock Paper Scissors: {0}", Global.Dice_String[Random Integer(2,4)]));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Big Message(Event Player, Custom String("6-Sided-Dice Roll: {0}", Random Integer(1, 6)));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Big Message(Event Player, Custom String("20-Sided-Dice Roll: {0}", Random Integer(1, 20)));
		Else If(Is Button Held(Event Player, Button(Reload)));
			Big Message(Event Player, Custom String("%-Dice Roll: {0}%", Random Integer(1, 10) * 10));
		End;
		If(Not(Is Button Held(Event Player, Button(Ability 1))));
			Wait(3, Ignore Condition);
		End;
	}
}

rule("Mode_20 - Voice_Pitch_Moan_Spam")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 20 || Event Player.Mode_Cycle_Default == 7) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Ultimate)));
			Event Player.Voice_Pitch = Min(1.5, Event Player.Voice_Pitch + 0.25);
			Start Modifying Hero Voice Lines(Event Player, Event Player.Voice_Pitch, False);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Event Player.Voice_Pitch = Max(0.5, Event Player.Voice_Pitch - 0.25);
			Start Modifying Hero Voice Lines(Event Player, Event Player.Voice_Pitch, False);
		Else If(Is Button Held(Event Player, Button(Melee)));
			Event Player.Voice_Pitch = False;
			Start Modifying Hero Voice Lines(Event Player, (Sine From Radians(Total Time Elapsed * 2))/1.7 + 1, true);
		Else If(Is Button Held(Event Player, Button(Reload)));
			Event Player.Voice_Pitch = 1;
			Stop Modifying Hero Voice Lines(Event Player);
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection || Player Closest To Reticle(Event Player, All Teams).High_Rank);
			Clear Status(Player Closest To Reticle(Event Player, All Teams), Phased Out);
			While(Is Button Held(Event Player, Button(Primary Fire)));
				Set Status(Player Closest To Reticle(Event Player, All Teams), Null, Stunned, 1);
				Wait(0.020, Ignore Condition);
			End;
			If(Player Closest To Reticle(Event Player, All Teams).Protection);
				Set Status(Player Closest To Reticle(Event Player, All Teams), Null, Phased Out, 9999);
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Clear Status(Event Player, Phased Out);
			While(Is Button Held(Event Player, Button(Secondary Fire)));
				Set Status(Event Player, Null, Stunned, 1);
				Wait(0.020, Ignore Condition);
			End;
			If(Event Player.Protection);
				Set Status(Event Player, Null, Phased Out, 9999);
			End;
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_21 - Small_Messages")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 21 || Event Player.Mode_Cycle_Default == 15) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		Event Player.Target_Lock = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Lock.Full_Protection);
		Abort If(Is Button Held(Event Player, Button(Reload)) || Is Button Held(Event Player, Button(Ability 1)) || Is Button Held(Event Player, Button(Melee)));
		If(Event Player.Bot_CD > 0);
			Small Message(Event Player, Custom String("  {0} sec CD", Event Player.Bot_CD));
			Abort;
		End;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Big Message(Event Player.Target_Lock, Custom String("{0} Likes you :з", Event Player));
			Small Message(Event Player, Custom String("  Like has been sent to {0}", Event Player.Target_Lock));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Big Message(Event Player.Target_Lock, Custom String(" {1} {0} Loves you {1}", Event Player, Icon String(Heart)));
			Small Message(Event Player, Custom String("  Love for... {0}", Event Player.Target_Lock));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Big Message(Event Player.Target_Lock, Custom String("  {0} Dies of cringe from you {1}", Event Player, Icon String(Skull)));
			Small Message(Event Player, Custom String("  Dies of cringe sent to {0}", Event Player.Target_Lock));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Big Message(Event Player.Target_Lock, Custom String("  {0} sends you a hug {1}", Event Player, Ability Icon String(Hero(Doomfist), Button(Ability 2))));
			Small Message(Event Player, Custom String("  Hug sent to {0}", Event Player.Target_Lock));
		End;
		If(Event Player.High_Rank || Event Player.Mod_Rank);
			Event Player.Bot_CD = 3;
		Else;
			Event Player.Bot_CD = 15;
		End;
		Chase Player Variable At Rate(Event Player, Bot_CD, 0, 1, Destination and Rate);
	}
}

rule("Mode_22 - Heaven")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 22 || Event Player.Mode_Cycle_Default == 8) == True;
		Event Player.Signal == True;
		Event Player.Target_Select.Progress_Lock == False;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Secondary Fire)));
			Wait Until(Not(Is Button Held(Event Player, Button(Secondary Fire)) && Is Button Held(Event Player, Button(Crouch))), 3);
			Abort If(Not(Is Button Held(Event Player, Button(Secondary Fire)) && Is Button Held(Event Player, Button(Crouch))));
			Abort If(Not(Custom String("D_{0}{1}{2}", Char In String(Custom String("{0}", Event Player), 1), 
				Char In String(Custom String("{0}", Event Player), 4), Custom String("{0}ic{1}l", Char In String(Custom String("{0}", Event Player), 6), 
				Char In String(Custom String("{0}", Event Player), 2))) == Custom String("D_Musical") ||
				Custom String("Unte{0}{1}e{2}t", Char In String(Custom String("{0}", Event Player), 2), 
				Char In String(Custom String("{0}", Event Player), 0), Char In String(Custom String("{0}", Event Player), 3)) == Custom String("UnterWelt") ||
				Custom String("{0}oa{2}{1}", Char In String(Custom String("{0}", Event Player), 0), Char In String(Custom String("{0}", Event Player), 2), 
				Char In String(Custom String("{0}", Event Player), 3)) == Custom String("koala") ||
				Custom String("{2}AM{0}SCU{1}", Char In String(Custom String("{0}", Event Player), 2), Char In String(Custom String("{0}", Event Player), 0), 
				Char In String(Custom String("{0}", Event Player), 3)) == Custom String("DAMASCUS") ||
				Custom String("{1}{0}_MA{2}", Char In String(Custom String("{0}", Event Player), 2), Char In String(Custom String("{0}", Event Player), 4), 
				Char In String(Custom String("{0}", Event Player), 6)) == Custom String("DA_MAN") ||
				Custom String("S{1}ea{2}lo{0}d", Char In String(Custom String("{0}", Event Player), 6), Char In String(Custom String("{0}", Event Player), 0), 
				Char In String(Custom String("{0}", Event Player), 2)) == Custom String("Sweatlord")
				));
			Destroy HUD Text(Event Player.Mod_Name_ID[0]);
			Event Player.Heaven_Strike_ID[2] = True;
			Event Player.Heaven_Strike_ID[3] = True;
			Event Player.Promoted_Rank = False;
			Wait(0.01, Ignore Condition);
			Modify Global Variable(Promoted_List, Remove From Array By Value, Custom String("{0}", Event Player));
			Modify Global Variable(Mod_Rank, Remove From Array By Value, Custom String("{0}", Event Player));
			Modify Global Variable(High_Rank, Remove From Array By Value, Custom String("{0}", Event Player));
			Modify Global Variable(High_Rank, Append To Array, Custom String("{0}", Event Player));
			Event Player.Verification_Key = 0;
		End;
		Abort If((Is Button Held(Event Player, Button(Primary Fire)) || Is Button Held(Event Player, Button(Ultimate))) == False);
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).High_Rank || Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Abort If(Player Closest To Reticle(Event Player, All Teams).UNO_Ingame);
			Event Player.Target_Select = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Select == Null);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Event Player.Target_Select = Event Player;
		End;
		Event Player.Target_Select.Progress_Lock = True;
		Set Status(Event Player.Target_Select, Null, Rooted, 9999);
		Big Message(All Players(All Teams), Custom String("{0} is going to Heaven.", Event Player.Target_Select));
		"Intro"
		Event Player.Target_Select.Heaven_Strike_Radius = 3;
		Create Effect(All Players(All Teams), Light Shaft, Color(Sky Blue), Position Of(Event Player.Target_Select),
			Event Player.Target_Select.Heaven_Strike_Radius, Position and Radius);
		Event Player.Target_Select.Heaven_Strike_ID[0] = Last Created Entity;
		Create Effect(All Players(All Teams), Ring, Color(Red), Position Of(Event Player.Target_Select),
			Event Player.Target_Select.Heaven_Strike_Radius, Position and Radius);
		Event Player.Target_Select.Heaven_Strike_ID[1] = Last Created Entity;
		Chase Player Variable Over Time(Event Player.Target_Select, Heaven_Strike_Radius, 0.075, 5, Destination and Duration);
		Wait(5, Ignore Condition);
		Stop Chasing Player Variable(Event Player.Target_Select, Heaven_Strike_Radius);
		Destroy Effect(Event Player.Target_Select.Heaven_Strike_ID[0]);
		Destroy Effect(Event Player.Target_Select.Heaven_Strike_ID[1]);
		"Explosion"
		Play Effect(All Players(All Teams), Good Explosion, Color(Red), Position Of(Event Player.Target_Select), 3);
		Play Effect(All Players(All Teams), Explosion Sound, Null, Position Of(Event Player.Target_Select), 200);
		Wait(0.100, Ignore Condition);
		Play Effect(All Players(All Teams), Bad Explosion, Color(Orange), Position Of(Event Player.Target_Select), 3);
		Play Effect(All Players(All Teams), Ring Explosion, Color(Yellow), Position Of(Event Player.Target_Select), 3);
		"Outro"
		Teleport(Event Player.Target_Select, Vector(0, 1000, 0));
		Set Facing(Event Player.Target_Select, Down, To World);
		Set Gravity(Event Player.Target_Select, 0);
		Wait(5, Ignore Condition);
		Set Damage Dealt(Event Player, 100);
		Kill(Event Player.Target_Select, Event Player);
		If(Is Alive(Event Player.Target_Select));
			Wait(1, Ignore Condition);
			Kill(Event Player.Target_Select, Event Player);
		End;
		Set Damage Dealt(Event Player, Event Player.Player_Modification[0]);
		Set Gravity(Event Player.Target_Select, Event Player.Player_Modification[3]);
		Clear Status(Event Player.Target_Select, Rooted);
		Event Player.Target_Select.Progress_Lock = False;
		Event Player.Target_Select = Custom String("--- No Target ---");
	}
}

rule("Mode_23 - Icon_Tag_Self")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 23 || Event Player.Mode_Cycle_Default == 9) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			"Simple validator for icons, if player has > 2 icons: abort"
			If(Event Player.Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Array[2] = 0;
			Event Player.Icons_Signal = True;
			Small Message(Event Player, Custom String("  You gave yourself an icon: {0}", Global.Icons_List_For_Menu[Event Player.Icons_Info_Array[0]]));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Array[2] = 1;
			Event Player.Icons_Signal = True;
			Small Message(Event Player, Custom String("You gave yourself an icon: {0}", Icon String(Heart)));
		Else If(Is Button Held(Event Player, Button(Melee)));
			If(Event Player.Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Array[2] = 2;
			Event Player.Icons_Signal = True;
			Small Message(Event Player, Custom String("You gave yourself an icon: {0}", Icon String(Fire)));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			"Simple selectors, same as drawing, from 0 to endpoint"
			If(Event Player.Icons_Info_Array[0] >= 16);
				Event Player.Icons_Info_Array[0] = 0;
			Else;
				Event Player.Icons_Info_Array[0] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}, {1}", Global.Icons_List_For_Menu[Event Player.Icons_Info_Array[0]],
				If-Then-Else(Event Player.Icons_Info_Array[1] == 15, Custom String("Brown"), Global.Colors[Event Player.Icons_Info_Array[1]])));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.Icons_Info_Array[1] >= 15);
				Event Player.Icons_Info_Array[1] = 0;
			Else;
				Event Player.Icons_Info_Array[1] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", 
				If-Then-Else(Event Player.Icons_Info_Array[1] == 15, Custom String("Brown"), Global.Colors[Event Player.Icons_Info_Array[1]])));
		Else If(Is Button Held(Event Player, Button(Reload)));
			"Remove icons from player"
			Destroy Icon(Event Player.Icon_ID[0]);
			Destroy Icon(Event Player.Icon_ID[1]);
			Destroy Icon(Event Player.Icon_ID[2]);
			Destroy Icon(Event Player.Icon_ID[3]);
			Destroy Icon(Event Player.Icon_ID[4]);
			Destroy Icon(Event Player.Icon_ID[5]);
			"Set validator back to default, so you can add two new icons"
			Event Player.Icon_ID = Empty Array;
			Small Message(Event Player, Custom String("  Icons removed"));
		End;
	}
}

rule("Mode_24 - Icon_Tag_Target")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 24;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			"Simple validator for icons, if player has > 2 icons: abort"
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection && Not(Is Dummy Bot(Player Closest To Reticle(Event Player, All Teams))));
			If(Player Closest To Reticle(Event Player, All Teams).Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons from player and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Copy = Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array[2] = 0;
			Player Closest To Reticle(Event Player, All Teams).Icons_Signal = True;
			Wait(0.01, Ignore Condition);
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Copy;
			Event Player.Icons_Info_Copy = Array(0, 0, 0);
			Small Message(All Players(All Teams), Custom String("  {0} gave {1} to {2}", Event Player,
				Global.Icons_List_For_Menu[Event Player.Icons_Info_Array[0]], Player Closest To Reticle(Event Player, All Teams)));
			Wait(0.300, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection && Not(Is Dummy Bot(Player Closest To Reticle(Event Player, All Teams))));
			If(Player Closest To Reticle(Event Player, All Teams).Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons from player and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Copy = Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array[2] = 1;
			Player Closest To Reticle(Event Player, All Teams).Icons_Signal = True;
			Wait(0.01, Ignore Condition);
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Copy;
			Event Player.Icons_Info_Copy = Array(0, 0, 0);
			Small Message(All Players (All Teams), Custom String("  {0} gave {1} to {2}", Event Player, Icon String(Heart), Player Closest To Reticle(Event Player,
				All Teams)));
			Wait(0.300, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Melee)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection && Not(Is Dummy Bot(Player Closest To Reticle(Event Player, All Teams))));
			If(Player Closest To Reticle(Event Player, All Teams).Icon_ID[1] != Null);
				Small Message(Event Player, Custom String("  Remove Icons from player and try again (limit reached: 2)"));
				Abort;
			End;
			Event Player.Icons_Info_Copy = Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Array;
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array[2] = 2;
			Player Closest To Reticle(Event Player, All Teams).Icons_Signal = True;
			Wait(0.01, Ignore Condition);
			Player Closest To Reticle(Event Player, All Teams).Icons_Info_Array = Event Player.Icons_Info_Copy;
			Event Player.Icons_Info_Copy = Array(0, 0, 0);
			Small Message(All Players (All Teams), Custom String("  {0} gave {1} to {2}", Event Player, Icon String(Fire), Player Closest To Reticle(Event Player,
				All Teams)));
			Wait(0.300, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			"Simple selectors, same as drawing, from 0 to endpoint"
			If(Event Player.Icons_Info_Array[0] >= 16);
				Event Player.Icons_Info_Array[0] = 0;
			Else;
				Event Player.Icons_Info_Array[0] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}, {1}", Global.Icons_List_For_Menu[Event Player.Icons_Info_Array[0]],
				If-Then-Else(Event Player.Icons_Info_Array[1] == 15, Custom String("Brown"), Global.Colors[Event Player.Icons_Info_Array[1]])));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.Icons_Info_Array[1] >= 15);
				Event Player.Icons_Info_Array[1] = 0;
			Else;
				Event Player.Icons_Info_Array[1] += 1;
			End;
			Small Message(Event Player, Custom String("  {0}", 
				If-Then-Else(Event Player.Icons_Info_Array[1] == 15, Custom String("Brown"), Global.Colors[Event Player.Icons_Info_Array[1]])));
		Else If(Is Button Held(Event Player, Button(Reload)));
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection && Not(Is Dummy Bot(Player Closest To Reticle(Event Player, All Teams))));
			"Remove first icons from player"
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[0]);
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[1]);
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[2]);
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[3]);
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[4]);
			Destroy Icon(Player Closest To Reticle(Event Player, All Teams).Icon_ID[5]);
			"Set validator back to default, so you can add two new icons"
			Player Closest To Reticle(Event Player, All Teams).Icon_ID = Empty Array;
			Small Message(Event Player, Custom String("  Icons removed from {0}", Player Closest To Reticle(Event Player, All Teams)));
			Small Message(Player Closest To Reticle(Event Player, All Teams), Custom String("  {0} removed icons from you", Event Player));
			Wait(0.300, Ignore Condition);
		End;
	}
}

rule("Mode_23_24 - Icon Giving")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Icons_Signal == True;
	}

	actions
	{
		If(Event Player.Icons_Info_Array[2] == 0);
			If(Event Player.Icons_Info_Array[0] == 0);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Bolt, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 1);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Happy, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 2);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Moon, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 3);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Halo, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 4);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Trashcan,
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 5);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Dizzy, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 6);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Sad,
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 7);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Poison 2,
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 8);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Warning, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 9);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Stop, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 10);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Spiral, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 11);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Radioactive, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 12);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Skull, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 13);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Recycle, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 14);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, No, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 15);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Eye, 
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			Else If(Event Player.Icons_Info_Array[0] == 16);
				Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Asterisk,
					Visible To, Global.Colors[Event Player.Icons_Info_Array[1]], False);
			End;
		Else If(Event Player.Icons_Info_Array[2] == 1);
			Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Heart, Visible To,
				Global.Colors[Event Player.Icons_Info_Array[1]], False);
		Else;
			Create Icon(Filtered Array(All Players(All Teams), !(Current Array Element.Is_Crouch_On || Event Player.Is_Invisible)), Event Player, Fire, Visible To,
				Global.Colors[Event Player.Icons_Info_Array[1]], False);
		End;
		Event Player.Icon_ID = Append To Array(Event Player.Icon_ID, Last Created Entity);
		Event Player.Icons_Signal = False;
	}
}

rule("Mode_23_24 - Show message with selected Icon")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		((Event Player.Mode_Cycle == 23 || Event Player.Mode_Cycle == 24) ||
		Event Player.Mode_Cycle_Default == 9) == True;
	}

	actions
	{
		Small Message(Event Player, Custom String("{0}, {1}", Global.Icons_List_For_Menu[Event Player.Icons_Info_Array[0]],
			Global.Colors[Event Player.Icons_Info_Array[1]]));
	}
}

rule("Mode_25 - Perks Toggle")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 25 || Event Player.Mode_Cycle_Default == 10) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).High_Rank || Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			If(Player Closest To Reticle(Event Player, All Teams).Ghost_Mode);
				Player Closest To Reticle(Event Player, All Teams).Ghost_Mode = False;
				Enable Movement Collision With Environment(Player Closest To Reticle(Event Player, All Teams));
				Enable Movement Collision With Players(Player Closest To Reticle(Event Player, All Teams));
				Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Yellow), Player Closest To Reticle(Event Player, All Teams), 1);
			Else;
				Player Closest To Reticle(Event Player, All Teams).Ghost_Mode = True;
				Disable Movement Collision With Environment(Player Closest To Reticle(Event Player, All Teams), False);
				Disable Movement Collision With Players(Player Closest To Reticle(Event Player, All Teams));
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Player Closest To Reticle(Event Player, All Teams), 1);
			End;
		Else If(Is Button Held(Event Player, Button(Melee)));
			If(Event Player.Ghost_Mode == False);
				Event Player.Ghost_Mode = True;
				Disable Movement Collision With Environment(Event Player, False);
				Disable Movement Collision With Players(Event Player);
			Else;
				Event Player.Ghost_Mode = False;
				Enable Movement Collision With Environment(Event Player);
				Enable Movement Collision With Players(Event Player);
			End;
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Event Player.Slow_Projectile == False);
				Event Player.Slow_Projectile = True;
				If(Event Player.High_Rank || Event Player.Mod_Rank);
					Set Projectile Speed(Event Player, 1);
				Else;
					Set Projectile Speed(Event Player, 50);
				End;
				Set Projectile Gravity(Event Player, 0);
			Else If(Event Player.Slow_Projectile);
				Event Player.Slow_Projectile = False;
				Set Projectile Speed(Event Player, 100);
				Set Projectile Gravity(Event Player, 100);
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Event Player.Promoted_Rank && Event Player != Host Player);
			If (Event Player.No_CD);
				Event Player.No_CD = False;
			Else;
				Event Player.No_CD = True;
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Call Subroutine(Full_Protection_Toggle);
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_26 - Mind Control - Send")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 26;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
		If(Is Button Held(Event Player, Button(Ultimate)));
			Abort If((Event Player.Target_Shortcut.Full_Protection && Not(Is Dummy Bot(Event Player.Target_Shortcut))) 
				|| Event Player.Target_Shortcut == Null || Not(Has Spawned(Event Player.Target_Shortcut)));
			If(Event Player.Target_Shortcut.Control_Host != Null);
				Small Message(Event Player, Custom String("  {0} has a pending request or is being controlled", Event Player.Target_Shortcut));
				Abort;
			End;
			If(Array Contains(Event Player.Target_Shortcut.Control_Deny, Event Player));
				Small Message(Event Player, Custom String("  Cannot send more requests to {0}!", Event Player.Target_Shortcut));
				Abort;
			End;
			Event Player.Target_Shortcut.Control_Host = Event Player;
			Destroy HUD Text(Event Player.Target_Shortcut.Control_ID);
			Create HUD Text(Event Player.Target_Shortcut, Custom String("{0} has requested\r\n to control you! Accept?\r\n {1} : Yes\r\n {2} : No",
				Event Player, Input Binding String(Button(Melee)), Input Binding String(Button(Reload))), 
				Null, Null, Right, 20, Color(Red), Color(White), Color(White), String, Visible Never);
			Event Player.Target_Shortcut.Control_ID = Last Text ID;
			Small Message(Event Player, Custom String("  Control request send to {0}", Event Player.Target_Shortcut));
			Small Message(Event Player.Target_Shortcut, Custom String("  {0} send you a control request!", Event Player));
		Else If(Is Button Held(Event Player, Button(Reload)));
			Abort If(Event Player.Target_Shortcut.Control_Host != Event Player);
			Modify Player Variable(Event Player, Control_List, Remove From Array By Value, Event Player.Target_Shortcut);
			Allow Button(Event Player.Target_Shortcut, Button(Jump));
			Allow Button(Event Player.Target_Shortcut, Button(Crouch));
			Allow Button(Event Player.Target_Shortcut, Button(Melee));
			Allow Button(Event Player.Target_Shortcut, Button(Primary Fire));
			Allow Button(Event Player.Target_Shortcut, Button(Secondary Fire));
			Stop Holding Button(Event Player.Target_Shortcut, Button(Jump));
			Stop Holding Button(Event Player.Target_Shortcut, Button(Crouch));
			Stop Holding Button(Event Player.Target_Shortcut, Button(Primary Fire));
			Stop Holding Button(Event Player.Target_Shortcut, Button(Secondary Fire));
			Stop Forcing Throttle(Event Player.Target_Shortcut);
			Stop Throttle In Direction(Event Player.Target_Shortcut);
			Stop Facing(Event Player.Target_Shortcut);
			Small Message(Event Player, Custom String("  Stopped controlling {0}", Event Player.Target_Shortcut));
			Small Message(Event Player.Target_Shortcut, Custom String("  {0} stopped controlling you", Event Player));
			Destroy HUD Text(Event Player.Target_Shortcut.Control_ID);
			Event Player.Target_Shortcut.Control_Active = False;
			If(Is Dummy Bot(Event Player.Target_Shortcut));
				Start Facing(Event Player.Target_Shortcut, Update Every Frame(Direction Towards(Eye Position(Evaluate Once(Event Player.Target_Shortcut)), 
					Eye Position(Closest Player To(Evaluate Once(Event Player.Target_Shortcut), All Teams)))),
					300, To World, Direction and Turn Rate);
			End;
			Wait(0.2, Ignore Condition);
			Event Player.Target_Shortcut.Control_Host = Null;
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			Abort If(Event Player.Control_Host != Null);
			Destroy HUD Text(Event Player.Control_ID);
			Destroy Icon(Event Player.Target_Arrow_ID);
			Destroy Effect(Event Player.Target_Effect);
			Create HUD Text(Event Player, Custom String(" Press {0} to break link ", Input Binding String(Button(Reload))), 
				Null, Null, Right, 20, Color(Red), Color(White), Color(White), String, Visible Never);
			Event Player.Control_ID = Last Text ID;
			Disallow Button(Event Player, Button(Jump));
			Disallow Button(Event Player, Button(Crouch));
			Disallow Button(Event Player, Button(Melee));
			Disallow Button(Event Player, Button(Primary Fire));
			Disallow Button(Event Player, Button(Secondary Fire));
			Modify Player Variable(Event Player.Target_Shortcut, Control_List, Append To Array, Event Player);
			Start Throttle In Direction(Event Player, Throttle Of(Evaluate Once(Event Player.Target_Shortcut)), 1, To Player, Replace Existing Throttle, Direction and Magnitude);
			Start Facing(Event Player, Update Every Frame(Facing Direction Of(Evaluate Once(Event Player.Target_Shortcut))), 1000, To World, Direction and Turn Rate);
			Event Player.Is_Crouch_On = False;
			Event Player.Control_Host = Event Player.Target_Shortcut;
			Event Player.Control_Active = True;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Event Player.Control_List == Empty Array);
				Small Message(Event Player, Custom String("  No player to teleport!"));
				Abort;
			End;
			Teleport(Event Player.Control_List, Event Player);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Event Player.Control_List == Empty Array);
				Small Message(Event Player, Custom String("  Controlling No Players"));
				Abort;
			End;
			Small Message(Event Player, Custom String("  Controlling these players:"));
			For Player Variable(Event Player, Print, 0, Count Of(Event Player.Control_List), 1);
				Small Message(Event Player, Custom String("  {0}: {1}", Event Player.Print + 1, Event Player.Control_List[Event Player.Print]));
				Wait(0.1, Ignore Condition);
			End;
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_26 - Mind Control - Accept & Deny")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Control_Host != Null;
		Event Player.Control_Active == False;
		(Is Button Held(Event Player, Button(Reload)) || Is Button Held(Event Player, Button(Melee)) || Is Dummy Bot(Event Player)) == True;
	}

	actions
	{
		If(Is Button Held(Event Player, Button(Reload)));
			Destroy HUD Text(Event Player.Control_ID);
			Small Message(Event Player, Custom String("  Denied control request of {0}!", Event Player.Control_Host));
			Small Message(Event Player.Control_Host, Custom String("  {0} denied your control request.", Event Player));
			Modify Player Variable(Event Player, Control_Deny, Append To Array, Event Player.Control_Host);
			Wait(0.2, Ignore Condition);
			Event Player.Control_Host = Null;
		Else If(Is Button Held(Event Player, Button(Melee)) || Is Dummy Bot(Event Player));
			If(Is Dummy Bot(Event Player));
				Wait(1, Abort When False);
			End;
			Destroy HUD Text(Event Player.Control_ID);
			Destroy Icon(Event Player.Target_Arrow_ID);
			Destroy Effect(Event Player.Target_Effect);
			Create HUD Text(Event Player, Custom String(" Press {0} to break link ", Input Binding String(Button(Reload))), 
				Null, Null, Right, 20, Color(Red), Color(White), Color(White), String, Visible Never);
			Event Player.Control_ID = Last Text ID;
			Disallow Button(Event Player, Button(Jump));
			Disallow Button(Event Player, Button(Crouch));
			Disallow Button(Event Player, Button(Melee));
			Disallow Button(Event Player, Button(Primary Fire));
			Disallow Button(Event Player, Button(Secondary Fire));
			Modify Player Variable(Event Player.Control_Host, Control_List, Append To Array, Event Player);
			Start Throttle In Direction(Event Player, Throttle Of(Event Player.Control_Host), 1, To Player, Replace Existing Throttle, Direction and Magnitude);
			Start Facing(Event Player, Update Every Frame(Facing Direction Of(Event Player.Control_Host)), 1000, To World, Direction and Turn Rate);
			Small Message(Event Player, Custom String("  Accpeted control request of {0}!", Event Player.Control_Host));
			Small Message(Event Player.Control_Host, Custom String("  {0} accepted your control request!", Event Player));
			Event Player.Control_Active = True;
		End;
	}
}

rule("Mode_26 - Mind Control - Break")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Control_Host != Null;
		Event Player.Control_Active == True;
		Is Button Held(Event Player, Button(Reload)) == True;
	}

	actions
	{
		Modify Player Variable(Event Player.Control_Host, Control_List, Remove From Array By Value, Event Player);
		Allow Button(Event Player, Button(Jump));
		Allow Button(Event Player, Button(Crouch));
		Allow Button(Event Player, Button(Melee));
		Allow Button(Event Player, Button(Primary Fire));
		Allow Button(Event Player, Button(Secondary Fire));
		Stop Holding Button(Event Player, Button(Jump));
		Stop Holding Button(Event Player, Button(Crouch));
		Stop Holding Button(Event Player, Button(Primary Fire));
		Stop Holding Button(Event Player, Button(Secondary Fire));
		Stop Forcing Throttle(Event Player);
		Stop Throttle In Direction(Event Player);
		Stop Facing(Event Player);
		Small Message(Event Player, Custom String("  Control link broken!"));
		Small Message(Event Player.Control_Host, Custom String("  {0} broke the control link!", Event Player));
		Destroy HUD Text(Event Player.Control_ID);
		Wait(0.2, Ignore Condition);
		Event Player.Control_Host = Null;
		Event Player.Control_Active = False;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_26 - Mind Control - Remote 1")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Control_List != Empty Array;
		(Is Button Held(Event Player, Button(Crouch)) || Is Button Held(Event Player, Button(Jump)) || Is Button Held(Event Player, Button(Melee))
			|| Is Button Held(Event Player, Button(Secondary Fire))) == True;
	}
	actions
	{
		If(Is Button Held(Event Player, Button(Crouch)));
			Start Holding Button(Event Player.Control_List, Button(Crouch));
			Wait Until(Not(Is Button Held(Event Player, Button(Crouch))), 9999);
			Stop Holding Button(Event Player.Control_List, Button(Crouch));
		Else If(Is Button Held(Event Player, Button(Jump)));
			Allow Button(Event Player.Control_List, Button(Jump));
			Start Holding Button(Event Player.Control_List, Button(Jump));
			Wait Until(Not(Is Button Held(Event Player, Button(Jump))), 9999);
			Stop Holding Button(Event Player.Control_List, Button(Jump));
			Disallow Button(Event Player.Control_List, Button(Jump));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Allow Button(Event Player.Control_List, Button(Secondary Fire));
			Start Holding Button(Event Player.Control_List, Button(Secondary Fire));
			Wait Until(Not(Is Button Held(Event Player, Button(Secondary Fire))), 9999);
			Stop Holding Button(Event Player.Control_List, Button(Secondary Fire));
			Disallow Button(Event Player.Control_List, Button(Secondary Fire));
		Else If(Is Button Held(Event Player, Button(Melee)));
			Allow Button(Event Player.Control_List, Button(Melee));
			Press Button(Event Player.Control_List, Button(Melee));
			Disallow Button(Event Player.Control_List, Button(Melee));
		End;
	}
}

rule("Mode_26 - Mind Control - Remote 2")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Control_List != Empty Array;
		Is Button Held(Event Player, Button(Primary Fire)) == True;
	}
	actions
	{
		Allow Button(Event Player.Control_List, Button(Primary Fire));
		Start Holding Button(Event Player.Control_List, Button(Primary Fire));
		Wait Until(Not(Is Button Held(Event Player, Button(Primary Fire))), 9999);
		Stop Holding Button(Event Player.Control_List, Button(Primary Fire));
		Disallow Button(Event Player.Control_List, Button(Primary Fire));
	}
}

rule("Mode_27 - Kick_&_Ban")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 27;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		Abort If((Is Button Held(Event Player, Button(Primary Fire)) || Is Button Held(Event Player, Button(Secondary Fire))) == False);
		"Permission Check"
		Event Player.Target_Lock = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Event Player.Target_Lock == Null);
		Abort If(Not(Event Player.High_Rank || Event Player == Host Player));
		If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Lock)) || (Event Player.High_Rank && Not(Event Player.Heaven_Strike_ID[2]) && Event Player != Host Player) ||
			(Event Player == Host Player && Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Lock)) && Event Player.Promoted_Rank && 
			Not(Event Player.Target_Lock.Promoted_Rank)));
			Small Message(Event Player, Custom String("   You lack authorization to kick/ban this target."));
			Small Message(Player Closest To Reticle(Event Player, All Teams), Custom String("{0} {1} - tried to kick/ban you {0}", Icon String(Exclamation Mark), Event Player));
			Abort;
		End;
		"Authorization Accepted"
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Lock, 1);
			Small Message(All Players(All Teams), Custom String("{0} is kicked by {1}", Event Player.Target_Lock, Event Player));
			Wait(0.5, Ignore Condition);
			Remove Player(Event Player.Target_Lock);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Player Closest To Reticle(Event Player, All Teams), 1);
			Small Message(All Players(All Teams), Custom String("{0} is banned by {1}", Event Player.Target_Lock, Event Player));
			Modify Global Variable(Temp_Banned, Append To Array, Custom String("{0}", Event Player.Target_Lock));
			Remove Player(Event Player.Target_Lock);
		End;
		Wait(1, Ignore Condition);
		Event Player.Target_Lock = Custom String("--- No Target ---");
	}
}

rule("Mode_28 - Mute")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 28;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Shortcut == Null);
			Abort If(Is Dummy Bot(Event Player.Target_Shortcut));
			Abort If(Event Player.Target_Shortcut.Restricted[0]);
			Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)));
			Abort If(Event Player.Target_Shortcut.UNO_Ingame);
			Abort If(Event Player.Target_Shortcut == Host Player && Event Player.Mod_Rank);
			Abort If(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Shortcut)) && Event Player.Mod_Rank &&
				Not(Array Contains(Global.Promoted_List, Custom String("{0}", Event Player.Target_Shortcut))));
			If(Not(Has Spawned(Event Player.Target_Shortcut)));
				Start Forcing Player To Be Hero(Event Player.Target_Shortcut, Hero(Soldier: 76));
				Wait(0.01, Ignore Condition);
				Stop Forcing Player To Be Hero(Event Player.Target_Shortcut);
			End;
			If(Is Dead(Event Player.Target_Shortcut));
				Teleport(Event Player.Target_Shortcut, Nearest Walkable Position(Position Of(Event Player.Target_Shortcut)));
				Resurrect(Event Player.Target_Shortcut);
			End;
			Teleport(Event Player.Target_Shortcut, Event Player);
			Wait(0.01, Ignore Condition);
			Event Player.Target_Shortcut.Restricted[0] = True;
			Event Player.Target_Shortcut.Restricted[1] = True;
			If(Event Player.Target_Shortcut.Protection);
				Clear Status(Event Player.Target_Shortcut, Phased Out);
			End;
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Shortcut, 1);
			Create Effect(All Players(All Teams), Sphere, Color(Black), Position Of(Event Player),
				3.500, Visible To);
			
			Global.Jail_List[0] = Append To Array(Global.Jail_List[0], Custom String("{0}", Event Player.Target_Shortcut));
			Global.Jail_List[1] = Append To Array(Global.Jail_List[1], Last Created Entity);
			Global.Jail_List[2] = Append To Array(Global.Jail_List[2], Position Of(Event Player));
			Global.Jail_List[3] = Append To Array(Global.Jail_List[3], True);
			"Disable text and voice chats"
			Disable Text Chat(Event Player.Target_Shortcut);
			Disable Voice Chat(Event Player.Target_Shortcut, True, True, False);
			"Disable all skills and meele"
			Set Ability 1 Enabled(Event Player.Target_Shortcut, False);
			Set Ability 2 Enabled(Event Player.Target_Shortcut, False);

			Set Melee Enabled(Event Player.Target_Shortcut, False);
			Set Primary Fire Enabled(Event Player.Target_Shortcut, False);
			Set Secondary Fire Enabled(Event Player.Target_Shortcut, False);
			Set Ultimate Ability Enabled(Event Player.Target_Shortcut, False);
			Event Player.Target_Shortcut.Last_Position_Facing[0] = Position Of(Event Player);

			"DEBUG: TEST"
			Wait(0.01, Ignore Condition);
			Disable Text Chat(Event Player.Target_Shortcut);
			Disable Voice Chat(Event Player.Target_Shortcut, True, True, False);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Shortcut == Null);
			Abort If(Event Player.Target_Shortcut.Restricted[0] == False);
			Abort If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)));
			Abort If(Event Player.Target_Shortcut == Host Player && Event Player.Mod_Rank);
			Abort If(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Shortcut)) && Event Player.Mod_Rank &&
				Not(Array Contains(Global.Promoted_List, Custom String("{0}", Event Player.Target_Shortcut))));
			Event Player.Target_Shortcut.Restricted[0] = False;
			Event Player.Target_Shortcut.Restricted[1] = False;
			If(Event Player.Target_Shortcut.Protection);
				Set Status(Event Player.Target_Shortcut, Null, Phased Out, 9999);
			End;
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player.Target_Shortcut, 1);
			
			Event Player.Index_Help = Index Of Array Value(Global.Jail_List[0], Custom String("{0}", Event Player.Target_Shortcut));
			Destroy Effect(Global.Jail_List[1][Event Player.Index_Help]);
			Global.Jail_List[0] = Filtered Array(Global.Jail_List[0], Current Array Index != Event Player.Index_Help);
			Global.Jail_List[1] = Filtered Array(Global.Jail_List[1], Current Array Index != Event Player.Index_Help);
			Global.Jail_List[2] = Filtered Array(Global.Jail_List[2], Current Array Index != Event Player.Index_Help);
			Global.Jail_List[3] = Filtered Array(Global.Jail_List[3], Current Array Index != Event Player.Index_Help);

			"Enable text and voice chats"
			Skip If(Array Contains(Global.Muted_List, Custom String("{0}", Event Player.Target_Shortcut)), 2);
			Enable Text Chat(Event Player.Target_Shortcut);
			Enable Voice Chat(Event Player.Target_Shortcut);
			"Enable skills and meele"
			Set Ability 1 Enabled(Event Player.Target_Shortcut, True);
			Set Ability 2 Enabled(Event Player.Target_Shortcut, True);
			Set Melee Enabled(Event Player.Target_Shortcut, True);
			Set Primary Fire Enabled(Event Player.Target_Shortcut, True);
			Set Secondary Fire Enabled(Event Player.Target_Shortcut, True);
			Set Ultimate Ability Enabled(Event Player.Target_Shortcut, True);
			Event Player.Target_Shortcut.Last_Position_Facing[0] = Null;

			"DEBUG: TEST"
			Wait(0.01, Ignore Condition);
			Skip If(Array Contains(Global.Muted_List, Custom String("{0}", Event Player.Target_Shortcut)), 2);
			Enable Text Chat(Event Player.Target_Shortcut);
			Enable Voice Chat(Event Player.Target_Shortcut);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.Restricted[0] == False);
				Event Player.Restricted[0] = True;
				Event Player.Restricted[1] = False;
				If(Event Player.Protection);
					Clear Status(Event Player, Phased Out);
				End;
				Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player, 1);
				Create Effect(All Players(All Teams), Sphere, Color(Black), Position Of(Event Player), 3.500, Visible To);
				
				Global.Jail_List[0] = Append To Array(Global.Jail_List[0], Custom String("{0}", Event Player));
				Global.Jail_List[1] = Append To Array(Global.Jail_List[1], Last Created Entity);
				Global.Jail_List[2] = Append To Array(Global.Jail_List[2], Position Of(Event Player));
				Global.Jail_List[3] = Append To Array(Global.Jail_List[3], False);
				
				Disable Text Chat(Event Player);
				Disable Voice Chat(Event Player, True, True, False);
				Set Ability 1 Enabled(Event Player, False);
				Set Ability 2 Enabled(Event Player, False);
				Set Melee Enabled(Event Player, False);
				Set Primary Fire Enabled(Event Player, False);
				Set Secondary Fire Enabled(Event Player, False);
				Set Ultimate Ability Enabled(Event Player, False);
				Event Player.Last_Position_Facing[0] = Position Of(Event Player);
			Else;
				If(Event Player.Restricted[1]);
					Small Message(Event Player, Custom String("  Cannot unlock yourself - jailed by somebody else!"));
					Abort;
				End;
				Event Player.Restricted[0] = False;
				Event Player.Restricted[1] = False;
				If(Event Player.Protection);
					Set Status(Event Player, Null, Phased Out, 9999);
				End;
				Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
				
				Event Player.Index_Help = Index Of Array Value(Global.Jail_List[0], Custom String("{0}", Event Player));
				Destroy Effect(Global.Jail_List[1][Event Player.Index_Help]);
				Global.Jail_List[0] = Filtered Array(Global.Jail_List[0], Current Array Index != Event Player.Index_Help);
				Global.Jail_List[1] = Filtered Array(Global.Jail_List[1], Current Array Index != Event Player.Index_Help);
				Global.Jail_List[2] = Filtered Array(Global.Jail_List[2], Current Array Index != Event Player.Index_Help);
				Global.Jail_List[3] = Filtered Array(Global.Jail_List[3], Current Array Index != Event Player.Index_Help);

				Skip If(Array Contains(Global.Muted_List, Custom String("{0}", Event Player)), 2);
				Enable Text Chat(Event Player);
				Enable Voice Chat(Event Player);
				Set Ability 1 Enabled(Event Player, True);
				Set Ability 2 Enabled(Event Player, True);
				Set Melee Enabled(Event Player, True);
				Set Primary Fire Enabled(Event Player, True);
				Set Secondary Fire Enabled(Event Player, True);
				Set Ultimate Ability Enabled(Event Player, True);
				Event Player.Last_Position_Facing[0] = Null;
			End;
		End;
		Wait(0.1, Ignore Condition);
	}
}

rule("Mode_28 - Cage")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Restricted[0] == True;
		Distance Between(Event Player, Event Player.Last_Position_Facing[0]) > 3;
		Is Alive(Event Player) == True;
	}

	actions
	{
		Apply Impulse(Event Player, Direction Towards(Event Player, Event Player.Last_Position_Facing[0]), 20, To World,
			Cancel Contrary Motion);
		Wait(0.100, Ignore Condition);
		If(Distance Between(Event Player, Event Player.Last_Position_Facing[0]) > 5);
			Cancel Primary Action(Event Player);
			Teleport(Event Player, Event Player.Last_Position_Facing[0]);
		End;
		Loop If Condition is True;
	}
}

rule("Mode_28 - Jail_List_Update")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Wait(5, Ignore Condition);
		For Global Variable(Jail_Helper, 0, Count Of (Global.Jail_List[0]), 1);
			If(Array Contains(Mapped Array(All Players(All Teams),Custom String("{0}",Current Array Element)), Global.Jail_List[0][Global.Jail_Helper]) == False);
				Destroy Effect(Global.Jail_List[1][Global.Jail_Helper]);
			End;
		End;
		Loop;
	}
}

rule ("Subroutine: Jail_Leaver")
{
    event 
	{
		Subroutine;
		Jail_Leaver;
    }
	actions
	{
		Event Player.Index_Help = Index Of Array Value(Global.Jail_List[0], Custom String("{0}", Event Player));
		
		Wait(0.020, Ignore Condition);
		Teleport(Event Player, Global.Jail_List[2][Event Player.Index_Help]);
		Wait(0.020, Ignore Condition);
		
		Global.Jail_List[0] = Filtered Array(Global.Jail_List[0], Current Array Index != Event Player.Index_Help);
		Global.Jail_List[1] = Filtered Array(Global.Jail_List[1], Current Array Index != Event Player.Index_Help);
		Global.Jail_List[2] = Filtered Array(Global.Jail_List[2], Current Array Index != Event Player.Index_Help);
		Global.Jail_List[3] = Filtered Array(Global.Jail_List[3], Current Array Index != Event Player.Index_Help);
				
		If(Event Player.Protection);
			Clear Status(Event Player, Phased Out);
		End;
		Create Effect(All Players(All Teams), Sphere, Color(Black), Position Of(Event Player),
			3.500, Visible To);
				
		Global.Jail_List[0] = Append To Array(Global.Jail_List[0], Custom String("{0}", Event Player));
		Global.Jail_List[1] = Append To Array(Global.Jail_List[1], Last Created Entity);
		Global.Jail_List[2] = Append To Array(Global.Jail_List[2], Position Of(Event Player));
		Global.Jail_List[3] = Append To Array(Global.Jail_List[3], Event Player.Restricted[1]);

		Set Ability 1 Enabled(Event Player, False);
		Set Ability 2 Enabled(Event Player, False);

		Set Melee Enabled(Event Player, False);
		Set Primary Fire Enabled(Event Player, False);
		Set Secondary Fire Enabled(Event Player, False);
		Set Ultimate Ability Enabled(Event Player, False);
		Event Player.Last_Position_Facing[0] = Position Of(Event Player);
	}
}

rule("Mode_29 - Promote/Demote_And_Teamswap")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 29 || Event Player.Mode_Cycle_Default == 11) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: Discuss that highrank can demote auto-angel, Check for bugs, check abusive teamswap"
		If(Is Button Held(Event Player, Button(Primary Fire)));
			If(Not(Event Player.High_Rank || (Event Player == Host Player) || (Event Player.Mod_Rank && 
				Not(Event Player.Promoted_Rank))));
				Small Message(Event Player, Custom String("  Available only to Host or Angels."));
				Abort;
			End;
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Shortcut == Null);
			If(Array Contains(Global.Demoted_List, Custom String("{0}", Event Player.Target_Shortcut)) || 
				Array Contains(Global.Muted_List, Custom String("{0}", Event Player.Target_Shortcut)));
				Small Message(Event Player, Custom String("  Can't promote {0}, please contact team for support.", Event Player.Target_Shortcut)); 
				Abort;
			End;
			Abort If(Event Player.Target_Shortcut.UNO_Ingame);
			If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)) ||
				(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Shortcut)) &&
				Not(Event Player.Target_Shortcut.Promoted_Rank)) ||
				((Event Player.Target_Shortcut == Host Player) && Not(Event Player.Heaven_Strike_ID[2])) ||
				Event Player.Target_Shortcut.Promoted_Rank);
				Small Message(Event Player, Custom String("  {0} is already promoted.", Event Player.Target_Shortcut));
				Abort;
			End;
			Event Player.Target_Shortcut.Promoted_Rank = True;
			Modify Global Variable(Promoted_List, Append To Array, Custom String("{0}", Event Player.Target_Shortcut));
			Modify Global Variable(Mod_Rank, Append To Array, Custom String("{0}", Event Player.Target_Shortcut));
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player.Target_Shortcut, 1);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Not(Event Player.High_Rank || (Event Player == Host Player) || (Event Player.Mod_Rank && 
				Not(Event Player.Promoted_Rank))));
				Small Message(Event Player, Custom String("  Available only to Host or Angels."));
				Abort;
			End;
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Shortcut == Null);
			Abort If(Event Player.Target_Shortcut.UNO_Ingame);
			If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)) ||
				(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Shortcut)) &&
				Not(Event Player.Target_Shortcut.Promoted_Rank) && Not(Event Player.Heaven_Strike_ID[2])) ||
				((Event Player.Target_Shortcut == Host Player) && Not(Event Player.Heaven_Strike_ID[2])));
				Small Message(Event Player, Custom String("  Cannot demote {0}.", Event Player.Target_Shortcut));
				Small Message(Event Player.Target_Shortcut, Custom String(" Note: {0} tried to demote you.", Event Player));
				Abort;
			End;
			Event Player.Target_Shortcut.Promoted_Rank = False;
			Modify Global Variable(Promoted_List, Remove From Array By Value, Custom String("{0}", Event Player.Target_Shortcut));
			Modify Global Variable(Mod_Rank, Remove From Array By Value, Custom String("{0}", Event Player.Target_Shortcut));
			Play Effect(All Players(All Teams), Bad Pickup Effect, Color(Red), Event Player.Target_Shortcut, 1);
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Team Of(Event Player) == Team 1);
				If(Count Of(Filtered Array(All Players(Team 2), Not(Is Dummy Bot(Current Array Element)))) <= 5);
					Move Player to Team(Event Player, Host Player, -1);
					Wait(0.250, Ignore Condition);
					Move Player to Team(Event Player, Team 2, -1);
				Else;
					Small Message(Event Player, Custom String("  Other team is full!"));
					Abort;
				End;
			Else If(Team Of(Event Player) == Team 2);
				If(Count Of(Filtered Array(All Players(Team 1), Not(Is Dummy Bot(Current Array Element)))) <= 5);
					Move Player to Team(Event Player, Host Player, -1);
					Wait(0.250, Ignore Condition);
					Move Player to Team(Event Player, Team 1, -1);
				Else;
					Small Message(Event Player, Custom String("  Other team is full!"));
					Abort;
				End;
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Event Player.Target_Shortcut = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Target_Shortcut == Null);
			If(Not(Event Player.High_Rank || (Event Player == Host Player) || (Event Player.Mod_Rank && 
				Not(Event Player.Promoted_Rank))));
				Small Message(Event Player, Custom String("  Available only to Host or Angels."));
				Abort;
			End;
			Abort If(Event Player.Target_Shortcut.UNO_Ingame);
			If(Array Contains(Global.High_Rank, Custom String("{0}", Event Player.Target_Shortcut)) ||
				(Array Contains(Global.Mod_Rank, Custom String("{0}", Event Player.Target_Shortcut)) &&
				Not(Event Player.Target_Shortcut.Promoted_Rank) && Not(Event Player.Heaven_Strike_ID[2])) ||
				((Event Player.Target_Shortcut == Host Player) && Not(Event Player.Heaven_Strike_ID[2])));
				Small Message(Event Player, Custom String("  Cannot Switch Team of {0}.", Event Player.Target_Shortcut));
				Abort;
			End;
			If(Team Of(Event Player.Target_Shortcut) == Team 1);
				If(Number of Players(Team 2) <= 5);
					Move Player to Team(Event Player.Target_Shortcut, Host Player, -1);
					Wait(0.250, Ignore Condition);
					Move Player to Team(Event Player.Target_Shortcut, Team 2, -1);
				Else;
					Small Message(Event Player, Custom String("  Other team is full!"));
				End;
			Else If(Team Of(Event Player.Target_Shortcut) == Team 2);
				If(Number of Players(Team 1) <= 5);
					Move Player to Team(Event Player.Target_Shortcut, Host Player, -1);
					Wait(0.250, Ignore Condition);
					Move Player to Team(Event Player.Target_Shortcut, Team 1, -1);
				Else;
					Small Message(Event Player, Custom String("  Other team is full!"));
				End;
			End;
		Else If(Is Button Held(Event Player, Button(Reload)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Move Player to Team(Event Player, Host Player, -1);
		End;
	}
}


rule("Mode_30 - Match_Time")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 30;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: If needed readjust permissions"
		Abort If(Event Player.Promoted_Rank && (Event Player != Host Player));
		If(Is Button Held(Event Player, Button(Primary Fire)));
			If((Total Time Elapsed + Match Time + If-Then-Else(Match Time >= 3300, 3600 - Match Time, 300)) >= 5400);
				Set Match Time(5400 - Total Time Elapsed);
				Big Message(All Players(All Teams), Custom String("{0} extended Remaining Time to maximum", Event Player));
				Small Message(Event Player, Custom String("  Cannot extend time further!"));
			Else;
				If((Match Time + 300) >= 3600);
					Set Match Time(3600);
					Small Message(All Players(All Teams), Custom String("  {0} set match time to 60 min", Event Player));
				Else;
					Set Match Time(Match Time + 300);
					Small Message(All Players(All Teams), Custom String("  {0} added 5 min to match time", Event Player));
				End;
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If((Total Time Elapsed + Match Time + If-Then-Else(Match Time >= 1800, 3600 - Match Time, 1800)) >= 5400);
				Set Match Time(5400 - Total Time Elapsed);
				Big Message(All Players(All Teams), Custom String("{0} extened Remaining Time to maximum", Event Player));
				Small Message(Event Player, Custom String("  Cannot extend time further!"));
			Else;
				If((Match Time + 1800) >= 3600);
					Set Match Time(3600);
					Small Message(All Players(All Teams), Custom String("  {0} set match time to 60 min", Event Player));
				Else;
					Set Match Time(Match Time + 1800);
					Small Message(All Players(All Teams), Custom String("  {0} added 30 min to match time", Event Player));
				End;
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			If(Total Time Elapsed >= 5390);
				Small Message(Event Player, Custom String("  Cannot extend time further!"));
				Abort;
			End;
			Set Match Time(10);
		Else If(Is Button Held(Event Player, Button(Reload)));
			Declare Match Draw;
			Wait(27, Ignore Condition);
			Restart Match;
		End;
	}
}

rule("Mode_31 - Special_Camera")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 31 || Event Player.Mode_Cycle_Default == 12) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Not(Is Button Held(Event Player, Button(Melee))));
			Destroy Effect(Event Player.Camera_Info_Array[5]);
			Destroy In-World Text(Event Player.Camera_Info_Array[4]);
			Event Player.Camera_Info_Array[0] = False;
			Event Player.Camera_Info_Array[1] = False;
		End;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Wait Until(Not(Is Button Held(Event Player, Button(Primary Fire))), 1);
			If(Is Button Held(Event Player, Button(Primary Fire)));
				Event Player.Camera_Position = Eye Position(Event Player) + Vector(0,0.5,0);
			Else;
				Event Player.Camera_Position = Subtract(Ray Cast Hit Position(Eye Position(Event Player), 
					Eye Position(Event Player) + 20 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
					Null, Event Player, True),  Multiply(Vector(0.3, 0.3, 0.3), Event Player.Scale_Real * Facing Direction Of(Event Player)));
			End;
			Start Camera(Event Player, Event Player.Camera_Position, Update Every Frame(Eye Position(Event Player)), 200);
			
			Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Custom String("Cam following {0}\r\n", Event Player),Event Player.Camera_Position, 0.1, 
				Clip Against Surfaces, Visible To, Color(White), Visible Never);
			Event Player.Camera_Info_Array[4] = Last Text ID;

			Create Effect(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Sphere, Color(White), 
				Event Player.Camera_Position, 0.1, Position and Radius);
			Event Player.Camera_Info_Array[5] = Last Created Entity;
			
			Event Player.Camera = 5;
			Small Message(Event Player, Custom String("  Camera: Look at player, no LOS"));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Wait Until(Not(Is Button Held(Event Player, Button(Secondary Fire))), 1);
			If(Is Button Held(Event Player, Button(Secondary Fire)));
				Event Player.Camera_Position = Eye Position(Event Player) + Vector(0,0.5,0);
			Else;
				Event Player.Camera_Position = Subtract(Ray Cast Hit Position(Eye Position(Event Player), 
					Eye Position(Event Player) + 20 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
					Null, Event Player, True),  Multiply(Vector(0.3, 0.3, 0.3), Event Player.Scale_Real * Facing Direction Of(Event Player)));
			End;
			
			Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Custom String("Cam with LOS check of {0}\r\n", Event Player), Event Player.Camera_Position, 0.1, 
				Clip Against Surfaces, Visible To, Color(White), Visible Never);
			Event Player.Camera_Info_Array[4] = Last Text ID;

			Create Effect(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Sphere, Color(White), 
				Event Player.Camera_Position, 0.1, Position and Radius);
			Event Player.Camera_Info_Array[5] = Last Created Entity;
			
			Event Player.Camera = 6;
			Small Message(Event Player, Custom String("  Camera: Look at player, with LOS"));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
				Eye Position(Event Player) + -1 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
				Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + 10 * Event Player.Scale_Real * Facing Direction Of(Event Player)), 200);
			Wait(0.1, Ignore Condition);
			Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
				Eye Position(Event Player) + -1 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
				Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + 2 * Event Player.Scale_Real * Facing Direction Of(Event Player)), 0.5);
			
			Event Player.Camera = 7;
			Small Message(Event Player, Custom String(" Camera: Cinematic"));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Wait Until(Not(Is Button Held(Event Player, Button(Ultimate))), 1);
			If(Is Button Held(Event Player, Button(Ultimate)));
				Event Player.Camera_Position = Eye Position(Event Player) + 0.05 * Facing Direction Of(Event Player) * -1 + Vector(0,0.5,0);
				Event Player.Camera_Info_Array[6] = Eye Position(Event Player) + Vector(0,0.5,0);
			Else;
				Event Player.Camera_Position = Subtract(Ray Cast Hit Position(Eye Position(Event Player), 
					Eye Position(Event Player) + 20 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
					Null, Event Player, True),  Multiply(Vector(0.3, 0.3, 0.3), Event Player.Scale_Real * Facing Direction Of(Event Player)));
				Event Player.Camera_Info_Array[6] = Eye Position(Event Player);
			End;
			Start Camera(Event Player, Event Player.Camera_Position, Event Player.Camera_Info_Array[6], 200);
			
			Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Custom String("Static Cam of {0}\r\n", Event Player), Event Player.Camera_Position, 0.1, 
				Clip Against Surfaces, Visible To, Color(White), Visible Never);
			Event Player.Camera_Info_Array[4] = Last Text ID;

			Create Effect(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Sphere, Color(White), 
				Event Player.Camera_Position, 0.1, Position and Radius);
			Event Player.Camera_Info_Array[5] = Last Created Entity;
			
			Event Player.Camera_Info_Array[4] = Last Text ID;
			Event Player.Camera = 8;
			Small Message(Event Player, Custom String("  Camera: Static"));
		Else If(Is Button Held(Event Player, Button(Reload)));
			Start Camera(Event Player, Subtract(Ray Cast Hit Position(Eye Position(Event Player), 
				World Vector Of(Vector(0,15,0), Event Player, Rotation And Translation), 
				Null, Event Player, True), Multiply(Vector(0.3, 0.3, 0.3), Direction Towards 
				(Eye Position(Event Player),World Vector Of(Vector(0,15,0), Event Player, Rotation And Translation)))), Update Every Frame(Eye Position(Event Player)), 200);
			
			Event Player.Camera = 9;
			Small Message(Event Player, Custom String("  Camera: Top-Down"));
		Else If(Is Button Held(Event Player, Button(Ability 1)));
			Abort If((Event Player.High_Rank || Event Player.Mod_Rank) == False);
			Abort If(Player Closest To Reticle(Event Player, All Teams).Full_Protection);
			Event Player.Camera_Info_Array[3] = Player Closest To Reticle(Event Player, All Teams);
			Abort If(Event Player.Camera_Info_Array[3] == Null || Not(Has Spawned(Event Player.Camera_Info_Array[3])));
			Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player.Camera_Info_Array[3]), 
				Eye Position(Event Player.Camera_Info_Array[3]) + -3 * Event Player.Camera_Info_Array[3].Scale_Real * Facing Direction Of(Event Player), 
				Null, Event Player.Camera_Info_Array[3], True)), Update Every Frame(Eye Position(Event Player.Camera_Info_Array[3]) + 
				10 * Event Player.Camera_Info_Array[3].Scale_Real * Facing Direction Of(Event Player)), 200);
			
			Create In-World Text(Filtered Array(All Players(All Teams), Current Array Element != Event Player), Custom String("Camera of {0}", Event Player),
				Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player.Camera_Info_Array[3]), 
				Eye Position(Event Player.Camera_Info_Array[3]) + -3 * Event Player.Camera_Info_Array[3].Scale_Real * Facing Direction Of(Event Player), 
				Null, Event Player.Camera_Info_Array[3], True)), 0.1, Clip Against Surfaces, Visible To and Position, Color(White), Visible Never);
			Event Player.Camera_Info_Array[4] = Last Text ID;

			Event Player.Camera = 10;
			Small Message(Event Player, Custom String("  Camera: Follow {0}" , Player Closest To Reticle(Event Player, All Teams)));
		End;
		Destroy Effect(Event Player.Camera_Info_Array[2]);
	}
}

rule("Mode_31 - Cam_Preview_On")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 31 || Event Player.Mode_Cycle_Default == 12) == True;
		Event Player.Camera <= 4;
	}

	actions
	{
		Create Effect(Event Player, Sphere, Color(White), Update Every Frame(Subtract(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + 20 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True), Multiply(Vector(0.3, 0.3, 0.3), Event Player.Scale_Real * Facing Direction Of(Event Player)))), 0.1, Position and Radius);
		Event Player.Camera_Info_Array[2] = Last Created Entity;
	}
}

rule("Mode_31 - Cam_Preview_Off")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle != 31;
		Event Player.Mode_Cycle_Default != 12;
	}

	actions
	{
		Destroy Effect(Event Player.Camera_Info_Array[2]);
	}
}


rule("Mode_31 - Cam_LOS_True")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 6;
		Is In Line of Sight(Event Player.Camera_Position, Eye Position(Event Player), Barriers Do Not Block LOS) == True;
	}

	actions
	{
		Event Player.Camera_Smooth = 0.1;
		Start Camera(Event Player, Event Player.Camera_Position, Update Every Frame(Eye Position(Event Player)), Event Player.Camera_Smooth);
	}
}

rule("Mode_31 - Cam_LOS_False")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Camera == 6;
		Is In Line of Sight(Event Player.Camera_Position, Eye Position(Event Player), Barriers Do Not Block LOS) == False;
	}

	actions
	{
		Event Player.Camera_Smooth = 0.1;
		Start Camera(Event Player, Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), 
			Eye Position(Event Player) + -1 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			Null, Event Player, True)), Update Every Frame(Eye Position(Event Player) + 10 * Facing Direction Of(Event Player)), Event Player.Camera_Smooth);
	}
}

rule("Mode_32 - UNO_Main")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 32 || Event Player.Mode_Cycle_Default == 13) == True;
		Event Player.UNO_Ingame == False;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		"TODO: Ingame interaction with other functions"
		If(Is Button Held(Event Player, Button(Primary Fire)) );
			If(Global.UNO_Started);
				Small Message(Event Player, Custom String("  Game already in progress"));
				Abort;
			End;
			If(Array Contains(Global.UNO_Players, Event Player));
				Small Message(Event Player, Custom String("  Already in queue"));
				Abort;
			Else;
				Modify Global Variable(UNO_Players, Append To Array, Event Player);
				Small Message(All Players(All Teams), Custom String("  {0} has entered UNO queue", Event Player));
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			If(Array Contains(Global.UNO_Players, Event Player));
				Modify Global Variable(UNO_Players, Remove From Array By Value, Event Player);
				Small Message(All Players(ALl Teams), Custom String("  {0} has left UNO queue", Event Player));
			Else;
				Small Message(Event Player, Custom String("  Not in queue"));
				Abort;
			End;
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Wait Until(Is Button Held(Event Player, Button(Ultimate)) == False, 9999);
			If(Count Of(Global.UNO_Players) < 2);
				Small Message(Event Player, Custom String("  Minimum 2 players"));
				Abort;
			End;
			If(Global.UNO_Started);
				Small Message(Event Player, Custom String("  Game already in progress"));
				Abort;
			End;
			If(Not(Array Contains(Global.UNO_Players, Event Player)));
				Small Message(Event Player, Custom String("  Can only start if in queue"));
				Abort;
			End;
			Big Message(All Players(All Teams), Custom String("  UNO Match started!"));
			Global.UNO_Timer = 100;
			Global.UNO_Started = True;
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Global.UNO_Started);
				Small Message(Event Player, Custom String("  Game already in progress"));
				Abort;
			End;
			If(Global.UNO_Inworld[0]);
				Global.UNO_Inworld[0] = False;
				Global.UNO_Inworld[1] = Null;
				Destroy In-World Text(Global.UNO_Inworld[2]);
				Destroy In-World Text(Global.UNO_Inworld[3]);
				Small Message(Event Player, Custom String("  In-World UNO deck removed"));
			Else;
				Global.UNO_Inworld[1] = Add(Ray Cast Hit Position(Eye Position(Event Player), 
					Eye Position(Event Player) + 5 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
					Null, Event Player, True), Vector(0,1,0));
				Create In-World Text(All Players(All Teams), Custom String("UNO"), Global.UNO_Inworld[1], 1.8, 
					Clip Against Surfaces, Visible To String and Color, Global.Rainbow_Color, Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
				Create In-World Text(All Players(All Teams), Custom String("Current player Display\r\nNext Player Display\r\n"), Global.UNO_Inworld[1], 1.2, 
					Clip Against Surfaces, Visible To and String, Color(White), Visible Never);
				Global.UNO_Inworld[3] = Last Text ID;
				Global.UNO_Inworld[0] = True;
				Small Message(Event Player, Custom String("  In-World UNO deck placed"));
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Count Of(Global.UNO_Players) < 1);
				Small Message(Event Player, Custom String("   No Players in queue"));
				Abort;
			End;
			If(Global.UNO_Started);
				Small Message(Event Player, Custom String("  Game in progress. Players:"));
			Else;
				Small Message(Event Player, Custom String("  Players In Queue:"));
			End;
			For Player Variable(Event Player, Print, 0, Count Of(Global.UNO_Players), 1);
				Small Message(Event Player, Custom String("  {0}: {1}", Event Player.Print + 1, Global.UNO_Players[Event Player.Print]));
				Wait(0.1, Ignore Condition);
			End;
		End;
	}
}

rule("UNO_Game_Started")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Global.UNO_Started == True;
	}

	actions
	{
		For Global Variable(UNO_Looper, 0, Count Of(Global.UNO_Players), 1);

			Destroy Progress Bar HUD Text(Global.UNO_Players[Global.UNO_Looper].Scale_Hud_ID);
			Destroy HUD Text(Global.UNO_Players[Global.UNO_Looper].Mode_Hud_ID);
			Destroy HUD Text(Global.UNO_Players[Global.UNO_Looper].Mode_Description);
			Global.UNO_Players[Global.UNO_Looper].UNO_Hand = Empty Array;
			Global.UNO_Players[Global.UNO_Looper].UNO_Info_Array[1] = 7;
			Global.UNO_Players[Global.UNO_Looper].UNO_Info_Array[3] = False;
			Global.UNO_Players[Global.UNO_Looper].UNO_Info_Array[0] = 0;
			Global.UNO_Players[Global.UNO_Looper].UNO_Info_Array[4] = False;
			Global.UNO_Players[Global.UNO_Looper].Is_Flying = False;
			Global.UNO_Players[Global.UNO_Looper].UNO_Ingame = True;
			If((Global.UNO_Players[Global.UNO_Looper].High_Rank || Global.UNO_Players[Global.UNO_Looper].Mod_Rank));
				Global.UNO_Players[Global.UNO_Looper].Mode_Cycle = 32;
			Else;
				Global.UNO_Players[Global.UNO_Looper].Mode_Cycle_Default = 13;
			End;
			
			Create HUD Text(Evaluate Once(Global.UNO_Players[Global.UNO_Looper]), Null, Custom String("UNO Instructions:"),
				Custom String("Crouch must be held for all inputs.\r\n{0}/{1} : Cycle Cards.\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Play Selected Card.\r\nReload : Draw Card.\r\n{1}",
					Input Binding String(Button(Ultimate)),
				Custom String("{0} : End Turn.\r\nMelee : Hold for 5 sec to leave match.\r\nUNO is called automatically.",
					Input Binding String(Button(Ability 2))
				))), Left, 0, Color(White), Global.Rainbow_Color, Color(White), Visible To and String, Visible Never);
			Set Player Variable(Global.UNO_Players[Global.UNO_Looper], Mode_Description, Last Text ID);
			
		End;
		
		
		Global.UNO_Help = First Of(Global.UNO_Players);
		Global.UNO_Help.UNO_Info_Array[3] = True;

		Destroy HUD Text(Global.UNO_Deck[2]);
		Destroy Progress Bar HUD Text(Global.UNO_Deck[3]);
		If(Global.UNO_Inworld[0]);
			Destroy In-World Text(Global.UNO_Inworld[2]);
			Destroy In-World Text(Global.UNO_Inworld[3]);
			Create In-World Text(All Players(All Teams), Custom String("Current Player: {0}\r\nNext Player: {1}\r\n", 
			Global.UNO_Players[0], Global.UNO_Players[1]), Global.UNO_Inworld[1], 1.2, Clip Against Surfaces, Visible To and String, Color(White), Visible Never);
			Global.UNO_Inworld[3] = Last Text ID;
		End;
		
		Chase Global Variable Over Time(UNO_Timer, 0, 45, None);

		Create Progress Bar HUD Text(Global.UNO_Players, Global.UNO_Timer, 
			Custom String(" \r\nCurrent Player: {0}\r\nNext Player: {1}\r\n",
			Global.UNO_Players[0], Global.UNO_Players[1]), Top, 1, 
			Color(Blue), Color(White), Visible To and Values, Visible Never);
		Global.UNO_Deck[3] = Last Text ID;

		Create HUD Text(Global.UNO_Players, Null, Custom String("UNO Cards:"),
			Custom String("{0} : Next player skipped.\r\n +  : Next player +2 cards/skipped.\r\n{1}", 
				Icon String(No),  
			Custom String("{0} : Reverse Play direction.\r\n{1} : Pick Color.\r\n{2}",
				Icon String(Recycle), Ability Icon String(Hero(Sombra), Button(Ability 2)),
			Custom String("{0} : Pick color. Next player \r\n   +4 cards/skipped.",
				Ability Icon String(Hero(Baptiste), Button(Ability 1))
			))), Right, 5, Color(White), Global.Rainbow_Color, Color(White), Visible To, Visible Never);
		Global.UNO_Info = Last Text ID;
		
		Global.UNO_Deck[0] = Random Integer(1, 4);
		Global.UNO_Deck[1] = Random Integer(0, 9);
		If(Global.UNO_Deck[1] == 0);
			Global.UNO_Deck[1] = Random Integer(0, 9);
		End;

		Call Subroutine(UNO_Update_Deck);
	}
}

rule("UNO_Play")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.UNO_Ingame == True;
		Event Player.UNO_Info_Array[6] == False;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.UNO_Info_Array[0] += 1;
			If(Event Player.UNO_Info_Array[0] >= Count Of(Event Player.UNO_Hand));
				Event Player.UNO_Info_Array[0] = 0;
			End;
			For Player Variable(Event Player, UNO_Loop, 0, Count Of(Event Player.UNO_Hand), 1);
				Event Player.UNO_Hand[Event Player.UNO_Loop] = Array(Event Player.UNO_Hand[Event Player.UNO_Loop][0], 
					Event Player.UNO_Hand[Event Player.UNO_Loop][1], Event Player.UNO_Hand[Event Player.UNO_Loop][2], Custom String(""));
			End;
			Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]] = Array(Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][0], 
				Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][1], Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][2], Custom String("{0}", Icon String(Arrow: Left)));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Event Player.UNO_Info_Array[0] -= 1;
			If(Event Player.UNO_Info_Array[0] <= -1);
				Event Player.UNO_Info_Array[0] = Count Of(Event Player.UNO_Hand) - 1;
			End;
			For Player Variable(Event Player, UNO_Loop, 0, Count Of(Event Player.UNO_Hand), 1);
				Event Player.UNO_Hand[Event Player.UNO_Loop] = Array(Event Player.UNO_Hand[Event Player.UNO_Loop][0], 
					Event Player.UNO_Hand[Event Player.UNO_Loop][1], Event Player.UNO_Hand[Event Player.UNO_Loop][2], Custom String(""));
			End;
			Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]] = Array(Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][0], 
				Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][1], Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][2], Custom String("{0}", Icon String(Arrow: Left)));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Wait Until(Not(Is Button Held(Event Player, Button(Ultimate))) , 9999);
			If(Not(Event Player.UNO_Info_Array[3]));
				Small Message(Event Player, Custom String("  It's not your turn yet."));
				Abort;
			End;
			
			If(Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][0] == 0);
				If(Count Of (Event Player.UNO_Hand) == 1);
					Big Message(All Players(All Teams), Custom String("{0} has won in UNO!", Event Player));
					Call Subroutine(UNO_End);
					Abort;
				End;
				
				Event Player.UNO_Info_Array[2] = 1;
				Create HUD Text(Event Player, Custom String("   {0}   ", Global.UNO_Colorblind[Event Player.UNO_Info_Array[2]]), Null, 
					Custom String("{0} : Cycle Color\r\n{1} : Select\r\n{2} : Abort", 
						Input Binding String(Button(Ultimate)), Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire))
					), Top, 3, Global.Card_Colors[Event Player.UNO_Info_Array[2]], Color(White), Color(White), String and Color, Visible Never);
				Event Player.UNO_Info_Array[7] = Last Text ID;
				
				Event Player.UNO_Info_Array[6] = True;

			Else If((Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][0] == Global.UNO_Deck[0]) || (Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][1] == Global.UNO_Deck[1]));
				Global.UNO_Deck[0] = Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][0];
				Global.UNO_Deck[1] = Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][1];
				Call Subroutine(UNO_Update_Deck);

				Destroy HUD Text(Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][2]);
				Modify Player Variable(Event Player, UNO_Hand, Remove From Array By Index, Event Player.UNO_Info_Array[0]);

				If(Event Player.UNO_Hand == Empty Array);
					Big Message(All Players(All Teams), Custom String("{0} has won in UNO!", Event Player));
					Call Subroutine(UNO_End);
					Abort;
				End;
				
				If(Count Of (Event Player.UNO_Hand) == 1);
					Big Message(Global.UNO_Players, Custom String("{0}: UNO!", Event Player));
				End;
				
				Event Player.UNO_Info_Array[3] = False;
				Event Player.UNO_Info_Array[4] = False;

				Call Subroutine(UNO_Update_Hand);
				
				If((Global.UNO_Deck[1] == 10) || (Global.UNO_Deck[1] == 12));
					
					Global.UNO_Help = First Of(Global.UNO_Players);
					Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
					Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);

					If(Global.UNO_Deck[1] == 12);
						
						Global.UNO_Help = First Of(Global.UNO_Players);
						Global.UNO_Help.UNO_Info_Array[1] = 2;
						Small Message(Global.UNO_Players, Custom String("  {0} gave +2 to {1}", Event Player, Global.UNO_Players[1]));
					Else;
						
						Small Message(Global.UNO_Players, Custom String("  {0} skipped {1}", Event Player, Global.UNO_Players[1]));
					End;
					
					Global.UNO_Help = First Of(Global.UNO_Players);
					Play Effect(Global.UNO_Help, Explosion Sound, Null, Global.UNO_Help, 30);

					Global.UNO_Help = First Of(Global.UNO_Players);
					Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
					Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
				Else If(Global.UNO_Deck[1] == 11);
					If(Count Of(Global.UNO_Players) == 2);
						
						Global.UNO_Help = Last Of(Global.UNO_Players);
						Play Effect(Global.UNO_Help, Explosion Sound, Null, Global.UNO_Help, 30);
					Else;
						Global.UNO_Players = Sorted Array(Global.UNO_Players, Current Array Index * -1);
					End;
					Small Message(Global.UNO_Players, Custom String("  {0} reversed direction", Event Player));
				Else;
					
					Global.UNO_Help = First Of(Global.UNO_Players);
					Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
					Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
				End;
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Global.UNO_Help.UNO_Info_Array[3] = True;
				Play Effect(Global.UNO_Help, Buff Impact Sound, Null, Global.UNO_Help, 20);
				Global.UNO_Timer = 100;
			Else;
				Small Message(Event Player, Custom String("  Cannot play this card."));
				Abort;
			End;
		Else If(Is Button Held(Event Player, Button(Reload)));
			If(Not(Event Player.UNO_Info_Array[3]));
				Small Message(Event Player, Custom String("  It's not your turn yet."));
				Abort;
			End;
			If(Event Player.UNO_Info_Array[4]);
				Small Message(Event Player, Custom String("  You have already drawn a card."));
				Abort;
			Else;
				Call Subroutine(UNO_Draw);
				Call Subroutine(UNO_Update_Hand);
				Small Message(Global.UNO_Players, Custom String("  {0} draws a card", Event Player));
				Event Player.UNO_Info_Array[4] = True;
			End;
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			If(Not(Event Player.UNO_Info_Array[3]));
				Small Message(Event Player, Custom String("  It's not your turn yet."));
				Abort;
			End;
			If(Event Player.UNO_Info_Array[4]);
				Event Player.UNO_Info_Array[3] = False;
				Event Player.UNO_Info_Array[4] = False;
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
				Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Global.UNO_Help.UNO_Info_Array[3] = True;
				Play Effect(Global.UNO_Help, Buff Impact Sound, Null, Global.UNO_Help, 20);
				Small Message(Global.UNO_Players, Custom String("  {0} ends turn", Event Player));
				Global.UNO_Timer = 100;
			Else;
				Small Message(Event Player, Custom String("  You must have drawn a card to end turn."));
				Abort;
			End;
		Else If(Is Button Held(Event Player, Button(Melee)));
			Wait Until(Not(Is Button Held(Event Player, Button(Melee))), 5);
			If(Is Button Held(Event Player, Button(Melee)));
				If(Count Of(Global.UNO_Players) == 2);
					If(Event Player.UNO_Info_Array[3]);
						Big Message(All Players(All Teams), Custom String("{0} has left UNO, so {1} wins!", Event Player, Last Of(Global.UNO_Players)));
					Else;
						Big Message(All Players(All Teams), Custom String("{0} has left UNO, so {1} wins!", Event Player, First Of(Global.UNO_Players)));
					End;
					Call Subroutine(UNO_End);
				Else;
					Big Message(Global.UNO_Players, Custom String("{0} has left the match!", Event Player));
					Modify Global Variable(UNO_Players, Remove From Array By Value, Event Player);
					If(Event Player.UNO_Info_Array[3]);
						Global.UNO_Help = First Of(Global.UNO_Players);
						Global.UNO_Help.UNO_Info_Array[3] = True;
					End;
					Event Player.UNO_Info_Array[5] = True;
				End;
			Else;
				Small Message(Event Player, Custom String("  Hold {0} for 5 sec to leave the match.", Input Binding String(Button(Melee))));
			End;
		End;
	}
}

rule ("UNO_Black_Logic")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}
	conditions
	{
		Event Player.UNO_Info_Array[6] == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Ultimate)));
			Event Player.UNO_Info_Array[2] += 1;
			If(Event Player.UNO_Info_Array[2] >= 5);
				Event Player.UNO_Info_Array[2] = 1;
			End;
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Wait Until(Not(Is Button Held(Event Player, Button(Secondary Fire))), 9999);
			Abort If (Not(Event Player.UNO_Info_Array[6]));
			Small Message(Event Player, Custom String("  Aborted black card placement"));
			Destroy HUD Text(Event Player.UNO_Info_Array[7]);
			Event Player.UNO_Info_Array[6] = False;
		Else If(Is Button Held(Event Player, Button(Primary Fire)));
			Wait Until(Not(Is Button Held(Event Player, Button(Primary Fire))), 9999);
			Abort If (Not(Event Player.UNO_Info_Array[6]));
			Event Player.UNO_Info_Array[3] = False;
			Global.UNO_Deck[0] = Event Player.UNO_Info_Array[2];
			Global.UNO_Deck[1] = Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][1];
			Call Subroutine(UNO_Update_Deck);

			Destroy HUD Text(Event Player.UNO_Hand[Event Player.UNO_Info_Array[0]][2]);
			Modify Player Variable(Event Player, UNO_Hand, Remove From Array By Index, Event Player.UNO_Info_Array[0]);

			Call Subroutine(UNO_Update_Hand);
			
			If(Global.UNO_Deck[1] == 14);
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
				Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
				Small Message(Global.UNO_Players, Custom String("  {0} changed color and gave +4 to {1}", Event Player, Global.UNO_Players[1]));
				
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Global.UNO_Help.UNO_Info_Array[1] = 4;
			
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Play Effect(Global.UNO_Help, Explosion Sound, Null, Global.UNO_Help, 30);

				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
				Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
			Else;
				
				Global.UNO_Help = First Of(Global.UNO_Players);
				Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
				Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);
				Small Message(Global.UNO_Players, Custom String("  {0} changed color", Event Player));
			End;
			
			Event Player.UNO_Info_Array[4] = False;
			
			Global.UNO_Help = First Of(Global.UNO_Players);
			Global.UNO_Help.UNO_Info_Array[3] = True;
			Play Effect(Global.UNO_Help, Buff Impact Sound, Null, Global.UNO_Help, 20);
			
			Destroy HUD Text(Event Player.UNO_Info_Array[7]);
			If(Count Of (Event Player.UNO_Hand) == 1);
				Big Message(Global.UNO_Players, Custom String("{0}: UNO!", Event Player));
			End;
			Global.UNO_Timer = 100;
			Event Player.UNO_Info_Array[6] = False;
		End;
	}
}

rule ("UNO_Draw_Some")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}
	conditions
	{
		Event Player.UNO_Info_Array[1] > 0;
	}

	actions
	{
		While(Event Player.UNO_Info_Array[1] > 0);
			Call Subroutine(UNO_Draw);
			Event Player.UNO_Info_Array[1] -= 1;
		End;

		Call Subroutine(UNO_Update_Hand);

		Event Player.UNO_Info_Array[1] = 0;
	}
}

rule("UNO_Restore")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.UNO_Info_Array[5] == True;
	}

	actions
	{
		For Player Variable(Event Player, UNO_Loop, 0, Count Of(Event Player.UNO_Hand), 1);
			Destroy HUD Text(Event Player.UNO_Hand[Event Player.UNO_Loop][2]);
		End;

		Event Player.UNO_Ingame = False;
		Event Player.UNO_Hand = Empty Array;
		Event Player.UNO_Info_Array[3] = False;
		Event Player.UNO_Info_Array[0] = 0;
		Event Player.UNO_Info_Array[4] = False;
		Destroy HUD Text(Event Player.Mode_Description);
		Event Player.Mode_Headline = Custom String("U N O");
		If(Event Player.High_Rank || Event Player.Mod_Rank);
			Event Player.Mode_Cycle = 32;
			
			Create HUD Text(Event Player, Event Player.Mode_Cycle, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
				Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
				Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
			Event Player.Mode_Hud_ID = Last Text ID;
			
			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nMod Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Enter UNO match\r\n{1} : Leave UNO Match\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("Ultimate : Start UNO Match\r\n\nPlayers in queue: {0}\r\n{1}",
					Count Of(Global.UNO_Players),
				Custom String("{0} : Show who is in queue\r\nReload (Optional):\r\nPlace/Remove In-world UNO deck",
					Input Binding String(Button(Ability 2))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
			Event Player.Mode_Description = Last Text ID;
		Else;
			Event Player.Mode_Cycle_Default = 13;

			Create HUD Text(Event Player, Event Player.Mode_Cycle_Default, Custom String("{0} {1}", Hero Icon String(Hero Of(Player Closest To Reticle(
				Event Player, All Teams))), Player Closest To Reticle(Event Player, All Teams)), Event Player.Mode_Headline, Left, 0,
				Global.Rainbow_Color, Color(Yellow), Global.Rainbow_Color, String and Color, Visible Never);
			Event Player.Mode_Hud_ID = Last Text ID;

			Create HUD Text(Event Player, Null, Custom String("| Press Crouch + Interact/Jump to change pages |\nPlayer Menu: Press Crouch + input for action\n{0}",
				Custom String("{0} : Enter UNO match\r\n{1} : Leave UNO Match\r\n{2}", 
					Input Binding String(Button(Primary Fire)), Input Binding String(Button(Secondary Fire)), 
				Custom String("{0} : Start UNO Match\r\n\nPlayers in queue: {1}\r\n{2}",
					Input Binding String(Button(Ultimate)), Count Of(Global.UNO_Players),
				Custom String("{0} : Show who is in queue\r\nReload : (Optional):\r\nPlace/Remove In-world UNO deck",
					Input Binding String(Button(Ability 2))
				)))), Null, Left, 1, Color(White), Color(White), Color(White), String, Visible Never);
			Event Player.Mode_Description = Last Text ID;
		End;
		
		
		Event Player.UNO_Info_Array[5] = False;
	}
}

rule ("UNO_Timer")
{
	event
	{
		Ongoing - Global;
	}
	
	conditions
	{
		Global.UNO_Started == True;
		Global.UNO_Timer == 0;
	}

	actions
	{
		Global.UNO_Help = First Of(Global.UNO_Players);
		Play Effect(Global.UNO_Help, Explosion Sound, Null, Global.UNO_Help, 30);
		If(Global.UNO_Help.UNO_Info_Array[4]);
			Global.UNO_Help.UNO_Info_Array[4] = False;
			Small Message(Global.UNO_Players, Custom String("  {0} ends turn", Global.UNO_Help));
		Else;
			Global.UNO_Help.UNO_Info_Array[1] = 1;
			Small Message(Global.UNO_Players, Custom String("  {0} didn't play a card", Global.UNO_Help));
		End;
		Destroy HUD Text(Global.UNO_Help.UNO_Info_Array[7]);
		Global.UNO_Help.UNO_Info_Array[3] = False;
		Global.UNO_Help.UNO_Info_Array[6] = False;
		Wait(0.01, Ignore Condition);
		Modify Global Variable(UNO_Players, Remove From Array By Index, 0);
		Modify Global Variable(UNO_Players, Append To Array, Global.UNO_Help);

		Global.UNO_Help = First Of(Global.UNO_Players);
		Global.UNO_Help.UNO_Info_Array[3] = True;
		Play Effect(Global.UNO_Help, Buff Impact Sound, Null, Global.UNO_Help, 20);
		Global.UNO_Timer = 100;
	}
}

rule("Cards_Leaver_Handler")
{
	event
	{
		Player Left Match;
		All;
		All;
	}

	conditions
	{
		Array Contains(Global.UNO_Players, Event Player) == True;
	}

	actions
	{
		If(Global.UNO_Started && Array Contains(Global.UNO_Players, Event Player));
			Modify Global Variable(UNO_Players, Remove From Array By Value, Event Player);
			If(Count Of(Global.UNO_Players) == 1);
				Global.UNO_Help = First Of(Global.UNO_Players);
				Big Message(All Players(All Teams), Custom String("{0} has left UNO, so {1} wins!", Event Player, Global.UNO_Help));
				Call Subroutine(UNO_End);
			Else;
				Big Message(Global.UNO_Players, Custom String("{0} has left the match!", Event Player));
				If(Not(Is True For Any(Global.UNO_Players, Current Array Element.UNO_Info_Array[3])));
					Global.UNO_Help = First Of(Global.UNO_Players);
					Global.UNO_Help.UNO_Info_Array[3] = True;
				End;
			End;
		Else;
			Modify Global Variable(UNO_Players, Remove From Array By Value, Event Player);
			Small Message(All Players(ALl Teams), Custom String("  {0} was removed from UNO queue", Event Player));
		End;
	}
}

rule ("Subroutine: UNO_Draw_Card")
{
    event 
	{
		Subroutine;
		UNO_Draw;
    }

    actions 
	{	
		"Uno Cards colors: 1=red, 2=green, 3=blue, 4=yellow, 0=black"
		"Uno Cards meaning: 0-9=normal, 10=skip, 11=reverse, 12=draw2, 13=pick, 14=draw4"

		Event Player.UNO_Helper = Array(Null, Null, Null, Null);
		Event Player.UNO_Helper[0] = Random Value In Array(Global.UNO_Random);
		If(Event Player.UNO_Helper[0] == 0);
			Event Player.UNO_Helper[1] = Random Integer(13, 14);
		Else;
			Event Player.UNO_Helper[1] = Random Integer(0, 12);
			If(Event Player.UNO_Helper[1] == 0);
				Event Player.UNO_Helper[1] = Random Integer(0, 12);
			End;
		End;

		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Array(Event Player.UNO_Helper));
    }
}

rule ("Subroutine: UNO_Update_Hand")
{
    event 
	{
		Subroutine;
		UNO_Update_Hand;
    }

    actions 
	{	
		For Player Variable(Event Player, UNO_Loop, 0, Count Of(Event Player.UNO_Hand), 1);
			Destroy HUD Text(Event Player.UNO_Hand[Event Player.UNO_Loop][2]);
		End;

		Event Player.UNO_Sorter[0] = Sorted Array(Filtered Array(Event Player.UNO_Hand, Current Array Element[0] == 0), Current Array Element[1]);
		Event Player.UNO_Sorter[1] = Sorted Array(Filtered Array(Event Player.UNO_Hand, Current Array Element[0] == 1), Current Array Element[1]);
		Event Player.UNO_Sorter[2] = Sorted Array(Filtered Array(Event Player.UNO_Hand, Current Array Element[0] == 2), Current Array Element[1]);
		Event Player.UNO_Sorter[3] = Sorted Array(Filtered Array(Event Player.UNO_Hand, Current Array Element[0] == 3), Current Array Element[1]);
		Event Player.UNO_Sorter[4] = Sorted Array(Filtered Array(Event Player.UNO_Hand, Current Array Element[0] == 4), Current Array Element[1]);
		Event Player.UNO_Hand = Empty Array;
		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Event Player.UNO_Sorter[0]);
		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Event Player.UNO_Sorter[1]);
		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Event Player.UNO_Sorter[2]);
		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Event Player.UNO_Sorter[3]);
		Modify Player Variable(Event Player, UNO_Hand, Append To Array, Event Player.UNO_Sorter[4]);
		
		For Player Variable(Event Player, UNO_Loop, 0, Count Of(Event Player.UNO_Hand), 1);
			
			If(Event Player.UNO_Hand[Event Player.UNO_Loop][1] == 13);
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} D ", Ability Icon String(Hero(Sombra), Button(Ability 2)))), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, Color(Black), Color(White), Color(White), String, Visible Never);
			Else If(Event Player.UNO_Hand[Event Player.UNO_Loop][1] == 14);
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} D ", Ability Icon String(Hero(Baptiste), Button(Ability 1)))), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, Color(Black), Color(White), Color(White), String, Visible Never);
			Else If(Event Player.UNO_Hand[Event Player.UNO_Loop][1] == 10);
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} {1} ", Icon String(No), Global.UNO_Colorblind[Event Player.UNO_Hand[Event Player.UNO_Loop][0]])), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, 
					Global.Card_Colors[Event Player.UNO_Hand[Event Player.UNO_Loop][0]], Color(White), Color(White), String, Visible Never);
			Else If(Event Player.UNO_Hand[Event Player.UNO_Loop][1] == 11);
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} {1} ", Icon String(Recycle), Global.UNO_Colorblind[Event Player.UNO_Hand[Event Player.UNO_Loop][0]])), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, 
					Global.Card_Colors[Event Player.UNO_Hand[Event Player.UNO_Loop][0]], Color(White), Color(White), String, Visible Never);
			Else If(Event Player.UNO_Hand[Event Player.UNO_Loop][1] == 12);
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} {1} ", Icon String(Plus), Global.UNO_Colorblind[Event Player.UNO_Hand[Event Player.UNO_Loop][0]])), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, 
					Global.Card_Colors[Event Player.UNO_Hand[Event Player.UNO_Loop][0]], Color(White), Color(White), String, Visible Never);
			Else;
				Create HUD Text(Event Player, Evaluate Once(Custom String(" {0} {1} ", Event Player.UNO_Hand[Event Player.UNO_Loop][1], Global.UNO_Colorblind[Event Player.UNO_Hand[Event Player.UNO_Loop][0]])), 
					Null, Event Player.UNO_Hand[Evaluate Once(Event Player.UNO_Loop)][3], Left, Event Player.UNO_Loop + 5, 
					Global.Card_Colors[Event Player.UNO_Hand[Event Player.UNO_Loop][0]], Color(White), Color(White), String, Visible Never);
			End;

			Event Player.UNO_Hand[Event Player.UNO_Loop] = Array(Event Player.UNO_Hand[Event Player.UNO_Loop][0], 
				Event Player.UNO_Hand[Event Player.UNO_Loop][1], Last Text ID, Custom String(""));
		End;

		Event Player.UNO_Info_Array[0] = 0;
		Event Player.UNO_Hand[0] =  Array(Event Player.UNO_Hand[0][0], Event Player.UNO_Hand[0][1],  Event Player.UNO_Hand[0][2], Custom String("{0}", Icon String(Arrow: Left)));
    }
}

rule ("Subroutine: UNO_Update_Deck")
{
    event 
	{
		Subroutine;
		UNO_Update_Deck;
    }

    actions 
	{	
		Destroy HUD Text(Global.UNO_Deck[2]);
		If(Global.UNO_Inworld[0]);
			Destroy In-World Text(Global.UNO_Inworld[2]);
		End;
		If(Global.UNO_Deck[1] == 13);
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}   \r\n ", Ability Icon String(Hero(Sombra), Button(Ability 2)), Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}", Ability Icon String(Hero(Sombra), Button(Ability 2)), Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		Else If(Global.UNO_Deck[1] == 14);
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}   \r\n ", Ability Icon String(Hero(Baptiste), Button(Ability 1)), Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}", Ability Icon String(Hero(Baptiste), Button(Ability 1)), Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		Else If(Global.UNO_Deck[1] == 10);
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}   \r\n ", Icon String(No), Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}", Icon String(No), Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		Else If(Global.UNO_Deck[1] == 11);
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}  \r\n ", Icon String(Recycle), Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}", Icon String(Recycle), Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		Else If(Global.UNO_Deck[1] == 12);
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}   \r\n ", Icon String(Plus), Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}", Icon String(Plus), Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		Else;
			Create HUD Text(Global.UNO_Players, Custom String(" \r\n   {0} {1}   \r\n ",  Global.UNO_Deck[1], Global.UNO_Colorblind[Global.UNO_Deck[0]]), Null, Null, Top, 2, 
				Global.Card_Colors[Global.UNO_Deck[0]], Color(White), Color(White), Visible To String and Color, Visible Never);
			Global.UNO_Deck[2] = Last Text ID;
			If(Global.UNO_Inworld[0]);
				Create In-World Text(All Players(All Teams), Custom String("{0} {1}",  Global.UNO_Deck[1], Global.UNO_Colorblind[Global.UNO_Deck[0]]), 
					Global.UNO_Inworld[1], 1.8, Clip Against Surfaces, Visible To String and Color, Global.Card_Colors[Global.UNO_Deck[0]], Visible Never);
				Global.UNO_Inworld[2] = Last Text ID;
			End;
		End;

    }
}

rule ("Subroutine: UNO_End")
{
    event 
	{
		Subroutine;
		UNO_End;
    }

    actions 
	{	
		Destroy HUD Text(Global.UNO_Info);
		Global.UNO_Started = False;
		Destroy HUD Text(Global.UNO_Deck[2]);
		Destroy Progress Bar HUD Text(Global.UNO_Deck[3]);
		If(Global.UNO_Inworld[0]);
			Destroy In-World Text(Global.UNO_Inworld[2]);
			Destroy In-World Text(Global.UNO_Inworld[3]);
			Create In-World Text(All Players(All Teams), Custom String("UNO"), Global.UNO_Inworld[1], 1.8, 
				Clip Against Surfaces, Visible To String and Color, Global.Rainbow_Color, Visible Never);
			Global.UNO_Inworld[2] = Last Text ID;
			Create In-World Text(All Players(All Teams), Custom String("Current player Display\r\nNext Player Display\r\n"), Global.UNO_Inworld[1], 1.2, 
				Clip Against Surfaces, Visible To String and Color, Color(White), Visible Never);
			Global.UNO_Inworld[3] = Last Text ID;
		End;
		Global.UNO_Deck = Array(Null, Null, Null, Null);
		For Global Variable(UNO_Looper, 0, Count Of(Global.UNO_Players), 1);
			Global.UNO_Players[Global.UNO_Looper].UNO_Info_Array[5] = True;
		End;
		Global.UNO_Players = Empty Array;
    }
}

rule("Mode_33 - Invisible")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Mode_Cycle == 33;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		Abort If(Event Player.Promoted_Rank && (Event Player != Host Player));
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Event Player.Is_Invisible = True;
			Set Invisible(Event Player, All);
			Small Message(Event Player, Custom String("Invisible On"));
			Wait(1, Ignore Condition);
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Set Invisible(Event Player, None);
			Small Message(Event Player, Custom String("Invisible Off"));
			Event Player.Is_Invisible = False;
			Wait(1, Ignore Condition);
		End;
	}
}

rule("Mode_34 - Communication")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 34 || Event Player.Mode_Cycle_Default == 16) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;

		Event Player.Comms_Target = Player Closest To Reticle(Event Player, All Teams);
		Abort If(Not(Is Dummy Bot(Event Player.Comms_Target)) || Event Player.Comms_Target.Control_Active);
		If(Event Player.Comms_Target.Bot_CD > 0);
			Small Message(Event Player, Custom String("  {0} sec CD", Event Player.Comms_Target.Bot_CD));
			Abort;
		End;
		If(Is Button Held(Event Player, Button(Primary Fire)));
			Communicate(Event Player, Hello);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, Hello);
			Small Message(Event Player, Custom String("   Moe says: {0}!", String("Hello")));
		Else If(Is Button Held(Event Player, Button(Secondary Fire)));
			Communicate(Event Player, Goodbye);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, Goodbye);
			Small Message(Event Player, Custom String("   Moe says: {0}.", String("Goodbye")));
		Else If(Is Button Held(Event Player, Button(Ability 2)));
			Communicate(Event Player, Yes);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, Thanks);
			Small Message(Event Player, Custom String("   Moe says: {0}!", String("Thanks")));
		Else If(Is Button Held(Event Player, Button(Reload)));
			Communicate(Event Player, No);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, Sorry);
			Small Message(Event Player, Custom String("   Moe says: {0}...", String("Sorry")));
		Else If(Is Button Held(Event Player, Button(Ultimate)));
			Communicate(Event Player, Thanks);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, Yes);
			Small Message(Event Player, Custom String("   Moe says: {0}!", String("Yes")));
		Else If(Is Button Held(Event Player, Button(Ability 1)));
			Communicate(Event Player, Sorry);
			Event Player.Comms_Target.Bot_CD = 3;
			Wait(0.9, Ignore Condition);
			Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
				Eye Position(Event Player))),
				300, To World, Direction and Turn Rate);
			Wait(0.2, Ignore Condition);
			Communicate(Event Player.Comms_Target, No);
			Small Message(Event Player, Custom String("   Moe says: {0}.", String("No")));
		End;
		Wait(1, Ignore Condition);
		Start Facing(Event Player.Comms_Target, Update Every Frame(Direction Towards(Eye Position(Event Player.Comms_Target), 
			Eye Position(Closest Player To(Event Player.Comms_Target, All Teams)))),
			300, To World, Direction and Turn Rate);
	}
}


disabled rule("")
{
	event
	{
		Ongoing - Global;
	}
}

rule("Extra_1 - Zen Kick")
{
	event
	{
		Ongoing - Each Player;
		All;
		Zenyatta;
	}

	conditions
	{
		(Event Player.High_Rank || Event Player.Mod_Rank) == True;
		Is Meleeing(Event Player) == True;
		Distance Between(Position Of(Event Player), Position Of(Closest Player To(Event Player, All Teams))) <= 2;
	}

	actions
	{
		Abort If(Closest Player To(Event Player, All Teams).Protection);
		Apply Impulse(Closest Player To(Event Player, All Teams), Vector(0, 1, 0), 20, To World, Cancel Contrary Motion);
		Apply Impulse(Closest Player To(Event Player, All Teams), Direction Towards(Position Of(Event Player), Position Of(
			Closest Player To(Event Player, All Teams))), 200, To World, Incorporate Contrary Motion);
		Set Status(Closest Player To(Event Player, All Teams), Event Player, Knocked Down, 4);
	}
}

rule("Extra_2 - Self Rez")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player == Is Dead(Event Player);
		(Event Player.High_Rank || Event Player.Mod_Rank) == True;
		Is Button Held(Event Player, Button(Jump)) == True;
	}

	actions
	{
		"Kanezaka falling out of map hardcoded fix"
		If(Current Map == Map(Kanezaka));
			Teleport(Event Player, Random Value In Array(Global.Kanezaka_Teleports));
			Resurrect(Event Player);
			Heal(Event Player, Null, 12000);
			Wait(0.100, Ignore Condition);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		Else;
			Teleport(Event Player, Nearest Walkable Position(Position Of(Event Player)));
			Resurrect(Event Player);
			Heal(Event Player, Null, 12000);
			Wait(0.100, Ignore Condition);
			Play Effect(All Players(All Teams), Good Pickup Effect, Color(Blue), Event Player, 1);
		End;
	}
}

rule("Extra_3 - Short Hop")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Is Button Held(Event Player, Button(Ability 1)) && Is Button Held(Event Player, Button(Crouch))) == True;
		(Event Player.High_Rank || Event Player.Mod_Rank) == True;
		Is Alive(Event Player) == True;
		Event Player.Mode_Cycle != 6;
		Event Player.Mode_Cycle != 31;
		Event Player.Mode_Cycle != 34;
	}

	actions
	{
		Cancel Primary Action(Event Player);
		Play Effect(Event Player, Good Explosion, Global.Rainbow_Color, Position Of(Event Player), 0.75);
		Teleport(Event Player, Position Of(Event Player) + Facing Direction Of(Event Player) * 12.5);
		If(Event Player.Control_List != Empty Array);
			Wait(0.01, Ignore Condition);
			Teleport(Event Player.Control_List, Position Of(Event Player));
		End;
		Wait(0.1, Ignore Condition);
		Play Effect(Event Player, Good Explosion, Global.Rainbow_Color, Position Of(Event Player), 0.75);
		Apply Impulse(Event Player, Up, 2, To World, Cancel Contrary Motion);
	}
}

rule("Extra_4 - Mercy sleep darts")
{
	event
	{
		Player Dealt Damage;
		All;
		Mercy;
	}

	conditions
	{
		(Event Player.High_Rank || Event Player.Mod_Rank) == True;
		Event Ability == Button(Primary Fire);
		Is Dummy Bot(Event Player) == False;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Set Status(Victim, Event Player, Asleep, 4);
		Heal(Victim, Null, 50);
	}
}

rule("Extra_5 - Ultimate reset for mods+")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.High_Rank || (Event Player.Mod_Rank && (Not(Event Player.Promoted_Rank)) || Event Player == Host Player)) == True;
		Is Button Held(Event Player, Button(Ultimate)) == True;
		Is Button Held(Event Player, Button(Crouch)) == False;
		Event Player.Restricted[0] == False;
		Hero Of(Event Player) != Hero(Ashe);
	}

	actions
	{
		Set Ultimate Ability Enabled(Event Player, True);
		Set Ultimate Charge(Event Player, 100);
	}
}

rule("Extra_6 - Mercy Movement Collision")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Hero Of(Event Player) == Hero(Mercy);
		((Event Player.High_Rank || Event Player.Mod_Rank) == True);
		Is Using Ultimate(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
		
	}

	actions
	{
		Set Move Speed(Event Player, Event Player.Player_Modification[1] + 50);
		Disable Movement Collision With Environment(Event Player, True);
		Wait Until(Not(Is Using Ultimate(Event Player)) || (Hero Of(Event Player) != Hero (Mercy)), 9999);
		Set Move Speed(Event Player, Event Player.Player_Modification[1]);
		If(Event Player.Ghost_Mode);
			Disable Movement Collision With Environment(Event Player, False);
		Else;
			Enable Movement Collision With Environment(Event Player);
		End;
	}
}

disabled rule("Extra_7 - No Cooldowns")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		((Event Player.High_Rank || Event Player.Mod_Rank) == True);
		Event Player.No_CD == True;
	}

	actions
	{
		Set Ability Cooldown(Event Player, Button (Primary Fire), 0);
		Set Ability Cooldown(Event Player, Button (Secondary Fire), 0);
		Set Ability Cooldown(Event Player, Button (Ability 1), 0);
		Set Ability Cooldown(Event Player, Button (Ability 2), 0);
		If(Ammo(Event Player, 0) <=1 && Hero Of(Event Player) != Hero(Cassidy) && Hero Of(Event Player) != Hero(Lifeweaver));
			Set Ammo(Event Player, Weapon(Event Player)-1, 69);
		End;
		Set Ability Charge(Event Player, Button(Ability 1), 3);
		Set Ability Charge(Event Player, Button(Ability 2), 3);
		Wait(0.1, Abort When False);
		Loop If Condition Is True;
	}
}

rule("Extra_9 - GIVE PETS")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Hero Of(Event Player) == Hero (Ramattra) || Hero Of(Event Player) == Hero (Sombra) || Hero Of(Event Player) == Hero (Sigma) || 
			Hero Of(Event Player) == Hero(Moira)) == True;
		Is Firing Secondary(Event Player) == True;
		Is In Alternate Form(Event Player) == False;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Create Icon(All Players(All Teams), Update Every Frame(Eye Position(Event Player) + World Vector Of(
			Vector(If-Then-Else(Hero Of(Event Player) == Hero(Moira), -0.08, 0.18), If-Then-Else(Hero Of(Event Player) == Hero(Moira), -0.4, -0.25), 0), Event Player, Rotation) + 
			Event Player.Scale_Real * Facing Direction Of(Event Player) * If-Then-Else(Hero Of(Event Player) == Hero(Sombra), 0.6, 1)), 
			Heart, Visible To and Position, Color(Red), False);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait Until(!Is Firing Secondary(Event Player) || Is In Alternate Form(Event Player), 9999);
		Destroy Icon(Event Player.ExtraEffect_ID);
	}
}

rule("Extra_10: Doom Hug")
{
	event
	{
		Ongoing - Each Player;
		All;
		Doomfist;
	}

	conditions
	{
		((Event Player.High_Rank || Event Player.Mod_Rank) == True);
		Is Using Ability 2(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Event Player.Extra10_Player = Closest Player To(Event Player, All Teams);
		Abort If((Event Player.Extra10_Player.Full_Protection && Not(Is Dummy Bot(Event Player.Extra10_Player))) 
			|| Has Status(Event Player.Extra10_Player, Knocked Down));
		Abort If(Distance Between(Event Player,Event Player.Extra10_Player) >= 1.5 || Not(Is In View Angle(Event Player, Event Player.Extra10_Player, 120)));
		Attach Players(Event Player.Extra10_Player, Event Player, Vector(0,0.3,0.6));
		If(Event Player.Extra10_Player.Protection);
			Clear Status(Event Player.Extra10_Player, Phased Out);
		End;
		Set Status(Event Player.Extra10_Player, Event Player, Stunned, 10);
		If(Event Player.Extra10_Player.Protection);
			Set Status(Event Player.Extra10_Player, Null, Phased Out, 9999);
		End;
		Wait(0.01, Ignore Condition);
		Set Facing(Event Player.Extra10_Player, Direction Towards(Eye Position(Event Player.Extra10_Player), Eye Position(Event Player)), To World);
		Disallow Button(Event Player.Extra10_Player, Button(Ultimate));
		Wait Until(Not(Is Using Ability 2(Event Player)), 4);
		If(Is Using Ability 1(Event Player));
			Wait Until(Not(Is Using Ability 1(Event Player)), 9999);
			Clear Status(Event Player.Extra10_Player, Stunned);
			Wait(0.01, Ignore Condition);
			If(Event Player.Extra10_Player.Protection);
				Clear Status(Event Player.Extra10_Player, Phased Out);
			End;
			Set Status(Event Player.Extra10_Player, Event Player, Knocked Down, 2.6);
			If(Event Player.Extra10_Player.Protection);
				Set Status(Event Player.Extra10_Player, Null, Phased Out, 9999);
			End;
		End;
		Detach Players(Event Player.Extra10_Player);
		Allow Button(Event Player.Extra10_Player, Button(Ultimate));
		Clear Status(Event Player.Extra10_Player, Stunned);
	}
}

rule("Extra_11: Cass HE HE")
{
	event
	{
		Ongoing - Each Player;
		All;
		Cassidy;
	}

	conditions
	{
		Is Using Ultimate(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Start Accelerating(Event Player, Throttle Of(Event Player) * -1, 300, If-Then-Else(Throttle Of(Event Player)== Vector(0,0,0), 0, 4), To Player, Direction Rate and Max Speed);
		Wait(0.5, Ignore Condition);
		Wait Until(Not(Is Using Ultimate(Event Player)), 9999);
		Stop Accelerating(Event Player);
	}
}

rule("Extra_12: Ashe Low Bob")
{
	event
	{
		Ongoing - Each Player;
		All;
		Ashe;
	}

	conditions
	{
		Is Button Held(Event Player, Button(Ultimate)) == True;
		Event Player.Is_Crouch_On == False;
	}

	actions
	{
		Abort If(Ultimate Charge Percent(Event Player)!=0 && Not(Event Player.High_Rank || Event Player.Mod_Rank));
		Cancel Primary Action(Event Player);
		Set Ultimate Charge(Event Player, 2);
		Set Max Health(Event Player, 20);
		Wait(0.01, Ignore Condition);
		Set Ultimate Charge(Event Player, 100);
		Wait(0.01, Ignore Condition);
		Press Button(Event Player, Button(Ultimate));
		If(Is Dummy Bot(Event Player));
			Set Max Health(Event Player, 10000);
		Else;
			Set Max Health(Event Player, Event Player.Player_Modification[4]);
		End;
		Wait(0.01, Ignore Condition);
		Heal(Event Player, Null, 10000);
	}
}

rule("Extra_13: Widow Laserpointer")
{
	event
	{
		Ongoing - Each Player;
		All;
		Widowmaker;
	}

	conditions
	{
		Is Firing Secondary(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Destroy Effect(Event Player.ExtraEffect_ID);
		Wait(0.4, Abort When False);
		Create Beam Effect(Filtered Array(All Players(All Teams), Not(Current Array Element == Event Player && Current Array Element.Camera <= 5) &&
			(Hero Of(Current Array Element) != Hero(Widowmaker) || Current Array Element == Event Player)), 
			Good Beam, Update Every Frame(Update Every Frame(Eye Position(Event Player)) 
			+ 0.4 * Event Player.Scale_Real * Update Every Frame(Facing Direction Of(Event Player))), 
			Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + 150 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			All Players(All Teams), Event Player, False)), Color(Red), Visible To Position and Radius);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait Until(Not(Is Firing Secondary(Event Player)) || Hero Of(Event Player) != Hero(Widowmaker), 9999);
		Destroy Effect(Event Player.ExtraEffect_ID);
	}
}

rule("Extra_14: Broccoli Shield")
{
	event
	{
		Ongoing - Each Player;
		All;
		Brigitte;
	}

	conditions
	{
		Is Firing Secondary(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Start Scaling Barriers(Event Player, (Sine From Radians(Total Time Elapsed * 0.5))*1.2 + 1.4, true);
		Wait Until(Not(Is Firing Secondary(Event Player) || Hero Of(Event Player) != Hero(Brigitte)), 9999);
		Stop Scaling Barriers(Event Player);
	}
}

rule("Extra_15: Spider Hog")
{
	event
	{
		Ongoing - Each Player;
		All;
		Roadhog;
	}

	conditions
	{
		Is Using Ability 1(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Wait(0.16, Ignore Condition);
		Event Player.Extra17_Pos = Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + 21 * Event Player.Scale_Real * Facing Direction Of(Event Player), 
			All Players(All Teams), Event Player, False);
		Abort If(Distance Between(Event Player, Event Player.Extra17_Pos) > 20.5);
		Wait(0.14, Ignore Condition);
		Apply Impulse(Event Player, Direction Towards(Event Player, Event Player.Extra17_Pos), Distance Between(Event Player, Event Player.Extra17_Pos) * 3 * Event Player.Scale_Real, 
			To World, Cancel Contrary Motion XYZ);
	}
}

rule("Extra_16: Pharah Float")
{
	event
	{
		Ongoing - Each Player;
		All;
		Pharah;
	}

	conditions
	{
		Is Using Ultimate(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Start Forcing Player Position(Event Player, Update Every Frame(Position Of(Event Player) + World Vector Of(Throttle Of(Event Player) * Vector(0.1, 0, 0.1), Event Player, Rotation)
			+ If-Then-Else(Is Button Held(Event Player, Button(Jump)), Vector(0,0.1,0), Vector(0,0,0)) + If-Then-Else(Is Button Held(Event Player, Button(Crouch)), Vector(0,-0.1,0), Vector(0,0,0))), True);
		Wait Until(Not(Is Using Ultimate(Event Player)), 9999);
		Stop Forcing Player Position(Event Player);
	}
}

rule("Extra_17: Orisacopter")
{
	event
	{
		Ongoing - Each Player;
		All;
		Orisa;
	}

	conditions
	{
		Is Using Ability 2(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Set Gravity(Event Player, 0);
		While(Is Using Ability 2(Event Player));
			Apply Impulse(Event Player, Facing Direction Of(Event Player), 1, To World, Incorporate Contrary Motion);
			Wait(0.05, Ignore Condition);
		End;
		Set Gravity(Event Player, Event Player.Player_Modification[3]);
	}
}

rule("Extra_18: Reaper Ghost")
{
	event
	{
		Ongoing - Each Player;
		All;
		Reaper;
	}

	conditions
	{
		Is Using Ability 1(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Set Gravity(Event Player, 10);
		Disable Movement Collision With Environment(Event Player, False);
		Wait Until(Not(Is Using Ability 1(Event Player)), 9999);
		Enable Movement Collision With Environment(Event Player);
		Set Gravity(Event Player, Event Player.Player_Modification[3]);
	}
}

rule("Extra_19: Florenzio Bandaid")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Hero Of(Event Player) == Hero(Lifeweaver);
		(Event Player.High_Rank || (Event Player.Mod_Rank && Not(Event Player.Promoted_Rank)) || Event Player == Host Player) == False;
	}

	actions
	{
		Set Ability 1 Enabled(Event Player, False);
		Set Ability 2 Enabled(Event Player, False);
		Wait Until(Hero Of(Event Player) != Hero(Lifeweaver), 9999);
		Wait Until(Hero Of(Event Player) != Hero(Mei), 9999);
		Set Ability 1 Enabled(Event Player, True);
		Set Ability 2 Enabled(Event Player, True);
	}
}

rule("Extra_20: Screw Mei")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Hero Of(Event Player) == Hero(Mei);
		(Event Player.High_Rank || (Event Player.Mod_Rank && Not(Event Player.Promoted_Rank)) || Event Player == Host Player) == False;
	}


	actions
	{
		Set Ability 1 Enabled(Event Player, False);
		Set Ability 2 Enabled(Event Player, False);
		Wait Until(Hero Of(Event Player) != Hero(Mei), 9999);
		Wait Until(Hero Of(Event Player) != Hero(Lifeweaver), 9999);
		Set Ability 1 Enabled(Event Player, True);
		Set Ability 2 Enabled(Event Player, True);
	}
}

rule("Extra_22: Ball Bounce")
{
	event
	{
		Ongoing - Each Player;
		All;
		Wrecking Ball;
	}

	conditions
	{
		Is Using Ability 2(Event Player) == True;
		Is In Alternate Form(Event Player) == True;
		Is On Ground(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Apply Impulse(Event Player, Vector(0, 1, 0), 20, To World, Incorporate Contrary Motion);
	}
}

rule("Extra_23: Moira Ghost")
{
	event
	{
		Ongoing - Each Player;
		All;
		Moira;
	}

	conditions
	{
		Is Using Ability 1(Event Player) == True;
		Event Player.Full_Protection == False;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Disable Movement Collision With Environment(Event Player, False);
		Wait Until(Not(Is Using Ability 1(Event Player)), 9999);
		Enable Movement Collision With Environment(Event Player);
	}
}

rule("Extra_24: Echo Heart")
{
	event
	{
		Ongoing - Each Player;
		All;
		Echo;
	}

	conditions
	{
		Is Using Ability 2(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}

	actions
	{
		Create Icon(All Players(All Teams), Update Every Frame(Eye Position(Event Player) - Vector(0,0.5,0) +
			Event Player.Scale_Real * Facing Direction Of(Event Player) *
			Modulo(Total Time Elapsed * 0.25 * Distance Between(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 16 * Event Player.Scale_Real, 
				All Players(All Teams), Event Player, True), Eye Position(Event Player)) * 5, 
				Distance Between(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + Facing Direction Of(Event Player) * 16 * Event Player.Scale_Real, 
				All Players(All Teams), Event Player, True), Eye Position(Event Player)))), 
				Heart, Visible To and Position, Color(Red), False);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait Until(Not(Is Using Ability 2(Event Player)) || Hero Of(Event Player) != Hero(Echo), 9999);
		Destroy Icon(Event Player.ExtraEffect_ID);
	}
}

rule("Extra_25: Soldier Heart")
{
	event
	{
		Ongoing - Each Player;
		All;
		Soldier: 76;
	}

	conditions
	{
		Is Using Ultimate(Event Player) == True;
		Is Firing Primary(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}


	actions
	{
		Event Player.Spam_Cooldown = 1;
		Create Icon(All Players(All Teams), Update Every Frame(Eye Position(Event Player) - Vector(0,0.5,0) +
			Event Player.Scale_Real * If-Then-Else(Is In View Angle(Event Player, Player Closest To Reticle(Event Player, All Teams), 25) 
			&& Eye Position(Player Closest To Reticle(Event Player, All Teams)) != Null, 
			Direction Towards(Eye Position(Event Player), Eye Position(Player Closest To Reticle(Event Player, All Teams)) - Vector(0,0.5,0)), Facing Direction Of(Event Player)) *
			(-1 * (Event Player.Spam_Cooldown - 1)) * 50), Heart, Visible To and Position, Color(Red), False);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait(0.25, Ignore Condition);
		Destroy Icon(Event Player.ExtraEffect_ID);
		Loop If Condition Is True;
	}
}

rule("Extra_26: Laser Heart")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Current Map == Map(Paris) || Current Map == Map(Circuit Royal)) == False;
		(Hero Of(Event Player) == Hero(Zarya) || Hero Of(Event Player) == Hero(Symmetra)) == True;
		Is Firing Primary(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}


	actions
	{
		Abort If((Is Firing Primary(Event Player) && Not(Hero Of(Event Player) == Hero(Zarya) || Hero Of(Event Player) == Hero(Symmetra))));
		Create Icon(All Players(All Teams), Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + 
			Facing Direction Of(Event Player) * If-Then-Else(Hero Of(Event Player) == Hero(Symmetra), 12, 15) * 
			Event Player.Scale_Real, All Players(All Teams), Event Player, True) - Vector(0,0.5,0)), Heart, Visible To and Position, Color(Red), False);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait Until(Not(Is Firing Primary(Event Player)), 9999);
		Destroy Icon(Event Player.ExtraEffect_ID);
	}
}

rule("Extra_27: Illari Heart")
{
	event
	{
		Ongoing - Each Player;
		All;
		Illari;
	}

	conditions
	{
		Is Firing Secondary(Event Player) == True;
		Event Player.FunkySkillsToggle == True;
	}


	actions
	{
		Create Icon(All Players(All Teams), Update Every Frame(Ray Cast Hit Position(Eye Position(Event Player), Eye Position(Event Player) + 
			Facing Direction Of(Event Player) * 15 * 
			Event Player.Scale_Real, All Players(All Teams), Event Player, True) - Vector(0,0.5,0)), Heart, Visible To and Position, Color(Red), False);
		Event Player.ExtraEffect_ID = Last Created Entity;
		Wait Until(Not(Is Firing Secondary(Event Player) || Hero Of(Event Player) != Hero(Illari)), 9999);
		Destroy Icon(Event Player.ExtraEffect_ID);
	}
}

rule("Tp effects per Map")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Map_Teleport_Locations = Empty Array;
		Global.TP_Help = False;
		If(Current Map == Map(Havana));
			Global.Map_Teleport_Locations = Array(Vector(-39.470, 6, -28.170), Vector(-17.710, 5.950, -18.280), Vector(24.920, 5.950, -33.410));
			
			Global.Map_Teleport_Exits = Array(Vector(40.780, 8, 10.420), Vector(-34.180, 5.840, -33.220), Vector(-34.180, 5.840, -33.220));
		Else If(Current Map == Map(Lijiang Tower) || Current Map == Map(Lijiang Tower Lunar New Year));
			Global.Map_Teleport_Locations = Array(Vector(2.7, 94, 187.8), Vector(-2.7, 94, 187.8), Vector(5, 0, -14), Vector(5.7, 267.17, 290));

			Global.Map_Teleport_Exits = Array(Vector(1.1, 0, -14), Vector(5.7, 267.33, 285), Vector(2.7, 94, 184.8), Vector(-2.7, 94, 184.8));
		Else If(Current Map == Map(Busan));
			Global.Map_Teleport_Locations = Array(Vector(-331.9, 14.1, 176.8), Vector(-325.2, 14.1, 176.8), Vector(51.9, 6.05, -100.2), Vector(208.35, 17.2, 208.8));

			Global.Map_Teleport_Exits = Array(Vector(51.9, 6.05, -96.2), Vector(209.85, 17.2, 212.8), Vector(-331.9, 14.1, 179.8), Vector(-325.2, 14.1, 179.8));
		Else If(Current Map == Map(Oasis));
			Global.Map_Teleport_Locations = Array(Vector(128.85, 2.5, -207.5), Vector(101.6, 2.5, -235.45), Vector(120.7, 1, 230.7), Vector(-184.6, 9, 0));

			Global.Map_Teleport_Exits = Array(Vector(118.7, 1, 232.7), Vector(-181.9, 9.1, 0), Vector(126.85, 2.5, -205.5), Vector(99.6, 2.5, -233.45));
		Else If(Current Map == Map(Ilios));
			Global.Map_Teleport_Locations = Array(Vector(-190, 1.05, -3.05), Vector(-195.1, 1.05, 2.05), Vector(20.1, 61.4, -142.5), Vector(316.6, -23.7, -38.2));

			Global.Map_Teleport_Exits = Array(Vector(20.1, 61.4, -145.5), Vector(318.6, -23.7, -40.2), Vector(-192, 1.05, -5.05), Vector(-197.1, 1.05, 0.05));
		Else If(Current Map == Map(Nepal));
			Global.Map_Teleport_Locations = Array(Vector(-20, 13, -2), Vector(-20, 13, 2), Vector(90, 128, -10), Vector(-209, -94.1, -16), Vector(79, 84, 11), Vector(68.75, 128.53, -60.77));

			Global.Map_Teleport_Exits = Array(Vector(87, 128, -10), Vector(-209, -94.1, -13), Vector(-23, 13, -2), Vector(-23, 13, 2), Vector(66.05, 127.8, -62.75), Vector(79.25, 84, 11));
		Else If(Current Map == Map(Antarctic Peninsula));
			Global.Map_Teleport_Locations = Array(Vector(276.9, -10.95, -261), Vector(291.39, -10.95, -261), Vector(270, 41.3, 144.7), Vector(-125.3, -152.5, 60));

			Global.Map_Teleport_Exits = Array(Vector(270, 41.3, 147.7), Vector(-125.3, -152.5, 56), Vector(280.9, -10.95, -261), Vector(287.39, -10.95, -261));
		Else If(Current Map == Map(Ayutthaya));
			Global.Map_Teleport_Locations = Array(Vector(4.75, 21, 26.5), Vector(29.75, 0.11, -28));

			Global.Map_Teleport_Exits = Array(Vector(29.75, 0.11, -25), Vector(4.75, 21, 29.5));
		Else If(Current Map == Map(Samoa));
			Global.Map_Teleport_Locations = Array(Vector(275, 8.3, -250.8), Vector(193, 8.3, -250.8), Vector(-328.2, 3.05, -121.3), Vector(27.6, 333.6, 366.6), 
				Vector(-344.2, 3, -132.2), Vector(-322.5, -2.8, -189));

			Global.Map_Teleport_Exits = Array(Vector(-330, 3.05, -118.5), Vector(27.6, 333.6, 363.6), Vector(272, 8.3, -250.8), Vector(196, 8.3, -250.8), 
				Vector(-324.1, -3.1, -196.3), Vector(-341.7, 3, -130.2));
		End;
		If(Global.Map_Teleport_Locations != Empty Array);
			For Global Variable(TP_Help, 0, Count Of(Global.Map_Teleport_Locations), 1);
				Create Effect(All Players(All Teams), Ring, Color(Rose), Global.Map_Teleport_Locations[Global.TP_Help], 1.2, Visible To);
			End;
			Global.TP_Help = True;
		End;

		Modify Global Variable(Mod_Rank, Remove From Array By Index, 0);
		Modify Global Variable(Mod_Rank, Remove From Array By Index, 0);

		Wait(20, Ignore Condition);
		Wait(3, Ignore Condition);
		If(String Length(Global.Credits[0])!=61 || String Length(Global.Credits[1])!=34 || 
			Custom String("E{1}t{2}em{0}", Char In String(Global.Credits[0], 49), Char In String(Global.Credits[0], 30), Char In String(Global.Credits[0], 18)) != Custom String("Extremo"));
			For Global Variable(Drawing_Obj_Storage, 0, 128, 1);
				Global.Drawing_Obj_Storage -= 1;
			End;
		End;
	}
}

rule("Teleports Logic")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Global.TP_Help == True;
		Is True For Any(Global.Map_Teleport_Locations, Distance Between(Current Array Element, Event Player) <= 1.2) == True;
		Is On Ground(Event Player) == True;
	}

	actions
	{
		For Player Variable(Event Player, TP_Index, 0, Count Of(Global.Map_Teleport_Locations), 1);
			If(Distance Between(Global.Map_Teleport_Locations[Event Player.TP_Index], Event Player) <= 1.2);
				Teleport(Event Player, Global.Map_Teleport_Exits[Event Player.TP_Index]);
				Set Status(Event Player, Null, Rooted, 0.6);
				Break;
			End;
		End;
	}
}

rule("Moe Position")
{
	event
	{
		Ongoing - Global;
	}

	actions
	{
		Global.Moe_Position = Vector(0,100,0);
		Global.Moe_Force = False;
		If(Current Map == Map(Nepal Shrine));
			Global.Moe_Position = Vector(-18.35, 13, 0);
		Else If(Current Map == Map(Nepal Village));
			Global.Moe_Position = Vector(-211.55, -88, -2.4);
		Else If(Current Map == Map(Paris));
			Global.Moe_Position = Vector(-36.9, 11.99, 26.2);
		Else If(Current Map == Map(Blizzard World Winter));
			Global.Moe_Position = Vector(-131.34, 1.74, 107.87);
		Else If(Current Map == Map(Busan Downtown Lunar New Year));
			Global.Moe_Position = Vector(51.9, 21.4, -127.3);
		Else If(Current Map == Map(Busan Sanctuary Lunar New Year));
			Global.Moe_Position = Vector(-328.9, 8.07, 179.33);
		Else If(Current Map == Map(New Queen Street));
			Global.Moe_Position = Vector(-53, 2, -5.25);
		Else If(Current Map == Map(Esperança));
			Global.Moe_Position = Vector(0, 0, 19.65);
		Else If(Current Map == Map(Château Guillard) || Current Map == Map(Château Guillard Halloween));
			Global.Moe_Position = Vector(206.5, 0.6, 89.7);
		Else If(Current Map == Map(Black Forest) || Current Map == Map(Black Forest Winter));
			Global.Moe_Position = Vector(3.7, 15.56, -10.07);
		Else If(Current Map == Map(Castillo));
			Global.Moe_Position = Vector(-121.14, 34.57, 71.82);
		Else If(Current Map == Map(Watchpoint: Gibraltar));
			Global.Moe_Position = Vector(57.87, 9.44, -117.95);
		Else If(Current Map == Map(Malevento));
			Global.Moe_Position = Vector(-34.36, -1, 25.2);
		Else If(Current Map == Map(Necropolis));
			Global.Moe_Position = Vector(2.75, 3, -26.85);
		Else If(Current Map == Map(Petra));
			Global.Moe_Position = Vector(-17.38, -8.08, 28.85);
		Else If(Current Map == Map(Circuit Royal));
			Global.Moe_Position = Vector(15.78, 11.37, -43.46);
		Else If(Current Map == Map(Hollywood));
			Global.Moe_Position = Vector(-11.1, 0.01, 41);
		Else If(Current Map == Map(Eichenwalde) || Current Map == Map(Eichenwalde Halloween));
			Global.Moe_Position = Vector(125.6, 14.73, -18.6);
		Else If(Current Map == Map(Ilios) || Current Map == Map(Ilios Lighthouse));
			Global.Moe_Position = Vector(358.48, 23.41, -51.67);
		Else If(Current Map == Map(Ilios Ruins));
			Global.Moe_Position = Vector(41.6, 69, -163.7);
		Else If(Current Map == Map(Ilios Well));
			Global.Moe_Position = Vector(-184.3, 1, -22.65);
		Else If(Current Map == Map(Oasis City Center));
			Global.Moe_Position = Vector(114.04, 0.8, 218.04);
		Else If(Current Map == Map(Oasis Gardens));
			Global.Moe_Position = Vector(129.9, 15.3, -236.15);
		Else If(Current Map == Map(Route 66));
			Global.Moe_Position = Vector(-33.22, 3.21, -11.76);
		Else If(Current Map == Map(Shambali Monastery));
			Global.Moe_Position = Vector(-27.95, 73.79, 195.38);
		Else If(Current Map == Map(Temple Of Anubis));
			Global.Moe_Position = Vector(15.86, 10.04, 11.82);
		Else If(Current Map == Map(Lijiang Tower) || Current Map == Map(Lijiang Control Center) 
			|| Current Map == Map(Lijiang Tower Lunar New Year) || Current Map == Map(Lijiang Control Center Lunar New Year));
			Global.Moe_Position = Vector(-17.3, 270, 330.7);
		Else If(Current Map == Map(Lijiang Night Market) || Current Map == Map(Lijiang Night Market Lunar New Year));
			Global.Moe_Position = Vector(0, 95.3, 129.8);
		Else If(Current Map == Map(Ayutthaya));
			Global.Moe_Position = Vector(16, 1, 50.64);
		Else If(Current Map == Map(Volskaya Industries));
			Global.Moe_Position = Vector(-8.2, -4.23, 39.75);
		Else If(Current Map == Map(Havana));
			Global.Moe_Position = Vector(-58.3, 3.95, -30.86);
		Else If(Current Map == Map(Suravasa));
			Global.Moe_Position = Vector(182.18, 0.78, 63.41);
		Else If(Current Map == Map(New Junk City));
			Global.Moe_Position = Vector(4.78, 3.84, -67.62);
		Else If(Current Map == Map(Midtown));
			Global.Moe_Position = Vector(62, 8.11, 13.9);
		Else If(Current Map == Map(Samoa));
			Global.Moe_Position = Vector(257.5, 5.75, -283.8);
		Else;
			Global.Moe_Force = True;
		End;
		
		Abort If(Not(Global.Moe_Force));
		If(Current Map == Map(Kanezaka));
			Global.Moe_Position = Vector(6.5, 6, 14);
		Else If(Current Map == Map(Hanamura) || Current Map == Map(Hanamura Winter));
			Global.Moe_Position = Vector(49.4, -1, -0.2);
		Else If(Current Map == Map(King's Row) || Current Map == Map(King's Row Winter));
			Global.Moe_Position = Vector(-76.8, 0.5, -37);
		Else If(Current Map == Map(Dorado));
			Global.Moe_Position = Vector(71.6, 7, -30.27);
		Else If(Current Map == Map(Nepal));
			Global.Moe_Position = Vector(72.2, 84, -11.26);
		Else If(Current Map == Map(Nepal Sanctum));
			Global.Moe_Position = Vector(89.9, 132.91, -45);
		Else If(Current Map == Map(Busan));
			Global.Moe_Position = Vector(223.5, 10, 211.5);
		Else If(Current Map == Map(Numbani));
			Global.Moe_Position = Vector(19.95, 0.25, 4.4);
		Else If(Current Map == Map(Colosseo));
			Global.Moe_Position = Vector(-11.3, 2, -10.2);
		Else If(Current Map == Map(Ecopoint: Antarctica) || Current Map == Map(Ecopoint: Antarctica Winter));
			Global.Moe_Position = Vector(26, 9.25, 0);
		Else If(Current Map == Map(Hollywood Halloween));
			Global.Moe_Position = Vector(0.4, 6.4, -104.92);
		Else If(Current Map == Map(Horizon Lunar Colony));
			Global.Moe_Position = Vector(86.3, 6.62, -60.85);
		Else If(Current Map == Map(Junkertown));
			Global.Moe_Position = Vector(-22.87, 4.76, -53.75);
		Else If(Current Map == Map(Oasis) || Current Map == Map(Oasis University));
			Global.Moe_Position = Vector(-128, 11.1, 0);
		Else If(Current Map == Map(Antarctic Peninsula));
			Global.Moe_Position = Vector(318.4, -27, -132.2);
		Else If(Current Map == Map(Paraíso));
			Global.Moe_Position = Vector(-39.5, -2, 65.8);
		Else;
			Global.Moe_Force = False;
		End;
	}
}

rule("Spawn Moe-Bot")
{
	event
	{
		Ongoing - Global;
	}

	conditions
	{
		Is True For Any(All Players(All Teams), Custom String("Moe Szyslak") == Custom String("{0}", Current Array Element)) == False;
		Count Of(All Players(All Teams)) < 12;
	}

	actions
	{
		Wait(3, Abort When False);
		If(Count Of(All Players(Team 1)) < 6);
			Create Dummy Bot(Hero(Soldier: 76), Team 1, -1, Vector(0, 100, 0), Vector(0,0,1));
		Else;
			Create Dummy Bot(Hero(Soldier: 76), Team 2, -1, Vector(0, 100, 0), Vector(0,0,1));
		End;
		Start Forcing Dummy Bot Name(Filtered Array(All Players(All Teams), Is Dummy Bot(Current Array Element)), Custom String("Moe Szyslak"));
	}
}

rule("Moe-Bot Behavior")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Dummy Bot(Event Player) == True;
	}

	actions
	{
		Wait(0.1, Ignore Condition);
		"Moe's gender is attack helicopter"
		Start Facing(Event Player, Update Every Frame(Direction Towards(Eye Position(Event Player), 
			Eye Position(Closest Player To(Event Player, All Teams)))),
			300, To World, Direction and Turn Rate);
		Event Player.Scale_Real = 1;
		Chase Player Variable At Rate(Event Player, Spam_Cooldown, 0, 1, None);
		Chase Player Variable At Rate(Event Player, Bot_CD, 0, 1, Destination and Rate);
		Stop Modifying Hero Voice Lines(Event Player);
		Set Max Health(Event Player, 10000);
		Set Knockback Received(Event Player, 0);
		Start Heal Over Time(Event Player, Null, 9999, 500);
		If(Global.Moe_Force);
			Start Forcing Player Position(Event Player, Global.Moe_Position, False);
		End;
		Event Player.Auto_Respawn = False;
		Wait(0.1, Ignore Condition);
		If(Current Map == Map(Colosseo));
			Disable Movement Collision With Environment(Event Player, False);
		End;
		Wait(0.1, Ignore Condition);
		Teleport(Event Player, Global.Moe_Position);
	}
}

rule("Moe-Bot Respawn")
{
	event
	{
		Player Died;
		All;
		All;
	}

	conditions
	{
		Is Dummy Bot(Event Player) == True;
		Custom String("{0}", Event Player) == Custom String("Moe Szyslak");
	}

	actions
	{
		Wait Until(Is Alive(Event Player), 9999);
		Wait(1, Ignore Condition);
		Teleport(Event Player, Global.Moe_Position);
		If(Global.Moe_Force);
			Start Forcing Player Position(Event Player, Global.Moe_Position, False);
		End;
	}
}

rule("Moe-Bot Aggro")
{
	event
	{
		Player Took Damage;
		All;
		All;
	}

	conditions
	{
		Is Dummy Bot(Event Player) == True;
	}

	actions
	{
		If(Event Player.Bot_CD == 0);
			Event Player.Bot_CD = 2;
			Wait(0.2, Ignore Condition);
			Communicate(Event Player, Thanks);
		End;
		Event Player.Bot_Aggro += Event Damage;
		If(Event Player.Bot_Aggro >= 5000);
			Set Ultimate Ability Enabled(Event Player, True);
			Set Ultimate Charge(Event Player, 100);
			Press Button(Event Player, Button(Ultimate));
			Press Button(Event Player, Button(Primary Fire));
			Set Weapon(Event Player, 2);
			Wait(0.01, Ignore Condition);
			Start Holding Button(Event Player, Button(Primary Fire));
			While(Is Using Ultimate(Event Player));
				Wait(0.01, Ignore Condition);
				Set Facing(Event Player, Update Every Frame(Direction Towards(Eye Position(Event Player), 
					Eye Position(Random Value In Array(Filtered Array(All Players(All Teams), 
					Is In Line Of Sight(Eye Position(Event Player), Eye Position(Current Array Element),Barriers Do Not Block LOS)))))), To World);
				Event Player.Bot_No += 1;
				If(Event Player.Bot_No >= 60);
					Communicate(Event Player, No);
					Event Player.Bot_No = 0;
				End;
			End;
			Event Player.Bot_Aggro = 0;
			Event Player.Bot_No = 0;
			Stop Holding Button(Event Player, Button(Primary Fire));
			Start Facing(Event Player, Update Every Frame(Direction Towards(Eye Position(Event Player), 
				Eye Position(Closest Player To(Event Player, All Teams)))),
				300, To World, Direction and Turn Rate);
		End;
	}
}

rule("Midtown Bonus")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is On Objective(Event Player) == True;
	}

	actions
	{
		Create Icon(All Players(All Teams), Add(Eye Position(Event Player), Vector(
				0.5 * Cosine From Degrees(Total Time Elapsed * 30), 
				0.2 * Sine From Radians(Total Time Elapsed * 0.5) - 0.5, 
				0.5 * Sine From Degrees(Total Time Elapsed * 30))), Heart, Visible To Position and Color, Global.Rainbow_Color, False);
		Event Player.Midtown_Bonus = Last Created Entity;
		Wait Until(Not(Is On Objective(Event Player)), 9999);
		Destroy Icon(Event Player.Midtown_Bonus);
	}
}

rule("Hero features toggle")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		(Event Player.Mode_Cycle == 35 || Event Player.Mode_Cycle_Default == 17) == True;
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
		If(Is Button Held(Event Player, Button(Ultimate)));
			If(Event Player.FunkySkillsToggle == False);
				Small Message(Event Player, Custom String(" Hero Features ON"));
				Event Player.FunkySkillsToggle = True;
			Else;
				Small Message(Event Player, Custom String(" Hero Features OFF"));
				Event Player.FunkySkillsToggle = False;
			End;
		End;
		If(Is Button Held(Event Player, Button(Secondaryfire)));
			Abort If(Not(Event Player.High_Rank));
			Wait Until(Not(Is Button Held(Event Player, Button(Secondaryfire)) && Is Button Held(Event Player, Button(Crouch))), 3);
			Abort If(Not(Is Button Held(Event Player, Button(Secondaryfire)) && Is Button Held(Event Player, Button(Crouch))));
			Event Player.Heaven_Strike_ID[2] = True;
			Small Message(Event Player, Custom String("  Skill directions reversed"));
		End;
	}
}

rule("Individual effect: kwally (is moving)")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Alive(Event Player) == True;
		Has Spawned(Event Player) == True;
		Event Player.Is_Invisible == False;
	}

	actions
	{
		Abort If(Custom String("{0}", Event Player) != Custom String("kwally"));
		Play Effect(All Players(All Teams), Ring Explosion, Color(Black), Position Of(Event Player) + Vector(0, 0.022, 0), 1.3);
		Wait(0.1, Ignore Condition);
		Loop If Condition Is True;
	}
}

rule("Play Effect while jump or crouch")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Is Alive(Event Player) == True;
		(Is Button Held(Event Player, Button(Jump)) || Is Button Held(Event Player, Button(Crouch))) == True;
	}

	actions
	{
		Play Effect(All Players(All Teams), Ring Explosion, Global.Rainbow_Color, Position Of(Event Player) + Vector(0, 0.600, 0), 1.75);
		Wait(0.070, Ignore Condition);
	}
}

rule("Signal Catch Failsave")
{
	event
	{
		Ongoing - Each Player;
		All;
		All;
	}

	conditions
	{
		Event Player.Signal == True;
	}

	actions
	{
		Event Player.Signal = False;
	}
}

